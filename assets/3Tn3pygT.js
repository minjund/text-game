const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cos6XRuz.js","./nps6eUVs.js","./ujZbF_jb.js","./BB3q3ZkC.js","./B-aJp9Gp.js","./entry.DS_uRRoT.css","./GameBattleModal.BFNsUqXW.css","./DwJ79lRt.js","./CMEnD4Fu.js","./DILKY0-2.js","./DgtFVwR8.js","./GameActiveCardsModal.B6r-ilfv.css","./BfeqF0F6.js","./GameReincarnationModal.CkIMSg-m.css","./BVSfE8_u.js","./GamePassiveCardsModal.irA25d0s.css","./DHV6BLCO.js","./GameCardCollection.bWGxB5-_.css","./BnlTcmmn.js","./GameCommandmentsModal.BpQvi8cF.css","./Bt57P-Cf.js","./GameAdvisorModal.DXEfPlk2.css","./BDmew19I.js","./GameSynergyCardSelection.ZhzXQiyu.css","./B8DWJQTO.js","./GameSynergyCollection.1cVpPlsE.css","./COg7VN_i.js","./GameSynergyGuide.cL9gEKXo.css","./Ca9xP7sd.js","./GameDailyCardExchange.CMiIgq1D.css","./C0sj-ye_.js","./GameResourceHelp.N43b38by.css","./3PfAMppZ.js","./GameAdventureMap.KMmYI9En.css","./Dslhb5yH.js","./GameAdventureShop.CBia5tev.css","./BijoSy22.js","./GameAdventureRest.xCSJfAfh.css","./CpL7NpvQ.js","./GameBattleCardSelection.CZ64oW4j.css","./DfbduHha.js","./GameInteractiveTutorial.D-4ZfAS-.css","./BuCR35jw.js","./Cem265y6.js","./GameDiceRoulette.dJW14i9D.css","./DLoMSZBP.js"])))=>i.map(i=>d[i]);
import{_ as e,a}from"#entry";import{e as t,g as s,i as l,k as o,l as r,m as n,o as i,q as c,s as d,b as u,M as m,t as v,v as p,x as f}from"./B-aJp9Gp.js";import{d as b,c as g,f as x,k as y,l as h,j as w,p as _,n as C,x as E,y as k,b as D,w as S,z as T,o as $,q as R,M as P,N as j,u as I,T as A,I as O}from"./nps6eUVs.js";import{u as M}from"./mxPzXiGG.js";const L={class:"resource-icon"},N={class:"resource-info"},B={class:"resource-label"},V={class:"resource-value"},G=["title"],q=b({__name:"ResourceDisplay",props:{icon:{},label:{},value:{},variant:{default:"default"},showPlus:{type:Boolean,default:!1},helpEnabled:{type:Boolean,default:!0}},emits:["show-help"],setup(e){const a=e,t=g(()=>{const e=Math.floor(a.value);return a.showPlus&&e>0?`+${e}`:e.toLocaleString()});return(a,s)=>(y(),x("div",{class:C(["resource-display",e.variant,"group relative"])},[h("span",L,_(e.icon),1),h("div",N,[h("span",B,_(e.label),1),h("span",V,_(t.value),1)]),e.helpEnabled?(y(),x("button",{key:0,onClick:s[0]||(s[0]=e=>a.$emit("show-help")),class:C(["help-button",`help-${e.label.toLowerCase()}`]),title:`${e.label} ë„ì›€ë§`}," ? ",10,G)):w("",!0)],2))}}),H=Object.assign(e(q,[["__scopeId","data-v-47f0e261"]]),{__name:"GameResourceDisplay"}),U={class:"fixed top-2 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-1.5 pointer-events-none w-full max-w-md px-2"},z={class:"flex flex-col gap-1.5"},F={class:"flex justify-between gap-1.5"},J={class:"w-full pointer-events-auto"},W={class:"resource-info"},K={key:0,class:"resource-value text-xs"},Q={key:1,class:"resource-value text-xs text-red-400"},X={class:"flex justify-between gap-1.5"},Y={class:"flex-1 pointer-events-auto"},Z={class:"resource-display compact border-blue-500"},ee={class:"resource-info"},ae={class:"resource-value"},te={class:"flex-1 pointer-events-auto"},se={class:"resource-display compact border-amber-500"},le={class:"resource-info"},oe={class:"resource-value text-amber-300"},re={key:0,class:"pointer-events-auto"},ne={class:"resource-value text-xs w-full animate-pulse"},ie={key:1,class:"pointer-events-auto"},ce={class:"resource-display compact border-indigo-500 bg-indigo-900/30"},de={class:"resource-info w-full"},ue={class:"flex flex-wrap gap-1 mt-1"},me={class:"flex justify-between gap-1.5"},ve={class:"flex justify-between gap-1.5"},pe=b({__name:"GameMobileResources",props:{resources:{},timer:{},currentDay:{},reincarnationCount:{default:0},commandmentEffects:{default:null}},emits:["show-resource-help"],setup(e){const a=e,t=g(()=>{if(a.currentDay>=42)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=g(()=>a.currentDay>=42?"":0===t.value?"âš”ï¸ ì˜¤ëŠ˜ ì œêµ­ ì¹¨ëžµ!":1===t.value?"âš”ï¸ ë‚´ì¼ ì œêµ­ ì¹¨ëžµ!":`âš”ï¸ ${t.value}ì¼ í›„ ì œêµ­ ì¹¨ëžµ`),l=g(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,o)=>(y(),x("div",U,[h("div",z,[h("div",F,[h("div",J,[h("div",{class:C(["resource-display compact",e.timer.isExpired?"border-red-500":e.timer.days<7?"border-yellow-500":"border-indigo-500"])},[o[5]||(o[5]=h("span",{class:"resource-icon"},"â°",-1)),h("div",W,[o[4]||(o[4]=h("span",{class:"resource-label"},"ì œêµ­ ì •ë³µ ê¸°í•œ",-1)),e.timer.isExpired?(y(),x("span",Q,"ì¢…ë£Œ!")):(y(),x("span",K,_(e.timer.days)+"ì¼ ë‚¨ìŒ ",1))])],2)])]),h("div",X,[h("div",Y,[h("div",Z,[o[7]||(o[7]=h("span",{class:"resource-icon"},"ðŸ“…",-1)),h("div",ee,[o[6]||(o[6]=h("span",{class:"resource-label"},"ê²Œìž„ ì¼ì°¨",-1)),h("span",ae,_(e.currentDay)+"ì¼",1)])])]),h("div",te,[h("div",se,[o[9]||(o[9]=h("span",{class:"resource-icon"},"â™»ï¸",-1)),h("div",le,[o[8]||(o[8]=h("span",{class:"resource-label"},"í™˜ìƒ",-1)),h("span",oe,_(e.reincarnationCount)+"íšŒ",1)])])])]),s.value?(y(),x("div",re,[h("div",{class:C(["resource-display compact text-center",t.value<=1?"border-red-500 bg-red-900/30":"border-yellow-500 bg-yellow-900/20"])},[h("span",ne,_(s.value),1)],2)])):w("",!0),e.commandmentEffects&&l.value?(y(),x("div",ie,[h("div",ce,[o[11]||(o[11]=h("span",{class:"resource-icon"},"âš–ï¸",-1)),h("div",de,[o[10]||(o[10]=h("span",{class:"resource-label"},"ê³„ëª… íš¨ê³¼ (ë§¤ì¼)",-1)),h("div",ue,[0!==e.commandmentEffects.morale?(y(),x("span",{key:0,class:C(["text-[9px] px-1.5 py-0.5 rounded",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200":"bg-red-500/30 text-red-200"])}," ë¯¼ì‹¬ "+_(e.commandmentEffects.morale>0?"+":"")+_(e.commandmentEffects.morale),3)):w("",!0),0!==e.commandmentEffects.gold?(y(),x("span",{key:1,class:C(["text-[9px] px-1.5 py-0.5 rounded",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200":"bg-red-500/30 text-red-200"])}," ê¸ˆ "+_(e.commandmentEffects.gold>0?"+":"")+_(e.commandmentEffects.gold),3)):w("",!0),0!==e.commandmentEffects.military?(y(),x("span",{key:2,class:C(["text-[9px] px-1.5 py-0.5 rounded",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200":"bg-red-500/30 text-red-200"])}," ë³‘ë ¥ "+_(e.commandmentEffects.military>0?"+":"")+_(e.commandmentEffects.military),3)):w("",!0),0!==e.commandmentEffects.food?(y(),x("span",{key:3,class:C(["text-[9px] px-1.5 py-0.5 rounded",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200":"bg-red-500/30 text-red-200"])}," ì‹ëŸ‰ "+_(e.commandmentEffects.food>0?"+":"")+_(e.commandmentEffects.food),3)):w("",!0),0!==e.commandmentEffects.population?(y(),x("span",{key:4,class:C(["text-[9px] px-1.5 py-0.5 rounded",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200":"bg-red-500/30 text-red-200"])}," ì¸êµ¬ "+_(e.commandmentEffects.population>0?"+":"")+_(e.commandmentEffects.population),3)):w("",!0)])])])])):w("",!0),h("div",me,[E(H,{icon:"ðŸ–",label:"ì‹ëŸ‰",value:e.resources.food,variant:"compact",onShowHelp:o[0]||(o[0]=e=>a.$emit("show-resource-help","food"))},null,8,["value"]),E(H,{icon:"ðŸ’°",label:"ê¸ˆ",value:e.resources.gold,variant:"compact",onShowHelp:o[1]||(o[1]=e=>a.$emit("show-resource-help","gold"))},null,8,["value"])]),h("div",ve,[E(H,{icon:"âš”ï¸",label:"ë³‘ì‚¬",value:e.resources.soldiers,variant:"compact",onShowHelp:o[2]||(o[2]=e=>a.$emit("show-resource-help","soldiers"))},null,8,["value"]),E(H,{icon:"â¤ï¸",label:"ë¯¼ì‹¬",value:e.resources.morale,variant:"compact",onShowHelp:o[3]||(o[3]=e=>a.$emit("show-resource-help","morale"))},null,8,["value"])])])]))}}),fe=Object.assign(e(pe,[["__scopeId","data-v-4e300400"]]),{__name:"GameMobileResources"}),be={class:"fixed bottom-0 left-1/2 -translate-x-1/2 bg-black/90 border-t border-gray-700 p-2 z-50 w-full max-w-md"},ge={class:"grid grid-cols-3 gap-1.5"},xe=b({__name:"GameMobileActions",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(y(),x("div",be,[h("div",ge,[h("button",{onClick:a[0]||(a[0]=a=>e.$emit("show-commandments")),class:"flex flex-col items-center justify-center bg-amber-700/80 border border-amber-600 rounded-lg p-1.5 active:bg-amber-600 transition-all"},[...a[6]||(a[6]=[h("div",{class:"text-xl mb-0.5"},"âœ¨",-1),h("h3",{class:"text-[9px] font-bold"},"ê³„ëª…",-1)])]),h("button",{onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards")),class:"flex flex-col items-center justify-center bg-purple-700/80 border border-purple-600 rounded-lg p-1.5 active:bg-purple-600 transition-all"},[...a[7]||(a[7]=[h("div",{class:"text-xl mb-0.5"},"ðŸŽ´",-1),h("h3",{class:"text-[9px] font-bold"},"ì¹´ë“œ",-1)])]),h("button",{onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck")),class:"flex flex-col items-center justify-center bg-orange-700/80 border border-orange-600 rounded-lg p-1.5 active:bg-orange-600 transition-all"},[...a[8]||(a[8]=[h("div",{class:"text-xl mb-0.5"},"ðŸƒ",-1),h("h3",{class:"text-[9px] font-bold"},"ë±",-1)])]),h("button",{onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide")),class:"flex flex-col items-center justify-center bg-indigo-700/80 border border-indigo-600 rounded-lg p-1.5 active:bg-indigo-600 transition-all"},[...a[9]||(a[9]=[h("div",{class:"text-xl mb-0.5"},"ðŸ“š",-1),h("h3",{class:"text-[9px] font-bold"},"ë„ê°",-1)])]),h("button",{onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle")),class:"flex flex-col items-center justify-center bg-green-700/80 border border-green-600 rounded-lg p-1.5 active:bg-green-600 transition-all"},[...a[10]||(a[10]=[h("div",{class:"text-lg mb-0.5"},"âš”ï¸",-1),h("h3",{class:"text-[8px] font-bold"},"ëª¨í—˜",-1)])]),h("button",{onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers")),class:"flex flex-col items-center justify-center bg-gray-700/80 border border-gray-600 rounded-lg p-1.5 active:bg-gray-600 transition-all"},[...a[11]||(a[11]=[h("div",{class:"text-xl mb-0.5"},"ðŸ›¡ï¸",-1),h("h3",{class:"text-[9px] font-bold"},"ëª¨ì§‘",-1)])])])]))}),ye=Object.assign(xe,{__name:"GameMobileActions"}),he={class:"hidden md:flex bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700 px-8 py-4"},we={class:"max-w-7xl mx-auto w-full flex items-center justify-between"},_e={class:"flex items-center gap-4"},Ce={class:"text-2xl font-bold text-amber-100"},Ee={class:"text-sm text-slate-400"},ke={class:"flex items-center gap-6"},De={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Se={class:"text-lg font-bold"},Te={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},$e={class:"text-lg font-bold"},Re={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Pe={class:"text-lg font-bold"},je={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Ie={class:"text-lg font-bold"},Ae=b({__name:"GameDesktopHeader",props:{kingdomName:{},day:{},resources:{}},emits:["show-resource-help"],setup:e=>(a,t)=>(y(),x("header",he,[h("div",we,[h("div",_e,[t[4]||(t[4]=h("div",{class:"text-4xl"},"ðŸ‘‘",-1)),h("div",null,[h("h1",Ce,_(e.kingdomName),1),h("p",Ee,"ì œ "+_(e.day)+"ì¼ í†µì¹˜",1)])]),h("div",ke,[h("div",De,[t[6]||(t[6]=h("span",{class:"text-2xl"},"ðŸ–",-1)),h("div",null,[t[5]||(t[5]=h("p",{class:"text-xs text-slate-400"},"ì‹ëŸ‰",-1)),h("p",Se,_(e.resources.food),1)]),h("button",{onClick:t[0]||(t[0]=e=>a.$emit("show-resource-help","food")),class:"absolute -top-1 -right-1 w-5 h-5 bg-green-600 hover:bg-green-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ì‹ëŸ‰ ë„ì›€ë§"}," ? ")]),h("div",Te,[t[8]||(t[8]=h("span",{class:"text-2xl"},"ðŸ’°",-1)),h("div",null,[t[7]||(t[7]=h("p",{class:"text-xs text-slate-400"},"ê¸ˆí™”",-1)),h("p",$e,_(e.resources.gold),1)]),h("button",{onClick:t[1]||(t[1]=e=>a.$emit("show-resource-help","gold")),class:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-600 hover:bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ê¸ˆ ë„ì›€ë§"}," ? ")]),h("div",Re,[t[10]||(t[10]=h("span",{class:"text-2xl"},"âš”ï¸",-1)),h("div",null,[t[9]||(t[9]=h("p",{class:"text-xs text-slate-400"},"ë³‘ì‚¬",-1)),h("p",Pe,_(e.resources.soldiers),1)]),h("button",{onClick:t[2]||(t[2]=e=>a.$emit("show-resource-help","soldiers")),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 hover:bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë³‘ì‚¬ ë„ì›€ë§"}," ? ")]),h("div",je,[t[12]||(t[12]=h("span",{class:"text-2xl"},"â¤ï¸",-1)),h("div",null,[t[11]||(t[11]=h("p",{class:"text-xs text-slate-400"},"ì‚¬ê¸°",-1)),h("p",Ie,_(e.resources.morale),1)]),h("button",{onClick:t[3]||(t[3]=e=>a.$emit("show-resource-help","morale")),class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-600 hover:bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë¯¼ì‹¬ ë„ì›€ë§"}," ? ")])])])]))});Object.assign(Ae,{__name:"GameDesktopHeader"});const Oe={key:0,class:"flex justify-center gap-4 text-center"},Me={class:"flex flex-col"},Le={class:"text-3xl font-bold"},Ne={key:1,class:"text-center text-red-400 font-bold text-xl"},Be=b({__name:"GameTimerCard",props:{days:{},hours:{},minutes:{},seconds:{},isExpired:{type:Boolean}},setup(e){const a=e,t=g(()=>a.isExpired?"border-red-500":a.days<7?"border-yellow-500":"border-indigo-500");return(a,s)=>(y(),x("div",{class:C(["bg-gradient-to-br from-indigo-900/50 to-slate-800/50 border-2 rounded-xl p-4",t.value])},[s[1]||(s[1]=h("div",{class:"flex items-center gap-2 mb-3"},[h("span",{class:"text-2xl"},"â°"),h("span",{class:"text-base font-semibold"},"ì œêµ­ ì •ë³µ ê¸°í•œ")],-1)),e.isExpired?(y(),x("div",Ne,"ì‹œê°„ ì¢…ë£Œ!")):(y(),x("div",Oe,[h("div",Me,[h("span",Le,_(e.days),1),s[0]||(s[0]=h("span",{class:"text-sm text-slate-400"},"ì¼ ë‚¨ìŒ",-1))])]))],2))}}),Ve=Object.assign(Be,{__name:"GameTimerCard"}),Ge={class:"w-80 space-y-4"},qe={class:"text-lg font-bold animate-pulse"},He={key:1,class:"bg-gradient-to-br from-indigo-900/40 to-purple-900/40 backdrop-blur-xl border-2 border-indigo-500/50 rounded-xl p-4"},Ue={class:"flex flex-wrap gap-1.5"},ze=b({__name:"GameLeftSidebar",props:{timer:{},currentDay:{},commandmentEffects:{}},setup(e){const a=e,t=g(()=>{if(a.currentDay>=42)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=g(()=>a.currentDay>=42?"":0===t.value?"âš”ï¸ ì˜¤ëŠ˜ ì œêµ­ ì¹¨ëžµ!":1===t.value?"âš”ï¸ ë‚´ì¼ ì œêµ­ ì¹¨ëžµ!":`âš”ï¸ ${t.value}ì¼ í›„ ì œêµ­ ì¹¨ëžµ`),l=g(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,o)=>(y(),x("div",Ge,[E(Ve,{days:e.timer.days,hours:e.timer.hours,minutes:e.timer.minutes,seconds:e.timer.seconds,"is-expired":e.timer.isExpired},null,8,["days","hours","minutes","seconds","is-expired"]),s.value?(y(),x("div",{key:0,class:C(["bg-gradient-to-br border-2 rounded-xl p-4 text-center",t.value<=1?"from-red-900/50 to-rose-900/50 border-red-500":"from-yellow-900/50 to-amber-900/50 border-yellow-500"])},[h("div",qe,_(s.value),1)],2)):w("",!0),e.commandmentEffects&&l.value?(y(),x("div",He,[o[0]||(o[0]=h("h3",{class:"text-sm font-bold text-indigo-200 mb-3 flex items-center gap-2"},[h("span",null,"âš–ï¸"),k(" ê³„ëª… íš¨ê³¼ (ë§¤ì¼) ")],-1)),h("div",Ue,[0!==e.commandmentEffects.morale?(y(),x("div",{key:0,class:C(["px-2.5 py-1 rounded-md text-xs font-semibold",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border border-emerald-500/40":"bg-red-500/30 text-red-200 border border-red-500/40"])}," ë¯¼ì‹¬ "+_(e.commandmentEffects.morale>0?"+":"")+_(e.commandmentEffects.morale),3)):w("",!0),0!==e.commandmentEffects.gold?(y(),x("div",{key:1,class:C(["px-2.5 py-1 rounded-md text-xs font-semibold",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border border-emerald-500/40":"bg-red-500/30 text-red-200 border border-red-500/40"])}," ê¸ˆ "+_(e.commandmentEffects.gold>0?"+":"")+_(e.commandmentEffects.gold),3)):w("",!0),0!==e.commandmentEffects.military?(y(),x("div",{key:2,class:C(["px-2.5 py-1 rounded-md text-xs font-semibold",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border border-emerald-500/40":"bg-red-500/30 text-red-200 border border-red-500/40"])}," ë³‘ë ¥ "+_(e.commandmentEffects.military>0?"+":"")+_(e.commandmentEffects.military),3)):w("",!0),0!==e.commandmentEffects.food?(y(),x("div",{key:3,class:C(["px-2.5 py-1 rounded-md text-xs font-semibold",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border border-emerald-500/40":"bg-red-500/30 text-red-200 border border-red-500/40"])}," ì‹ëŸ‰ "+_(e.commandmentEffects.food>0?"+":"")+_(e.commandmentEffects.food),3)):w("",!0),0!==e.commandmentEffects.population?(y(),x("div",{key:4,class:C(["px-2.5 py-1 rounded-md text-xs font-semibold",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border border-emerald-500/40":"bg-red-500/30 text-red-200 border border-red-500/40"])}," ì¸êµ¬ "+_(e.commandmentEffects.population>0?"+":"")+_(e.commandmentEffects.population),3)):w("",!0)])])):w("",!0)]))}});Object.assign(ze,{__name:"GameLeftSidebar"});const Fe=["disabled"],Je={class:"action-icon"},We={class:"action-content"},Ke={class:"action-title"},Qe={key:0,class:"action-description"},Xe=b({__name:"ActionButton",props:{icon:{},title:{},description:{},variant:{default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,s=a,l=e=>{t.disabled||s("click",e)};return(a,t)=>(y(),x("button",{class:C(["action-button",e.variant,{"action-button-disabled":e.disabled}]),disabled:e.disabled,onClick:l},[h("div",Je,_(e.icon),1),h("div",We,[h("div",Ke,_(e.title),1),e.description?(y(),x("div",Qe,_(e.description),1)):w("",!0)])],10,Fe))}}),Ye=Object.assign(e(Xe,[["__scopeId","data-v-1657d8d0"]]),{__name:"GameActionButton"}),Ze={class:"w-80 space-y-3"},ea=b({__name:"GameActionPanel",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(y(),x("div",Ze,[E(Ye,{icon:"âœ¨",title:"ì‹ ì˜ ê³„ëª…",description:"ì‹ ì´ ë‚´ë¦° ê³„ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤",variant:"warning",onClick:a[0]||(a[0]=a=>e.$emit("show-commandments"))}),E(Ye,{icon:"ðŸŽ´",title:"ë³´ìœ  ì¹´ë“œ",description:"ë³´ìœ í•œ íŒ¨ì‹œë¸Œ ì¹´ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards"))}),E(Ye,{icon:"ðŸƒ",title:"ì¹´ë“œ ë± ì„¤ì •",description:"ë‚´ì • 3ìž¥ + ì „íˆ¬ 3ìž¥ì„ ìž¥ì°©í•©ë‹ˆë‹¤",variant:"info",onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck"))}),E(Ye,{icon:"ðŸ“š",title:"ì¹´ë“œ ë„ê°",description:"ëª¨ë“  ì¹´ë“œì™€ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide"))}),E(Ye,{icon:"âš”ï¸",title:"ëª¨í—˜",description:"ì  ì„¸ë ¥ê³¼ ì „íˆ¬ë¥¼ ë²Œìž…ë‹ˆë‹¤",variant:"success",onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle"))}),E(Ye,{icon:"ðŸ›¡ï¸",title:"ë³‘ë ¥ ëª¨ì§‘",description:"ê¸ˆ 200ìœ¼ë¡œ ë³‘ë ¥ 100 ëª¨ì§‘",variant:"success",onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers"))})]))});Object.assign(ea,{__name:"GameActionPanel"});const aa={class:"relative z-10 flex flex-col min-h-screen max-w-md mx-auto w-full bg-black/20"},ta={class:"text-2xl"},sa={class:"font-semibold"},la=b({__name:"game",setup(e){const b=j(()=>a(()=>import("./Cos6XRuz.js"),__vite__mapDeps([0,1]),import.meta.url)),k=j(()=>a(()=>import("./ujZbF_jb.js"),__vite__mapDeps([2,1,3,4,5,6]),import.meta.url)),L=j(()=>a(()=>import("./DwJ79lRt.js"),__vite__mapDeps([7,1]),import.meta.url)),N=j(()=>a(()=>import("./CMEnD4Fu.js"),__vite__mapDeps([8,1]),import.meta.url)),B=j(()=>a(()=>import("./DILKY0-2.js"),__vite__mapDeps([9,1]),import.meta.url)),V=j(()=>a(()=>import("./DgtFVwR8.js"),__vite__mapDeps([10,1,3,4,5,11]),import.meta.url)),G=j(()=>a(()=>import("./BfeqF0F6.js"),__vite__mapDeps([12,1,3,4,5,13]),import.meta.url)),q=j(()=>a(()=>import("./BVSfE8_u.js"),__vite__mapDeps([14,1,3,4,5,15]),import.meta.url)),H=j(()=>a(()=>import("./DHV6BLCO.js"),__vite__mapDeps([16,1,4,3,5,17]),import.meta.url)),U=j(()=>a(()=>import("./BnlTcmmn.js"),__vite__mapDeps([18,1,3,4,5,19]),import.meta.url)),z=j(()=>a(()=>import("./Bt57P-Cf.js"),__vite__mapDeps([20,1,3,4,5,21]),import.meta.url)),F=j(()=>a(()=>import("./BDmew19I.js"),__vite__mapDeps([22,1,3,4,5,23]),import.meta.url)),J=j(()=>a(()=>import("./B8DWJQTO.js"),__vite__mapDeps([24,1,3,4,5,25]),import.meta.url)),W=j(()=>a(()=>import("./COg7VN_i.js"),__vite__mapDeps([26,1,4,3,5,27]),import.meta.url)),K=j(()=>a(()=>import("./Ca9xP7sd.js"),__vite__mapDeps([28,1,3,4,5,29]),import.meta.url)),Q=j(()=>a(()=>import("./C0sj-ye_.js"),__vite__mapDeps([30,1,3,4,5,31]),import.meta.url)),X=j(()=>a(()=>import("./3PfAMppZ.js"),__vite__mapDeps([32,1,4,3,5,33]),import.meta.url)),Y=j(()=>a(()=>import("./Dslhb5yH.js"),__vite__mapDeps([34,1,3,4,5,35]),import.meta.url)),Z=j(()=>a(()=>import("./BijoSy22.js"),__vite__mapDeps([36,1,3,4,5,37]),import.meta.url)),ee=j(()=>a(()=>import("./CpL7NpvQ.js"),__vite__mapDeps([38,1,3,4,5,39]),import.meta.url)),ae=j(()=>a(()=>import("./DfbduHha.js"),__vite__mapDeps([40,1,3,4,5,41]),import.meta.url)),te=j(()=>a(()=>import("./BuCR35jw.js"),__vite__mapDeps([42,1]),import.meta.url)),se=j(()=>a(()=>import("./Cem265y6.js"),__vite__mapDeps([43,1,3,4,5,44]),import.meta.url)),le=j(()=>a(()=>import("./DLoMSZBP.js"),__vite__mapDeps([45,1]),import.meta.url)),{nationState:oe,startCards:re}=M(),ne=D([]),{notification:ie,showNotification:ce}=(()=>{const e=D(null);return{notification:e,showNotification:(a,t="info")=>{e.value={message:a,type:t},setTimeout(()=>{e.value=null},3e3)}}})(),{tutorialState:de,advanceDay:ue,onRecruitSoldiers:me,completeStartCardSelection:ve,skipTutorial:pe}=t(),be=D(!1),ge=D(null),xe=D(!1),he=g(()=>{const e=Math.max(0,42-Qe.value.day);return{days:e,hours:0,minutes:0,seconds:0,isExpired:0===e}}),we=g(()=>{if(!oe.value?.selectedCommandments||0===oe.value.selectedCommandments.length)return null;const e={morale:0,gold:0,military:0,food:0,population:0};return oe.value.selectedCommandments.forEach(a=>{e.morale+=a.effects.morale,e.gold+=a.effects.gold,e.military+=a.effects.military,e.food+=a.effects.food,e.population+=a.effects.population}),e}),{playerPassiveCards:_e,showPassiveCardSelection:Ce,availablePassiveCards:Ee}=l(),{cardDeck:ke,equippedCards:De,availableDomesticCards:Se,availableBattleCards:Te,equipCard:$e,unequipCard:Re,loadDeck:Pe}=(e=>{const a=D({domestic:[null,null,null],battle:[null,null,null]}),t="cardDeck",s=e=>"daily"===e.trigger||"recruit"===e.trigger,l=e=>!0===e.isBattleCard||"battle_start"===e.trigger||"battle_win"===e.trigger||"battle_lose"===e.trigger,o=g(()=>[...a.value.domestic.filter(e=>null!==e),...a.value.battle.filter(e=>null!==e)]),r=g(()=>{const a=o.value.map(e=>e.id);return e.value.filter(e=>s(e)&&!a.includes(e.id))}),n=g(()=>{const a=o.value.map(e=>e.id);return e.value.filter(e=>l(e)&&!a.includes(e.id))}),i=()=>{{const e={domestic:a.value.domestic.map(e=>e?.id||null),battle:a.value.battle.map(e=>e?.id||null)};localStorage.setItem(t,JSON.stringify(e))}};return{cardDeck:a,equippedCards:o,availableDomesticCards:r,availableBattleCards:n,isDomesticCard:s,isBattleCard:l,equipCard:(e,t,r)=>!(r<0||r>2||"domestic"===t&&!s(e)||"battle"===t&&!l(e)||o.value.some(a=>a.id===e.id)||(a.value[t][r]=e,i(),0)),unequipCard:(e,t)=>!(t<0||t>2||(a.value[e][t]=null,i(),0)),saveDeck:i,loadDeck:()=>{{const l=localStorage.getItem(t);if(l)try{const t=JSON.parse(l);a.value.domestic=t.domestic.map(a=>a&&e.value.find(e=>e.id===a)||null),a.value.battle=t.battle.map(a=>a&&e.value.find(e=>e.id===a)||null)}catch(s){}}},resetDeck:()=>{a.value={domestic:[null,null,null],battle:[null,null,null]},i()},getActiveCardsForTrigger:e=>o.value.filter(a=>a.trigger===e)}})(_e),je=D(!1),{ownedActiveCards:Ie,battleActiveCards:Ae,maxBattleCards:Oe,loadActiveCards:Me,addToBattleDeck:Le,removeFromBattleDeck:Ne,clearBattleDeck:Be,grantStarterCards:Ve}=o({showNotification:ce});Me();localStorage.getItem("hasGrantedStarterActiveCards")||0!==Ie.value.length||(Ve(),localStorage.setItem("hasGrantedStarterActiveCards","true"));S(Ie,e=>{{const a=e.map(e=>e.id);localStorage.setItem("activeCards",JSON.stringify(a))}},{deep:!0});const Ge=D([]),{playerCards:qe,showCardSelection:He,availableCards:Ue,activeSynergies:ze,totalEffects:Fe,dailyEffects:Je,battleEffects:We,selectCard:Ke}=r(),{kingdom:Qe,empire:Xe,recruitSoldiers:Ye,calculateProduction:Ze}=s(oe,ne,ce),ea=()=>{Ye(),me()},la=D(!1),oa=D(!1),ra=D(!1),na=D(!1),ia=D(!1),ca=D([]),da=D(!1),ua=D(!1),ma=D(!1),va=D(null),pa=e=>{va.value=e,ma.value=!0},fa=()=>{ua.value=!1,de.value.tutorialCompleted=!0,de.value.isActive=!1,localStorage.setItem("tutorialState",JSON.stringify(de.value)),ce("íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ê²Œìž„ì„ ì‹œìž‘í•˜ì„¸ìš”!","success")},{showReincarnationModal:ba,reincarnationData:ga,loadReincarnationData:xa,selectInheritedCard:ya,reincarnateWithoutCard:ha}=n(Qe,_e,oe,ce);xa();const wa=e=>{if(Ka.value){ga.value.inheritedCards.some(a=>a.id===e.id)||(ga.value.inheritedCards.length>=m&&ga.value.inheritedCards.shift(),ga.value.inheritedCards.push(e)),localStorage.setItem("reincarnationData",JSON.stringify(ga.value)),ce(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤! (ëˆ„ì  ìƒì† ì¹´ë“œ: ${ga.value.inheritedCards.length}ê°œ)`,"success"),ba.value=!1,Ka.value=!1}else ya(e)},_a=()=>{Ka.value?(ce("ì¹´ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.","info"),ba.value=!1,Ka.value=!1):ha()},{adventureState:Ca,moveCompletedNodeId:Ea,currentNode:ka,startAdventure:Da,moveToNode:Sa,completeNode:Ta,completeAdventure:$a,rollDice:Ra,useNextDice:Pa,startAutoMove:ja,selectPath:Ia}=i(Qe.value.resources,ce),Aa=()=>{La.value=!1,Na.value=!1;const e=Math.floor(.5*Ca.value.accumulatedRewards.gold),a=Math.floor(.5*Ca.value.accumulatedRewards.food);Qe.value.resources.gold+=e,Qe.value.resources.food+=a,ce(`ëª¨í—˜ ì¼ì‹œì¤‘ì§€... ê¸ˆ +${e}, ì‹ëŸ‰ +${a} (50%)`,"info"),Ca.value.active=!1,Ca.value.result="retreat"},Oa=D(!1),Ma=D(!1),La=D(!1),Na=D(!1),Ba=D(!1),Va=async()=>{Ba.value=!0,await new Promise(e=>setTimeout(e,1e3)),Ra(),Ba.value=!1,ce("ë£°ë › 5ê°œ ìˆ«ìž ìƒì„±! í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.","success")},Ga=()=>{La.value=!1,Na.value=!0,setTimeout(()=>{const e=Pa();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),ja(e)},300)},qa=()=>{const e=Pa();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),ja(e)},Ha=()=>{Ca.value.nodes.length>0?(Ca.value.active=!0,Ca.value.result=void 0,Ca.value.diceResults.length>0&&Ca.value.currentDiceIndex<Ca.value.diceResults.length?(Na.value=!0,La.value=!1,setTimeout(()=>{Dt()},1e3)):(La.value=!0,Na.value=!1)):(Da(),La.value=!0,Na.value=!1)},Ua=D(!1),za=D({enemyName:"",enemyPower:0,battleType:"normal"}),Fa=D([]),Ja=D(!1),Wa=D(!1),Ka=D(!1),{currentBattle:Qa,isScrolling:Xa,loadBattleRecords:Ya,selectBattleType:Za,startStoryBattle:et,closeBattle:at,currentBattleMode:tt,useActiveCard:st,usedActiveCards:lt,attackerScore:ot,defenderScore:rt,isPaused:nt,cardSelectionTime:it,stopCardSelectionTimer:ct,manualPauseBattle:dt,manualResumeBattle:ut}=c({kingdom:Qe,enemyKingdoms:f,permanentEffects:ne,empire:Xe,showNotification:ce,synergyBattleEffects:We,isWeeklyInvasion:Ja,showReincarnationModal:ba,selectedBattleCards:Fa,battleActiveCards:Ae}),mt=()=>{if(!Qa.value)return;nt.value||dt();const e=ot.value>rt.value;Qa.value.result=e?"victory":"defeat";const a={turn:999,generalName:"ì‹¬íŒê´€",action:"ì „íˆ¬ ì¢…ë£Œ",success:!0,message:"",story:e?`ðŸŽ‰ ${Qa.value.attacker.kingdomName}ì˜ ìŠ¹ë¦¬! (${ot.value} vs ${rt.value})`:`ðŸ˜” ${Qa.value.defender.kingdomName}ì˜ ìŠ¹ë¦¬... (${ot.value} vs ${rt.value})`,narrativeType:"narration"};Qa.value.log.push(a),setTimeout(()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)},100)},vt=()=>{const e=Qa.value?.result,a=tt.value;at(),Ca?.value?.active?Mt(e):"defeat"===e&&"empire"===a&&setTimeout(()=>{Ja&&(Ja.value=!1),ba.value=!0},500)};Ya(),re.value&&re.value.length>0&&re.value.forEach(e=>{_e.value.some(a=>a.id===e.id)||_e.value.push(e)});const{currentEvent:pt,currentCrossroad:ft,drawEventCard:bt,selectPassiveCard:gt,selectChoice:xt,closeEvent:yt,selectCrossroadChoice:ht,closeCrossroad:wt}=d({kingdom:Qe,playerPassiveCards:_e,showPassiveCardSelection:Ce,availablePassiveCards:Ee,permanentEffects:ne,reincarnationData:ga,showReincarnationModal:ba,showNotification:ce,calculateProduction:Ze,synergyDailyEffects:Je,godGameState:oe}),_t=()=>{yt(),Ca.value?.active&&Dt()},Ct=e=>{xt(e),Ca.value?.active&&Dt()},Et=()=>{wt(),Ca.value?.active&&Dt()},kt=e=>{ht(e),Ca.value?.active&&Dt()};S(ba,e=>{e&&(Ge.value=[..._e.value])}),S(()=>Ea.value,e=>{e&&setTimeout(()=>{const a=Ca.value.nodes.find(a=>a.id===e);a&&!a.completed?$t(a):a&&a.completed&&Dt(),Ea.value=null},100)});const Dt=()=>{if(Ca.value.active)if(Ca.value.currentDiceIndex<Ca.value.diceResults.length){const e=Pa();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),setTimeout(()=>{ja(e)},500)}else Na.value=!1,Ca.value.diceResults=[],Ca.value.currentDiceIndex=0,setTimeout(()=>{La.value=!0,ce("ëª¨ë“  ìˆ«ìžë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ë£°ë ›ì„ ëŒë ¤ì£¼ì„¸ìš”.","info")},800)},St=()=>{if(be.value=!1,ge.value?.rewards){const e=ge.value.rewards;e.gold&&(Qe.value.resources.gold+=e.gold),e.food&&(Qe.value.resources.food+=e.food),e.soldiers&&(Qe.value.resources.soldiers+=e.soldiers)}ge.value=null},Tt=e=>{gt(e),Ca.value?.active&&setTimeout(()=>{Dt()},500)},$t=e=>{switch(Sa(e.id),e.type){case"start":const a=Ca.value.nodes.find(a=>a.id===e.id);a&&(a.status="completed",a.completed=!0),Lt(),Ca.value.active&&Dt();break;case"battle":case"elite":case"boss":e.enemy&&("boss"===e.type&&(Wa.value=!0),za.value={enemyName:e.enemy.name,enemyPower:e.enemy.power,battleType:"boss"===e.type?"empire":"normal"},Ua.value=!0);break;case"event":const t=Ca.value.nodes.find(a=>a.id===e.id);t&&(t.status="completed",t.completed=!0),Ca.value.active?bt():Lt();break;case"shop":Oa.value=!0;break;case"rest":Ma.value=!0;break;case"treasure":const s={gold:Math.floor(300*Math.random())+200,food:Math.floor(200*Math.random())+100,cards:p(1)};Ta(s),ce(`ðŸ’Ž ë³´ë¬¼ ë°œê²¬! ê¸ˆ +${s.gold}, ì‹ëŸ‰ +${s.food}`,"success");const l=Ca.value.nodes.find(a=>a.id===e.id);l&&(l.status="completed",l.completed=!0),Lt(),Ca.value.active&&Dt()}},Rt=e=>{if(Ca.value.isSelectingPath){if(Ca.value.availablePaths.some(a=>a.id===e.id)){Ia(e.id);const a={battle:"âš”ï¸",elite:"ðŸ”¥",boss:"ðŸ‘‘",event:"â“",shop:"ðŸª",rest:"ðŸ•ï¸",treasure:"ðŸ’Ž",start:"ðŸšª"}[e.type]||"âž¡ï¸";ce(`${a} ë°©í–¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!`,"info")}else ce("ì„ íƒ ê°€ëŠ¥í•œ ê²½ë¡œê°€ ì•„ë‹™ë‹ˆë‹¤.","error");return}if(e.completed)return Sa(e.id),void ce("ì´ë¯¸ ì™„ë£Œí•œ ì¹¸ìœ¼ë¡œ ë˜ëŒì•„ì™”ìŠµë‹ˆë‹¤.","info");ce("ë£°ë ›ì„ ëŒë ¤ì„œ ì´ë™í•´ì£¼ì„¸ìš”!","info")},Pt=()=>{Oa.value=!1,ka.value&&(ka.value.status="completed",ka.value.completed=!0,ka.value.connections.forEach(e=>{const a=Ca.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Lt(),Ca.value.active&&Dt())},jt=e=>{let a=!1;switch(e){case"soldiers":Qe.value.resources.gold>=400&&(Qe.value.resources.gold-=400,Qe.value.resources.soldiers+=200,ce("ë³‘ì‚¬ 200ëª… ëª¨ì§‘!","success"),a=!0);break;case"food":Qe.value.resources.gold>=200&&(Qe.value.resources.gold-=200,Qe.value.resources.food+=500,ce("ì‹ëŸ‰ 500 êµ¬ë§¤!","success"),a=!0);break;case"card":Qe.value.resources.gold>=300&&(Qe.value.resources.gold-=300,Ce.value=!0,ce("ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!","info"),a=!0);break;case"heal":if(Qe.value.resources.food>=200){Qe.value.resources.food-=200;const e=Math.floor(.1*Ca.value.startingResources.soldiers);Qe.value.resources.soldiers+=e,ce(`ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success"),a=!0}}a&&"card"!==e&&Pt()},It=e=>{switch(e){case"heal":const e=Math.floor(.2*Ca.value.startingResources.soldiers);Qe.value.resources.soldiers+=e,ce(`ðŸ•ï¸ íœ´ì‹ìœ¼ë¡œ ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success");break;case"remove-card":ce("ðŸ—‘ï¸ ì¹´ë“œ ì •ë¦¬ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ìž…ë‹ˆë‹¤","info");break;case"meditate":const a=Math.floor(200*Math.random())+100,t=Math.floor(150*Math.random())+50;Qe.value.resources.gold+=a,Qe.value.resources.food+=t,ce(`ðŸ§˜ ëª…ìƒ... ê¸ˆ +${a}, ì‹ëŸ‰ +${t}`,"success")}Ma.value=!1,ka.value&&(ka.value.status="completed",ka.value.completed=!0,ka.value.connections.forEach(e=>{const a=Ca.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Lt(),Ca.value.active&&Dt())},At=()=>{Ua.value=!1,Ca.value?.active&&ka.value&&(ka.value.status="completed",ka.value.completed=!0,Wa.value&&(Wa.value=!1),setTimeout(()=>{Dt()},300))},Ot=e=>{Fa.value=e,Ua.value=!1,Be(),e.forEach(e=>{Le(e)}),e.length,et(za.value.enemyName,za.value.enemyPower,za.value.battleType)},Mt=e=>{if(ka.value&&ka.value.enemy)if(Wa.value)if("victory"===e){const e={gold:5e3,food:3e3,soldiers:1e3};Qe.value.resources.gold+=e.gold,Qe.value.resources.food+=e.food,Qe.value.resources.soldiers+=e.soldiers,ce(`ðŸ‘‘ ë³´ìŠ¤ ì²˜ì¹˜! ê¸ˆ +${e.gold}, ì‹ëŸ‰ +${e.food}, ë³‘ë ¥ +${e.soldiers}`,"success"),$a(),setTimeout(()=>{Wa.value=!1,Ka.value=!0,ba.value=!0},1e3)}else setTimeout(()=>{Wa.value=!1,Ka.value=!1,ba.value=!0},500);else if("victory"===e){Ta(ka.value.enemy.rewards),ce(`ìŠ¹ë¦¬! ê¸ˆ +${ka.value.enemy.rewards.gold}, ì‹ëŸ‰ +${ka.value.enemy.rewards.food}`,"success");const e=ka.value.enemy.rewards.cards&&ka.value.enemy.rewards.cards.length>0;e&&(Ee.value=ka.value.enemy.rewards.cards,Ce.value=!0),ka.value.status="completed",ka.value.completed=!0,ka.value.connections.forEach(e=>{const a=Ca.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Lt(),Ca.value.active&&!e?Dt():Ca.value.active}else{const e=Math.floor(.3*Qe.value.resources.soldiers);Qe.value.resources.soldiers=Math.max(0,Qe.value.resources.soldiers-e),ce(`íŒ¨ë°°... ë³‘ë ¥ ${e}ëª… ì†ì‹¤. ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤.`,"error"),ka.value.status="completed",ka.value.completed=!0,ka.value.connections.forEach(e=>{const a=Ca.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Lt(),Ca.value.active&&Dt()}},Lt=()=>{if(Qe.value.day++,Ca.value?.active)return void ce(`${Qe.value.day}ì¼ì°¨`,"info");const e=ue(Qe.value.day);if(e)return a=e,ge.value=a,void(be.value=!0);var a;if(Qe.value.day%7==0&&Qe.value.day>0&&Qe.value.day<42){const e=Qe.value.day/7;return ce(`âš”ï¸ ${e}ì£¼ì°¨! ì œêµ­êµ°ì´ ì „ë©´ ì¹¨ëžµí•´ì˜µë‹ˆë‹¤!`,"error"),Ja.value=!0,void Za("pve","empire")}if(Qe.value.day>=42)return ce("ðŸ”„ 42ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ê²Œìž„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œìž‘í•©ë‹ˆë‹¤...","info"),void setTimeout(()=>{localStorage.removeItem("reincarnationData"),localStorage.removeItem("gameData"),localStorage.removeItem("passiveCards"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("tutorialState"),localStorage.removeItem("synergyCards"),ce("ê²Œìž„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œìž‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{window.location.reload()},1e3)},2e3);ce(`${Qe.value.day}ì¼ì°¨ê°€ ì‹œìž‘ë˜ì—ˆìŠµë‹ˆë‹¤.`,"info")},Nt=()=>{ia.value=!1,ce("ì¹´ë“œ êµí™˜ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.","info")},Bt=(e,a)=>{const t=_e.value.findIndex(a=>a.id===e.id);-1!==t&&(_e.value.splice(t,1,a),ce(`${e.name}ì„(ë¥¼) ${a.name}(ìœ¼)ë¡œ êµí™˜í–ˆìŠµë‹ˆë‹¤!`,"success"),ia.value=!1)},Vt=e=>_e.value.some(a=>a.id===e.id)?(ce("ì´ë¯¸ ë³´ìœ í•œ ì¹´ë“œìž…ë‹ˆë‹¤!","error"),!1):_e.value.length>=v?(ce(`ìµœëŒ€ ${v}ìž¥ê¹Œì§€ë§Œ ë³´ìœ í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤!`,"error"),!1):(_e.value.push(e),!0),Gt=e=>{Vt(e)&&(ce(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success"),ia.value=!1)},qt=g(()=>(Ee.value||[]).filter(e=>"common"===e.rarity||"rare"===e.rarity).slice(0,9)),Ht=e=>{let a=0;e.forEach(e=>{Vt(e)&&a++}),ve(),ce(`${a}ê°œì˜ ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success")},Ut=()=>{ut(),0===Qe.value.day?(Qe.value.day=1,ce("âš”ï¸ ì „íˆ¬ ì¤€ë¹„ ì™„ë£Œ! 1ì¼ì°¨ê°€ ì‹œìž‘ë©ë‹ˆë‹¤!","success")):ce("âš”ï¸ ì „íˆ¬ ê°€ì´ë“œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},zt=e=>{e&&(ct(),dt())},Ft=D(null);return T(()=>{{Pe(),setTimeout(()=>{ua.value=!0},500);const e=u();Ft.value=new Audio(e.app.baseURL+"/bgm/baseBgm.mp3"),Ft.value.loop=!0,Ft.value.volume=.3,Ft.value.play().catch(e=>{const a=()=>{Ft.value&&Ft.value.play().catch(e=>{}),document.removeEventListener("click",a)};document.addEventListener("click",a,{once:!0})})}}),$(()=>{Ft.value&&(Ft.value.pause(),Ft.value.currentTime=0,Ft.value=null)}),(e,a)=>(y(),x("div",{class:"min-h-screen text-white flex flex-col overflow-hidden relative bg-cover bg-center bg-no-repeat bg-slate-900",style:O({backgroundImage:`url(${("useRuntimeConfig"in e?e.useRuntimeConfig:P(u))().app.baseURL}images/background/base_back_groud.png)`})},[a[18]||(a[18]=h("div",{class:"absolute inset-0 bg-black/40 z-0"},null,-1)),h("div",aa,[P(de)?.storyCompleted&&!P(de)?.hasSelectedStartCards?(y(),R(P(b),{key:0,cards:qt.value,onConfirm:Ht},null,8,["cards"])):w("",!0),E(P(ae),{show:ua.value,onComplete:fa,onSkip:P(pe)},null,8,["show","onSkip"]),P(Ca)?.active?w("",!0):(y(),R(fe,{key:1,resources:P(Qe).resources,timer:he.value,"current-day":P(Qe).day,"reincarnation-count":P(ga).count,"commandment-effects":we.value,onShowResourceHelp:pa},null,8,["resources","timer","current-day","reincarnation-count","commandment-effects"])),a[17]||(a[17]=h("div",{class:"flex-1"},null,-1)),P(Ca)?.active?w("",!0):(y(),R(ye,{key:2,"unlocked-features":P(de)?.unlockedFeatures||[],onShowCommandments:a[0]||(a[0]=e=>da.value=!0),onShowPassiveCards:a[1]||(a[1]=e=>la.value=!0),onShowCardDeck:a[2]||(a[2]=e=>je.value=!0),onShowCardGuide:a[3]||(a[3]=e=>oa.value=!0),onStartNormalBattle:Ha,onRecruitSoldiers:ea},null,8,["unlocked-features"])),E(P(L),{event:P(pt),"current-resources":P(Qe).resources,onClose:_t,onSelectChoice:Ct},null,8,["event","current-resources"]),E(P(N),{crossroad:P(ft),onClose:Et,onSelectChoice:kt},null,8,["crossroad"]),E(P(k),{battle:P(Qa),"is-scrolling":P(Xa),"battle-active-cards":P(Ae),"used-active-cards":P(lt),"attacker-score":P(ot),"defender-score":P(rt),"is-paused":P(nt),"card-selection-time":P(it),"current-day":P(Qe).day,onClose:vt,onUseActiveCard:P(st),onCompleteTutorial:Ut,onPauseTutorial:zt,onManualPause:P(dt),onManualResume:P(ut),onSkipToResult:mt},null,8,["battle","is-scrolling","battle-active-cards","used-active-cards","attacker-score","defender-score","is-paused","card-selection-time","current-day","onUseActiveCard","onManualPause","onManualResume"]),E(P(B),{show:P(Ce),cards:P(Ee),onSelectCard:Tt},null,8,["show","cards"]),E(P(V),{show:xe.value,"owned-active-cards":P(Ie),"battle-active-cards":P(Ae),"max-battle-cards":P(Oe),onClose:a[4]||(a[4]=e=>xe.value=!1),onAddToDeck:P(Le),onRemoveFromDeck:P(Ne)},null,8,["show","owned-active-cards","battle-active-cards","max-battle-cards","onAddToDeck","onRemoveFromDeck"]),E(P(G),{show:P(ba),"available-cards":Ge.value,"reincarnation-count":P(ga).count,"highest-day":Math.max(P(ga).highestDay,P(Qe).day),"total-days-played":P(ga).totalDaysPlayed+P(Qe).day,"inherited-cards-count":P(ga).inheritedCards?.length||0,onSelectCard:wa,onReincarnateWithoutCard:_a},null,8,["show","available-cards","reincarnation-count","highest-day","total-days-played","inherited-cards-count"]),E(P(q),{show:la.value,"passive-cards":P(_e),"inherited-card-ids":P(ga).inheritedCards.map(e=>e.id),onClose:a[5]||(a[5]=e=>la.value=!1)},null,8,["show","passive-cards","inherited-card-ids"]),E(P(H),{show:oa.value,"player-cards":P(_e),onClose:a[6]||(a[6]=e=>oa.value=!1)},null,8,["show","player-cards"]),E(P(te),{modelValue:je.value,"onUpdate:modelValue":a[7]||(a[7]=e=>je.value=e),"card-deck":P(ke),"available-domestic-cards":P(Se),"available-battle-cards":P(Te),"equipped-cards":P(De),onEquipCard:a[8]||(a[8]=(e,a,t)=>P($e)(e,a,t)),onUnequipCard:a[9]||(a[9]=(e,a)=>P(Re)(e,a))},null,8,["modelValue","card-deck","available-domestic-cards","available-battle-cards","equipped-cards"]),E(P(U),{show:da.value,commandments:P(oe)?.selectedCommandments||[],onClose:a[10]||(a[10]=e=>da.value=!1)},null,8,["show","commandments"]),E(P(z),{show:be.value,title:ge.value?.title||"",message:ge.value?.message||"",rewards:ge.value?.rewards,urgent:ge.value?.urgent,important:ge.value?.important,final:ge.value?.final,onClose:St,onConfirm:St},null,8,["show","title","message","rewards","urgent","important","final"]),E(P(F),{show:P(He),cards:P(Ue),onClose:a[11]||(a[11]=e=>He.value=!1),onSelectCard:P(Ke)},null,8,["show","cards","onSelectCard"]),E(P(J),{show:ra.value,cards:P(qe),synergies:P(ze),"total-effects":P(Fe).totalEffects,onClose:a[12]||(a[12]=e=>ra.value=!1)},null,8,["show","cards","synergies","total-effects"]),E(P(W),{show:na.value,onClose:a[13]||(a[13]=e=>na.value=!1)},null,8,["show"]),E(P(Q),{show:ma.value,"resource-type":va.value,onClose:a[14]||(a[14]=e=>ma.value=!1)},null,8,["show","resource-type"]),E(P(K),{show:ia.value,"current-cards":P(_e),"new-cards":ca.value,onClose:a[15]||(a[15]=e=>ia.value=!1),onSkip:Nt,onExchange:Bt,onAdd:Gt},null,8,["show","current-cards","new-cards"]),P(Ca)?.active?(y(),R(P(X),{key:3,nodes:P(Ca)?.nodes||[],"current-node-id":P(Ca)?.currentNodeId||null,"accumulated-rewards":P(Ca)?.accumulatedRewards||{},"visible-cells":P(Ca)?.visibleCells||new Set,"is-selecting-path":P(Ca)?.isSelectingPath||!1,"available-paths":P(Ca)?.availablePaths||[],onNodeClick:Rt,onRetreat:Aa},null,8,["nodes","current-node-id","accumulated-rewards","visible-cells","is-selecting-path","available-paths"])):w("",!0),E(P(Y),{show:Oa.value,"current-gold":P(Qe).resources.gold,"current-food":P(Qe).resources.food,onClose:Pt,onBuy:jt},null,8,["show","current-gold","current-food"]),E(P(Z),{show:Ma.value,onClose:a[16]||(a[16]=e=>Ma.value=!1),onSelect:It},null,8,["show"]),E(P(ee),{show:Ua.value,"enemy-name":za.value.enemyName,"enemy-power":za.value.enemyPower,"player-power":P(Qe).resources.soldiers,"available-cards":P(Ie),"is-boss-battle":Wa.value,onConfirm:Ot,onCancel:At},null,8,["show","enemy-name","enemy-power","player-power","available-cards","is-boss-battle"]),E(P(se),{show:La.value,"dice-results":P(Ca)?.diceResults||[],"current-index":P(Ca)?.currentDiceIndex||0,"is-rolling":Ba.value,onRoll:Va,onUseNext:qa,onConfirm:Ga},null,8,["show","dice-results","current-index","is-rolling"]),E(P(le),{show:Na.value,"dice-results":P(Ca)?.diceResults||[],"current-index":P(Ca)?.currentDiceIndex||0},null,8,["show","dice-results","current-index"]),E(A,{name:"notification"},{default:I(()=>[P(ie)?(y(),x("div",{key:0,class:C(["fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px]",{"bg-green-600 border-2 border-green-400":"success"===P(ie).type,"bg-red-600 border-2 border-red-400":"error"===P(ie).type,"bg-blue-600 border-2 border-blue-400":"info"===P(ie).type}])},[h("span",ta,_("success"===P(ie).type?"âœ“":"error"===P(ie).type?"âœ—":"â„¹"),1),h("span",sa,_(P(ie).message),1)],2)):w("",!0)]),_:1})])],4))}});export{la as default};
