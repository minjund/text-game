const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CORv2xfF.js","./CresfOYy.js","./DnAuC_J9.js","./aF-aE0v1.js","./CrS8unBr.js","./entry.CMGf5R0z.css","./DwhX5WMU.js","./GameBattleModal.DUbjaYrW.css","./Dw_NZvNA.js","./BiTWWuMX.js","./Bv_2tq-K.js","./By0l1tXg.js","./B9Vsk9xz.js","./GameActiveCardsModal.B6r-ilfv.css","./Cp2h6MTz.js","./GameReincarnationModal.DNWq0NAG.css","./Csb8YTTv.js","./GamePassiveCardsModal.irA25d0s.css","./DW2Uz6Gt.js","./GameCardCollection.bWGxB5-_.css","./bxIo8-Lu.js","./GameCommandmentsModal.BpQvi8cF.css","./C6djHEgi.js","./GameAdvisorModal.DXEfPlk2.css","./CxWd_POK.js","./GameSynergyCardSelection.ZhzXQiyu.css","./BIWvSIiL.js","./GameSynergyCollection.C7znwYRa.css","./knVPlOzb.js","./GameSynergyGuide.BHmzaapF.css","./FG53DlZS.js","./GameDailyCardExchange.CMiIgq1D.css","./BYdGThJW.js","./GameResourceHelp.N43b38by.css","./BTFLJ6AF.js","./GameAdventureMap.KMmYI9En.css","./BpoZAbiR.js","./GameAdventureShop.CBia5tev.css","./zaFnNiMI.js","./GameAdventureRest.xCSJfAfh.css","./BMkUeJsj.js","./GameBattleCardSelection.Dcuhs2Yz.css","./zPyfIa-e.js","./GameInteractiveTutorial.CpJ4AFAL.css","./BLps9cBi.js","./MezUD9L_.js","./GameDiceRoulette.7Rpv6TWj.css","./dQM_kQ1v.js"])))=>i.map(i=>d[i]);
import{_ as e,a}from"#entry";import{s as t,b as s,e as o,g as l,i as r,k as n,l as i,m as c,o as d,q as u,t as m,M as v,v as p,x as f,y as g}from"./CrS8unBr.js";import{b,c as h,d as y,f as x,k as w,l as _,j as C,N as k,p as E,n as S,x as R,J as D,y as $,w as T,A as I,o as P,q as j,O as A,u as M,T as B}from"./CresfOYy.js";import{u as O}from"./0vYvbZSD.js";import{u as L}from"./DwhX5WMU.js";const N=()=>{const e=b((()=>{{const e=localStorage.getItem("gameStartTime");if(e)return new Date(e);{const e=new Date;return localStorage.setItem("gameStartTime",e.toISOString()),e}}})()),a=h(()=>{const a=new Date(e.value);return a.setDate(a.getDate()+12),a}),s=b({days:0,hours:0,minutes:0,seconds:0,isExpired:!1}),o=()=>{const e=new Date,t=a.value.getTime()-e.getTime();s.value=t<=0?{days:0,hours:0,minutes:0,seconds:0,isExpired:!0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),isExpired:!1}};return o(),t(o,1e3),{gameStartTime:e,gameEndTime:a,remainingTime:s,updateRemainingTime:o,GAME_DURATION_DAYS:12}},V=["src","alt"],G={key:1,class:"resource-icon"},U={key:0,class:"resource-label"},q={class:"resource-value"},z=["title"],H=y({__name:"ResourceDisplay",props:{icon:{},label:{},value:{},variant:{default:"default"},showPlus:{type:Boolean,default:!1},helpEnabled:{type:Boolean,default:!0}},emits:["show-help"],setup(e){const a=e,t=h(()=>{const e=Math.floor(a.value);return a.showPlus&&e>0?`+${e}`:e.toLocaleString()}),o=h(()=>({"ì‹ëŸ‰":"food.png","ê¸ˆ":"gold.png","ë¯¼ì‹¬":"public_opinion.png","ë³‘ì‚¬":"soldier.png"}[a.label]||null));return(a,l)=>(w(),x("div",{class:S(["resource-display",e.variant,"group relative",o.value?"flex-col items-center":""])},[o.value?(w(),x("img",{key:0,src:`${("useRuntimeConfig"in a?a.useRuntimeConfig:k(s))().app.baseURL}images/mark/${o.value}`,alt:e.label,class:"resource-icon-img"},null,8,V)):(w(),x("span",G,E(e.icon),1)),_("div",{class:S(["resource-info",o.value?"items-center":""])},[o.value?C("",!0):(w(),x("span",U,E(e.label),1)),_("span",q,E(t.value),1)],2),e.helpEnabled?(w(),x("button",{key:2,onClick:l[0]||(l[0]=e=>a.$emit("show-help")),class:S(["help-button",`help-${e.label.toLowerCase()}`]),title:`${e.label} ë„ì›€ë§`}," ? ",10,z)):C("",!0)],2))}}),J=Object.assign(e(H,[["__scopeId","data-v-4e1a8807"]]),{__name:"GameResourceDisplay"}),F={class:"fixed top-0 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-1.5 pointer-events-none w-full max-w-md"},W={class:"flex flex-col gap-1.5 relative z-10"},K={class:"grid grid-cols-4 gap-1 pointer-events-auto"},Y={class:"flex justify-between gap-1.5"},Q={class:"flex-1 pointer-events-auto"},X={class:"resource-display compact border-blue-500"},Z={class:"resource-info"},ee={class:"resource-value"},ae={class:"flex-1 pointer-events-auto"},te={class:"resource-display compact border-amber-500"},se={class:"resource-info"},oe={class:"resource-value text-amber-300"},le={key:0,class:"pointer-events-auto"},re={class:"resource-value text-xs w-full animate-pulse"},ne={key:1,class:"pointer-events-auto"},ie={class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 border-2 border-indigo-400 rounded-lg p-2 sm:p-2.5 backdrop-blur-sm shadow-lg"},ce={class:"flex flex-wrap gap-1.5 sm:gap-2"},de=y({__name:"GameMobileResources",props:{resources:{},timer:{},currentDay:{},reincarnationCount:{default:0},commandmentEffects:{default:null}},emits:["show-resource-help"],setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),o=h(()=>""),l=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,r)=>(w(),x("div",F,[_("div",{class:"backdrop-blur-md border-b border-gray-700 px-2 py-2 bg-cover bg-center bg-no-repeat relative min-h-[120px]",style:D({backgroundImage:`url(${("useRuntimeConfig"in a?a.useRuntimeConfig:k(s))().app.baseURL}images/background/header_back_ground.png)`})},[r[9]||(r[9]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",W,[_("div",K,[R(J,{icon:"ğŸ–",label:"ì‹ëŸ‰",value:e.resources.food,variant:"compact",onShowHelp:r[0]||(r[0]=e=>a.$emit("show-resource-help","food"))},null,8,["value"]),R(J,{icon:"ğŸ’°",label:"ê¸ˆ",value:e.resources.gold,variant:"compact",onShowHelp:r[1]||(r[1]=e=>a.$emit("show-resource-help","gold"))},null,8,["value"]),R(J,{icon:"âš”ï¸",label:"ë³‘ì‚¬",value:e.resources.soldiers,variant:"compact",onShowHelp:r[2]||(r[2]=e=>a.$emit("show-resource-help","soldiers"))},null,8,["value"]),R(J,{icon:"â¤ï¸",label:"ë¯¼ì‹¬",value:e.resources.morale,variant:"compact",onShowHelp:r[3]||(r[3]=e=>a.$emit("show-resource-help","morale"))},null,8,["value"])]),_("div",Y,[_("div",Q,[_("div",X,[r[5]||(r[5]=_("span",{class:"resource-icon"},"ğŸ“…",-1)),_("div",Z,[r[4]||(r[4]=_("span",{class:"resource-label"},"ê²Œì„ ì¼ì°¨",-1)),_("span",ee,E(e.currentDay)+"ì¼",1)])])]),_("div",ae,[_("div",te,[r[7]||(r[7]=_("span",{class:"resource-icon"},"â™»ï¸",-1)),_("div",se,[r[6]||(r[6]=_("span",{class:"resource-label"},"í™˜ìƒ",-1)),_("span",oe,E(e.reincarnationCount)+"íšŒ",1)])])])]),o.value?(w(),x("div",le,[_("div",{class:S(["resource-display compact text-center",t.value<=1?"border-red-500 bg-red-900/30":"border-yellow-500 bg-yellow-900/20"])},[_("span",re,E(o.value),1)],2)])):C("",!0),e.commandmentEffects&&l.value?(w(),x("div",ne,[_("div",ie,[r[8]||(r[8]=_("div",{class:"flex items-center gap-2 mb-1.5"},[_("span",{class:"text-xl sm:text-2xl"},"âš–ï¸"),_("span",{class:"text-xs sm:text-sm font-bold text-indigo-200"},"ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©)")],-1)),_("div",ce,[0!==e.commandmentEffects.morale?(w(),x("span",{key:0,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+E(e.commandmentEffects.morale>0?"+":"")+E(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("span",{key:1,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+E(e.commandmentEffects.gold>0?"+":"")+E(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("span",{key:2,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+E(e.commandmentEffects.military>0?"+":"")+E(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("span",{key:3,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+E(e.commandmentEffects.food>0?"+":"")+E(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("span",{key:4,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+E(e.commandmentEffects.population>0?"+":"")+E(e.commandmentEffects.population),3)):C("",!0)])])])):C("",!0)])],4)]))}}),ue=Object.assign(e(de,[["__scopeId","data-v-40745451"]]),{__name:"GameMobileResources"}),me={class:"grid grid-cols-3 gap-1.5 relative z-10"},ve=["src"],pe=["src"],fe=["src"],ge=["src"],be=["src"],he=["src"],ye=y({__name:"GameMobileActions",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",{class:"fixed bottom-0 left-1/2 -translate-x-1/2 border-t border-gray-700 p-2 z-50 w-full max-w-md bg-cover bg-center bg-no-repeat relative",style:D({backgroundImage:`url(${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/background/under_back_ground.png)`})},[a[6]||(a[6]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",me,[_("button",{onClick:a[0]||(a[0]=a=>e.$emit("show-commandments")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/commandment.png`,alt:"ê³„ëª…",class:"w-full h-full object-contain"},null,8,ve)]),_("button",{onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/card.png`,alt:"ì¹´ë“œ",class:"w-full h-full object-contain"},null,8,pe)]),_("button",{onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/deck.png`,alt:"ë±",class:"w-full h-full object-contain"},null,8,fe)]),_("button",{onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/encyclopedia.png`,alt:"ë„ê°",class:"w-full h-full object-contain"},null,8,ge)]),_("button",{onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/adventure.png`,alt:"ëª¨í—˜",class:"w-full h-full object-contain"},null,8,be)]),_("button",{onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/recruitment.png`,alt:"ëª¨ì§‘",class:"w-full h-full object-contain"},null,8,he)])])],4))}),xe=Object.assign(ye,{__name:"GameMobileActions"}),we={class:"hidden md:flex bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700 px-8 py-4"},_e={class:"max-w-7xl mx-auto w-full flex items-center justify-between"},Ce={class:"flex items-center gap-4"},ke={class:"text-2xl font-bold text-amber-100"},Ee={class:"text-sm text-slate-400"},Se={class:"flex items-center gap-6"},Re={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},De={class:"text-lg font-bold"},$e={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Te={class:"text-lg font-bold"},Ie={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Pe={class:"text-lg font-bold"},je={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Ae={class:"text-lg font-bold"},Me=y({__name:"GameDesktopHeader",props:{kingdomName:{},day:{},resources:{}},emits:["show-resource-help"],setup:e=>(a,t)=>(w(),x("header",we,[_("div",_e,[_("div",Ce,[t[4]||(t[4]=_("div",{class:"text-4xl"},"ğŸ‘‘",-1)),_("div",null,[_("h1",ke,E(e.kingdomName),1),_("p",Ee,"ì œ "+E(e.day)+"ì¼ í†µì¹˜",1)])]),_("div",Se,[_("div",Re,[t[6]||(t[6]=_("span",{class:"text-2xl"},"ğŸ–",-1)),_("div",null,[t[5]||(t[5]=_("p",{class:"text-xs text-slate-400"},"ì‹ëŸ‰",-1)),_("p",De,E(e.resources.food),1)]),_("button",{onClick:t[0]||(t[0]=e=>a.$emit("show-resource-help","food")),class:"absolute -top-1 -right-1 w-5 h-5 bg-green-600 hover:bg-green-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ì‹ëŸ‰ ë„ì›€ë§"}," ? ")]),_("div",$e,[t[8]||(t[8]=_("span",{class:"text-2xl"},"ğŸ’°",-1)),_("div",null,[t[7]||(t[7]=_("p",{class:"text-xs text-slate-400"},"ê¸ˆí™”",-1)),_("p",Te,E(e.resources.gold),1)]),_("button",{onClick:t[1]||(t[1]=e=>a.$emit("show-resource-help","gold")),class:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-600 hover:bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ê¸ˆ ë„ì›€ë§"}," ? ")]),_("div",Ie,[t[10]||(t[10]=_("span",{class:"text-2xl"},"âš”ï¸",-1)),_("div",null,[t[9]||(t[9]=_("p",{class:"text-xs text-slate-400"},"ë³‘ì‚¬",-1)),_("p",Pe,E(e.resources.soldiers),1)]),_("button",{onClick:t[2]||(t[2]=e=>a.$emit("show-resource-help","soldiers")),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 hover:bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë³‘ì‚¬ ë„ì›€ë§"}," ? ")]),_("div",je,[t[12]||(t[12]=_("span",{class:"text-2xl"},"â¤ï¸",-1)),_("div",null,[t[11]||(t[11]=_("p",{class:"text-xs text-slate-400"},"ì‚¬ê¸°",-1)),_("p",Ae,E(e.resources.morale),1)]),_("button",{onClick:t[3]||(t[3]=e=>a.$emit("show-resource-help","morale")),class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-600 hover:bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë¯¼ì‹¬ ë„ì›€ë§"}," ? ")])])])]))});Object.assign(Me,{__name:"GameDesktopHeader"});const Be={class:"w-80 space-y-4"},Oe={class:"text-lg font-bold animate-pulse"},Le={key:1,class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 backdrop-blur-xl border-2 border-indigo-400 rounded-xl p-4 shadow-lg"},Ne={class:"flex flex-wrap gap-2"},Ve=y({__name:"GameLeftSidebar",props:{timer:{},currentDay:{},commandmentEffects:{}},setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=h(()=>""),o=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,l)=>(w(),x("div",Be,[s.value?(w(),x("div",{key:0,class:S(["bg-gradient-to-br border-2 rounded-xl p-4 text-center",t.value<=1?"from-red-900/50 to-rose-900/50 border-red-500":"from-yellow-900/50 to-amber-900/50 border-yellow-500"])},[_("div",Oe,E(s.value),1)],2)):C("",!0),e.commandmentEffects&&o.value?(w(),x("div",Le,[l[0]||(l[0]=_("h3",{class:"text-base font-bold text-indigo-200 mb-3 flex items-center gap-2"},[_("span",{class:"text-2xl"},"âš–ï¸"),$(" ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©) ")],-1)),_("div",Ne,[0!==e.commandmentEffects.morale?(w(),x("div",{key:0,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+E(e.commandmentEffects.morale>0?"+":"")+E(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("div",{key:1,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+E(e.commandmentEffects.gold>0?"+":"")+E(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("div",{key:2,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+E(e.commandmentEffects.military>0?"+":"")+E(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("div",{key:3,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+E(e.commandmentEffects.food>0?"+":"")+E(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("div",{key:4,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+E(e.commandmentEffects.population>0?"+":"")+E(e.commandmentEffects.population),3)):C("",!0)])])):C("",!0)]))}});Object.assign(Ve,{__name:"GameLeftSidebar"});const Ge=["disabled"],Ue={class:"action-icon"},qe={class:"action-content"},ze={class:"action-title"},He={key:0,class:"action-description"},Je=y({__name:"ActionButton",props:{icon:{},title:{},description:{},variant:{default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,s=a,o=e=>{t.disabled||s("click",e)};return(a,t)=>(w(),x("button",{class:S(["action-button",e.variant,{"action-button-disabled":e.disabled}]),disabled:e.disabled,onClick:o},[_("div",Ue,E(e.icon),1),_("div",qe,[_("div",ze,E(e.title),1),e.description?(w(),x("div",He,E(e.description),1)):C("",!0)])],10,Ge))}}),Fe=Object.assign(e(Je,[["__scopeId","data-v-1657d8d0"]]),{__name:"GameActionButton"}),We={class:"w-80 space-y-3"},Ke=y({__name:"GameActionPanel",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",We,[R(Fe,{icon:"âœ¨",title:"ì‹ ì˜ ê³„ëª…",description:"ì‹ ì´ ë‚´ë¦° ê³„ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤",variant:"warning",onClick:a[0]||(a[0]=a=>e.$emit("show-commandments"))}),R(Fe,{icon:"ğŸ´",title:"ë³´ìœ  ì¹´ë“œ",description:"ë³´ìœ í•œ íŒ¨ì‹œë¸Œ ì¹´ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards"))}),R(Fe,{icon:"ğŸƒ",title:"ì¹´ë“œ ë± ì„¤ì •",description:"ë‚´ì • 3ì¥ + ì „íˆ¬ 3ì¥ì„ ì¥ì°©í•©ë‹ˆë‹¤",variant:"info",onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck"))}),R(Fe,{icon:"ğŸ“š",title:"ì¹´ë“œ ë„ê°",description:"ëª¨ë“  ì¹´ë“œì™€ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide"))}),R(Fe,{icon:"âš”ï¸",title:"ëª¨í—˜",description:"ì  ì„¸ë ¥ê³¼ ì „íˆ¬ë¥¼ ë²Œì…ë‹ˆë‹¤",variant:"success",onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle"))}),R(Fe,{icon:"ğŸ›¡ï¸",title:"ë³‘ë ¥ ëª¨ì§‘",description:"ê¸ˆ 200ìœ¼ë¡œ ë³‘ë ¥ 100 ëª¨ì§‘",variant:"success",onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers"))})]))});Object.assign(Ke,{__name:"GameActionPanel"});function Ye(e){return e.filter(e=>null!==e).map(e=>function(e){const{effect:a}=e;let t,s="instant_damage",o=0,l="";return"combat"===a.type?a.attackBonus&&a.attackBonus>0?(s="power_boost",o=a.attackBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ê³µê²©ë ¥ +${a.attackBonus}%`):a.defenseBonus&&a.defenseBonus>0?(s="defense_boost",o=a.defenseBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ë°©ì–´ë ¥ +${a.defenseBonus}%`):a.skillPowerBonus&&a.skillPowerBonus>0&&(s="power_boost",o=a.skillPowerBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ìŠ¤í‚¬ ìœ„ë ¥ +${a.skillPowerBonus}%`):"resource"===a.type?a.morale&&a.morale>0?(s="morale_boost",o=Math.min(3*a.morale,30),t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +${o}%`):a.military&&a.military>0?(s="instant_damage",o=Math.min(2*a.military,50),l=`ì ì—ê²Œ ${o}ì˜ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤`):(s="heal",o=15,l="ì•„êµ° ë³‘ë ¥ì´ 15% íšŒë³µë©ë‹ˆë‹¤"):"special"===a.type&&(s="morale_boost",o=20,t=2,l=a.description||"2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +20%"),{id:`converted_${e.id}`,name:e.name,description:e.description,icon:e.icon,image:e.image,rarity:e.rarity,effectType:s,power:o,duration:t,battleDescription:l}}(e))}const Qe={class:"min-h-screen text-white flex flex-col overflow-hidden relative bg-slate-900"},Xe=["src"],Ze={class:"relative z-10 flex flex-col min-h-screen max-w-md mx-auto w-full bg-black/20"},ea={class:"text-2xl"},aa={class:"font-semibold"},ta=y({__name:"game",setup(e){const t=A(()=>a(()=>import("./CORv2xfF.js"),__vite__mapDeps([0,1]),import.meta.url)),y=A(()=>a(()=>import("./DnAuC_J9.js"),__vite__mapDeps([2,1,3,4,5,6,7]),import.meta.url)),D=A(()=>a(()=>import("./Dw_NZvNA.js"),__vite__mapDeps([8,1,9,4]),import.meta.url)),$=A(()=>a(()=>import("./Bv_2tq-K.js"),__vite__mapDeps([10,1]),import.meta.url)),V=A(()=>a(()=>import("./By0l1tXg.js"),__vite__mapDeps([11,1]),import.meta.url)),G=A(()=>a(()=>import("./B9Vsk9xz.js"),__vite__mapDeps([12,1,3,4,5,13]),import.meta.url)),U=A(()=>a(()=>import("./Cp2h6MTz.js"),__vite__mapDeps([14,1,3,4,5,15]),import.meta.url)),q=A(()=>a(()=>import("./Csb8YTTv.js"),__vite__mapDeps([16,1,3,4,5,17]),import.meta.url)),z=A(()=>a(()=>import("./DW2Uz6Gt.js"),__vite__mapDeps([18,1,4,3,5,19]),import.meta.url)),H=A(()=>a(()=>import("./bxIo8-Lu.js"),__vite__mapDeps([20,1,3,4,5,21]),import.meta.url)),J=A(()=>a(()=>import("./C6djHEgi.js"),__vite__mapDeps([22,1,3,4,5,23]),import.meta.url)),F=A(()=>a(()=>import("./CxWd_POK.js"),__vite__mapDeps([24,1,3,4,5,25]),import.meta.url)),W=A(()=>a(()=>import("./BIWvSIiL.js"),__vite__mapDeps([26,1,3,4,5,27]),import.meta.url)),K=A(()=>a(()=>import("./knVPlOzb.js"),__vite__mapDeps([28,1,4,3,5,29]),import.meta.url)),Y=A(()=>a(()=>import("./FG53DlZS.js"),__vite__mapDeps([30,1,3,4,5,31]),import.meta.url)),Q=A(()=>a(()=>import("./BYdGThJW.js"),__vite__mapDeps([32,1,3,4,5,33]),import.meta.url)),X=A(()=>a(()=>import("./BTFLJ6AF.js"),__vite__mapDeps([34,1,4,3,5,35]),import.meta.url)),Z=A(()=>a(()=>import("./BpoZAbiR.js"),__vite__mapDeps([36,1,3,4,5,37]),import.meta.url)),ee=A(()=>a(()=>import("./zaFnNiMI.js"),__vite__mapDeps([38,1,3,4,5,39]),import.meta.url)),ae=A(()=>a(()=>import("./BMkUeJsj.js"),__vite__mapDeps([40,1,3,4,5,41]),import.meta.url)),te=A(()=>a(()=>import("./zPyfIa-e.js"),__vite__mapDeps([42,1,3,4,5,43]),import.meta.url)),se=A(()=>a(()=>import("./BLps9cBi.js"),__vite__mapDeps([44,1]),import.meta.url)),oe=A(()=>a(()=>import("./MezUD9L_.js"),__vite__mapDeps([45,1,3,4,5,46]),import.meta.url)),le=A(()=>a(()=>import("./dQM_kQ1v.js"),__vite__mapDeps([47,1]),import.meta.url)),{nationState:re,startCards:ne}=O(),{playBGM:ie,stopBGM:ce}=L(),de=b([]),{notification:me,showNotification:ve}=(()=>{const e=b(null);return{notification:e,showNotification:(a,t="info")=>{e.value={message:a,type:t},setTimeout(()=>{e.value=null},3e3)}}})(),{tutorialState:pe,advanceDay:fe,onRecruitSoldiers:ge,completeStartCardSelection:be,skipTutorial:he}=o(),ye=b(!1),we=b(null),_e=b(!1),{remainingTime:Ce}=N(),ke=h(()=>{if(!re.value?.selectedCommandments||0===re.value.selectedCommandments.length)return null;const e={morale:0,gold:0,military:0,food:0,population:0};return re.value.selectedCommandments.forEach(a=>{e.morale+=a.effects.morale,e.gold+=a.effects.gold,e.military+=a.effects.military,e.food+=a.effects.food,e.population+=a.effects.population}),e}),{playerPassiveCards:Ee,showPassiveCardSelection:Se,availablePassiveCards:Re}=l(),{cardDeck:De,equippedCards:$e,availableDomesticCards:Te,availableBattleCards:Ie,equipCard:Pe,unequipCard:je,loadDeck:Ae}=(e=>{const a=b({domestic:[null,null,null],battle:[null,null,null]}),t="cardDeck",s=e=>"daily"===e.trigger||"recruit"===e.trigger,o=e=>!0===e.isBattleCard||"battle_start"===e.trigger||"battle_win"===e.trigger||"battle_lose"===e.trigger,l=h(()=>[...a.value.domestic.filter(e=>null!==e),...a.value.battle.filter(e=>null!==e)]),r=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>s(e)&&!a.includes(e.id))}),n=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>o(e)&&!a.includes(e.id))}),i=()=>{{const e={domestic:a.value.domestic.map(e=>e?.id||null),battle:a.value.battle.map(e=>e?.id||null)};localStorage.setItem(t,JSON.stringify(e))}};return{cardDeck:a,equippedCards:l,availableDomesticCards:r,availableBattleCards:n,isDomesticCard:s,isBattleCard:o,equipCard:(e,t,r)=>!(r<0||r>2||"domestic"===t&&!s(e)||"battle"===t&&!o(e)||l.value.some(a=>a.id===e.id)||(a.value[t][r]=e,i(),0)),unequipCard:(e,t)=>!(t<0||t>2||(a.value[e][t]=null,i(),0)),saveDeck:i,loadDeck:()=>{{const o=localStorage.getItem(t);if(o)try{const t=JSON.parse(o);a.value.domestic=t.domestic.map(a=>a&&e.value.find(e=>e.id===a)||null),a.value.battle=t.battle.map(a=>a&&e.value.find(e=>e.id===a)||null)}catch(s){}}},resetDeck:()=>{a.value={domestic:[null,null,null],battle:[null,null,null]},i()},getActiveCardsForTrigger:e=>l.value.filter(a=>a.trigger===e)}})(Ee),Me=b(!1),{ownedActiveCards:Be,battleActiveCards:Oe,maxBattleCards:Le,loadActiveCards:Ne,addToBattleDeck:Ve,removeFromBattleDeck:Ge,clearBattleDeck:Ue,grantStarterCards:qe}=r({showNotification:ve});Ne();localStorage.getItem("hasGrantedStarterActiveCards")||0!==Be.value.length||(qe(),localStorage.setItem("hasGrantedStarterActiveCards","true"));T(Be,e=>{{const a=e.map(e=>e.id);localStorage.setItem("activeCards",JSON.stringify(a))}},{deep:!0});const ze=b([]),{playerCards:He,showCardSelection:Je,availableCards:Fe,activeSynergies:We,totalEffects:Ke,dailyEffects:ta,battleEffects:sa,selectCard:oa}=n(),{kingdom:la,empire:ra,recruitSoldiers:na,calculateProduction:ia}=i(re,de,ve),ca=()=>{na(),ge()},da=b(!1),ua=b(!1),ma=b(!1),va=b(!1),pa=b(!1),fa=b([]),ga=b(!1),ba=b(!1),ha=b(!1),ya=b(null),xa=e=>{ya.value=e,ha.value=!0},wa=()=>{ba.value=!1,pe.value.tutorialCompleted=!0,pe.value.isActive=!1,localStorage.setItem("tutorialState",JSON.stringify(pe.value)),ve("íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!","success")},{showReincarnationModal:_a,reincarnationData:Ca,loadReincarnationData:ka,selectInheritedCard:Ea,reincarnateWithoutCard:Sa}=c(la,Ee,re,ve);ka();const Ra=e=>{if(tt.value){Ca.value.inheritedCards.some(a=>a.id===e.id)||(Ca.value.inheritedCards.length>=v&&Ca.value.inheritedCards.shift(),Ca.value.inheritedCards.push(e)),localStorage.setItem("reincarnationData",JSON.stringify(Ca.value)),ve(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤! (ëˆ„ì  ìƒì† ì¹´ë“œ: ${Ca.value.inheritedCards.length}ê°œ)`,"success"),_a.value=!1,tt.value=!1}else Ea(e)},Da=()=>{tt.value?(ve("ì¹´ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.","info"),_a.value=!1,tt.value=!1):Sa()},{adventureState:$a,moveCompletedNodeId:Ta,currentNode:Ia,startAdventure:Pa,moveToNode:ja,completeNode:Aa,completeAdventure:Ma,retreatAdventure:Ba,rollDice:Oa,useNextDice:La,startAutoMove:Na,selectPath:Va}=d(la.value.resources,ve),Ga=()=>{ie("base",{loop:!0,volume:.3}),za.value=!1,Ha.value=!1,Ba()},Ua=b(!1),qa=b(!1),za=b(!1),Ha=b(!1),Ja=b(!1),Fa=async()=>{Ja.value=!0,await new Promise(e=>setTimeout(e,1e3)),Oa(),Ja.value=!1,ve("ë£°ë › 5ê°œ ìˆ«ì ìƒì„±! í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.","success")},Wa=()=>{za.value=!1,Ha.value=!0,setTimeout(()=>{const e=La();ve(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Na(e)},300)},Ka=()=>{const e=La();ve(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Na(e)},Ya=()=>{ie("adventure",{loop:!0,volume:.3}),$a.value.nodes.length>0?($a.value.active=!0,$a.value.result=void 0,$a.value.diceResults.length>0&&$a.value.currentDiceIndex<$a.value.diceResults.length?(Ha.value=!0,za.value=!1,setTimeout(()=>{jt()},1e3)):(za.value=!0,Ha.value=!1)):(Pa(),za.value=!0,Ha.value=!1)},Qa=b(!1),Xa=b({enemyName:"",enemyPower:0,battleType:"normal"}),Za=b([]),et=b(!1),at=b(!1),tt=b(!1),{currentBattle:st,isScrolling:ot,loadBattleRecords:lt,selectBattleType:rt,startStoryBattle:nt,closeBattle:it,currentBattleMode:ct,useActiveCard:dt,usedActiveCards:ut,attackerScore:mt,defenderScore:vt,isPaused:pt,cardSelectionTime:ft,stopCardSelectionTimer:gt,manualPauseBattle:bt,manualResumeBattle:ht}=u({kingdom:la,enemyKingdoms:g,permanentEffects:de,empire:ra,showNotification:ve,synergyBattleEffects:sa,isWeeklyInvasion:et,showReincarnationModal:_a,selectedBattleCards:Za,battleActiveCards:Oe}),yt=()=>{if(!st.value)return;pt.value||bt();const e=mt.value>vt.value;st.value.result=e?"victory":"defeat";const a={turn:999,generalName:"ì‹¬íŒê´€",action:"ì „íˆ¬ ì¢…ë£Œ",success:!0,message:"",story:e?`ğŸ‰ ${st.value.attacker.kingdomName}ì˜ ìŠ¹ë¦¬! (${mt.value} vs ${vt.value})`:`ğŸ˜” ${st.value.defender.kingdomName}ì˜ ìŠ¹ë¦¬... (${mt.value} vs ${vt.value})`,narrativeType:"narration"};st.value.log.push(a),setTimeout(()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)},100)},xt=()=>{const e=st.value?.result,a=ct.value;it(),ie($a?.value?.active?"adventure":"base",{loop:!0,volume:.3}),$a?.value?.active?qt(e):"defeat"===e&&"empire"===a&&setTimeout(()=>{et&&(et.value=!1),_a.value=!0},500)};lt(),ne.value&&ne.value.length>0&&ne.value.forEach(e=>{Ee.value.some(a=>a.id===e.id)||Ee.value.push(e)});const{currentEvent:wt,currentCrossroad:_t,drawEventCard:Ct,selectPassiveCard:kt,selectChoice:Et,closeEvent:St,selectCrossroadChoice:Rt,closeCrossroad:Dt}=m({kingdom:la,playerPassiveCards:Ee,showPassiveCardSelection:Se,availablePassiveCards:Re,permanentEffects:de,reincarnationData:Ca,showReincarnationModal:_a,showNotification:ve,calculateProduction:ia,synergyDailyEffects:ta,godGameState:re}),$t=()=>{St()},Tt=e=>{Et(e),$a.value?.active&&jt()},It=()=>{Dt()},Pt=e=>{Rt(e),$a.value?.active&&jt()};T(_a,e=>{e&&(ze.value=Ee.value)}),T(()=>Ta.value,e=>{e&&setTimeout(()=>{const a=$a.value.nodes.find(a=>a.id===e);a&&!a.completed?Bt(a):a&&a.completed&&jt(),Ta.value=null},100)}),T(()=>Ce.value.isExpired,e=>{e&&(ve("âš ï¸ í˜„ì‹¤ì‹œê°„ 12ì¼ì´ ê²½ê³¼í–ˆìŠµë‹ˆë‹¤! ì„¸ê³„ê°€ ë©¸ë§í•˜ì—¬ ê²Œì„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤...","error"),setTimeout(()=>{localStorage.removeItem("gameData"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("invasionTracker"),localStorage.removeItem("playerName"),localStorage.removeItem("kingdomName"),localStorage.removeItem("tutorialProgress"),window.location.href="/story"},2e3))});const jt=()=>{if($a.value.active)if($a.value.currentDiceIndex<$a.value.diceResults.length){(()=>{let e=0,a=0,t=0,s=0;if(re.value){const o=re.value.commandmentEffects;o&&(o.gold&&(la.value.resources.gold+=o.gold,e+=o.gold),o.food&&(la.value.resources.food+=o.food,a+=o.food),o.morale&&(la.value.resources.morale=Math.min(100,Math.max(0,la.value.resources.morale+o.morale)),t+=o.morale),o.military&&(la.value.resources.soldiers+=o.military,s+=o.military))}if(De.value.domestic.filter(e=>null!==e).forEach(o=>{o.effect&&(o.effect.gold&&(la.value.resources.gold+=o.effect.gold,e+=o.effect.gold),o.effect.food&&(la.value.resources.food+=o.effect.food,a+=o.effect.food),o.effect.morale&&(la.value.resources.morale=Math.min(100,Math.max(0,la.value.resources.morale+o.effect.morale)),t+=o.effect.morale),o.effect.military&&(la.value.resources.soldiers+=o.effect.military,s+=o.effect.military))}),0!==e||0!==a||0!==t||0!==s){let o="ì´ë™ íš¨ê³¼: ";const l=[];0!==e&&l.push(`ê¸ˆ ${e>0?"+":""}${e}`),0!==a&&l.push(`ì‹ëŸ‰ ${a>0?"+":""}${a}`),0!==t&&l.push(`ë¯¼ì‹¬ ${t>0?"+":""}${t}`),0!==s&&l.push(`ë³‘ë ¥ ${s>0?"+":""}${s}`),o+=l.join(", "),ve(o,"success")}})();const e=La();ve(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),setTimeout(()=>{Na(e)},500)}else Ha.value=!1,$a.value.diceResults=[],$a.value.currentDiceIndex=0,setTimeout(()=>{za.value=!0,ve("ëª¨ë“  ìˆ«ìë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ë£°ë ›ì„ ëŒë ¤ì£¼ì„¸ìš”.","info")},800)},At=()=>{if(ye.value=!1,we.value?.rewards){const e=we.value.rewards;e.gold&&(la.value.resources.gold+=e.gold),e.food&&(la.value.resources.food+=e.food),e.soldiers&&(la.value.resources.soldiers+=e.soldiers)}we.value=null},Mt=e=>{kt(e),$a.value?.active&&setTimeout(()=>{jt()},500)},Bt=e=>{switch(ja(e.id),e.type){case"start":const a=$a.value.nodes.find(a=>a.id===e.id);a&&(a.status="completed",a.completed=!0),zt(),$a.value.active&&jt();break;case"battle":case"elite":case"boss":e.enemy&&("boss"===e.type&&(at.value=!0),Xa.value={enemyName:e.enemy.name,enemyPower:e.enemy.power,battleType:"boss"===e.type?"empire":"normal"},Qa.value=!0);break;case"event":const t=$a.value.nodes.find(a=>a.id===e.id);t&&(t.status="completed",t.completed=!0),$a.value.active?Ct():zt();break;case"shop":Ua.value=!0;break;case"rest":qa.value=!0;break;case"treasure":const s={gold:Math.floor(300*Math.random())+200,food:Math.floor(200*Math.random())+100,cards:p(1)};Aa(s),ve(`ğŸ’ ë³´ë¬¼ ë°œê²¬! ê¸ˆ +${s.gold}, ì‹ëŸ‰ +${s.food}`,"success");const o=$a.value.nodes.find(a=>a.id===e.id);o&&(o.status="completed",o.completed=!0),zt(),$a.value.active&&jt()}},Ot=e=>{if($a.value.isSelectingPath){if($a.value.availablePaths.some(a=>a.id===e.id)){Va(e.id);const a={battle:"âš”ï¸",elite:"ğŸ”¥",boss:"ğŸ‘‘",event:"â“",shop:"ğŸª",rest:"ğŸ•ï¸",treasure:"ğŸ’",start:"ğŸšª"}[e.type]||"â¡ï¸";ve(`${a} ë°©í–¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!`,"info")}else ve("ì„ íƒ ê°€ëŠ¥í•œ ê²½ë¡œê°€ ì•„ë‹™ë‹ˆë‹¤.","error");return}if(e.completed){const a=$a.value.nodes.find(e=>e.id===$a.value.currentNodeId);return void(a&&a.connections.includes(e.id)?(ja(e.id),ve("ì´ë¯¸ ì™„ë£Œí•œ ì¹¸ìœ¼ë¡œ ë˜ëŒì•„ì™”ìŠµë‹ˆë‹¤.","info")):ve("í˜„ì¬ ìœ„ì¹˜ì™€ ì¸ì ‘í•œ ì¹¸ë§Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","error"))}"available"!==e.status?ve("ì•„ì§ ê°ˆ ìˆ˜ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤.","error"):ve("ë£°ë ›ì„ ëŒë ¤ì„œ ì´ë™í•´ì£¼ì„¸ìš”!","info")},Lt=()=>{Ua.value=!1,Ia.value&&(Ia.value.status="completed",Ia.value.completed=!0,Ia.value.connections.forEach(e=>{const a=$a.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),zt(),$a.value.active&&jt())},Nt=e=>{let a=!1;switch(e){case"soldiers":la.value.resources.gold>=400&&(la.value.resources.gold-=400,la.value.resources.soldiers+=200,ve("ë³‘ì‚¬ 200ëª… ëª¨ì§‘!","success"),a=!0);break;case"food":la.value.resources.gold>=200&&(la.value.resources.gold-=200,la.value.resources.food+=500,ve("ì‹ëŸ‰ 500 êµ¬ë§¤!","success"),a=!0);break;case"card":la.value.resources.gold>=300&&(la.value.resources.gold-=300,Re.value=p(3),Se.value=!0,ve("ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!","info"),a=!0);break;case"heal":if(la.value.resources.food>=200){la.value.resources.food-=200;const e=Math.floor(.1*$a.value.startingResources.soldiers);la.value.resources.soldiers+=e,ve(`ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success"),a=!0}}a&&"card"!==e&&Lt()},Vt=e=>{switch(e){case"heal":const e=Math.floor(.2*$a.value.startingResources.soldiers);la.value.resources.soldiers+=e,ve(`ğŸ•ï¸ íœ´ì‹ìœ¼ë¡œ ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success");break;case"remove-card":ve("ğŸ—‘ï¸ ì¹´ë“œ ì •ë¦¬ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤","info");break;case"meditate":const a=Math.floor(200*Math.random())+100,t=Math.floor(150*Math.random())+50;la.value.resources.gold+=a,la.value.resources.food+=t,ve(`ğŸ§˜ ëª…ìƒ... ê¸ˆ +${a}, ì‹ëŸ‰ +${t}`,"success")}qa.value=!1,Ia.value&&(Ia.value.status="completed",Ia.value.completed=!0,Ia.value.connections.forEach(e=>{const a=$a.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),zt(),$a.value.active&&jt())},Gt=()=>{Qa.value=!1,$a.value?.active&&Ia.value&&(Ia.value.status="completed",Ia.value.completed=!0,at.value&&(at.value=!1),setTimeout(()=>{jt()},300))},Ut=()=>{Qa.value=!1,Ue();Ye(De.value.battle).forEach(e=>{Ve(e)}),nt(Xa.value.enemyName,Xa.value.enemyPower,Xa.value.battleType)},qt=e=>{if(Ia.value&&Ia.value.enemy)if(at.value)if("victory"===e){const e={gold:5e3,food:3e3,soldiers:1e3};la.value.resources.gold+=e.gold,la.value.resources.food+=e.food,la.value.resources.soldiers+=e.soldiers,ve(`ğŸ‘‘ ë³´ìŠ¤ ì²˜ì¹˜! ê¸ˆ +${e.gold}, ì‹ëŸ‰ +${e.food}, ë³‘ë ¥ +${e.soldiers}`,"success"),Ma(),setTimeout(()=>{at.value=!1,tt.value=!0,_a.value=!0},1e3)}else setTimeout(()=>{at.value=!1,tt.value=!1,_a.value=!0},500);else if("victory"===e){Aa(Ia.value.enemy.rewards),ve(`ìŠ¹ë¦¬! ê¸ˆ +${Ia.value.enemy.rewards.gold}, ì‹ëŸ‰ +${Ia.value.enemy.rewards.food}`,"success");const e=Ia.value.enemy.rewards.cards&&Ia.value.enemy.rewards.cards.length>0;e&&(Re.value=Ia.value.enemy.rewards.cards,Se.value=!0),Ia.value.status="completed",Ia.value.completed=!0,Ia.value.connections.forEach(e=>{const a=$a.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),zt(),$a.value.active&&!e?jt():$a.value.active}else{const e=Math.floor(.3*la.value.resources.soldiers);la.value.resources.soldiers=Math.max(0,la.value.resources.soldiers-e),ve(`íŒ¨ë°°... ë³‘ë ¥ ${e}ëª… ì†ì‹¤. ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤.`,"error"),Ia.value.status="completed",Ia.value.completed=!0,Ia.value.connections.forEach(e=>{const a=$a.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),zt(),$a.value.active&&jt()}},zt=()=>{if(la.value.day++,$a.value?.active)return void ve(`${la.value.day}ì¼ì°¨`,"info");const e=fe(la.value.day);if(e)return a=e,we.value=a,void(ye.value=!0);var a;if(la.value.day%7==0&&la.value.day>0&&la.value.day<42){const e=la.value.day/7;return ve(`âš”ï¸ ${e}ì£¼ì°¨! ì œêµ­êµ°ì´ ì „ë©´ ì¹¨ëµí•´ì˜µë‹ˆë‹¤!`,"error"),et.value=!0,void rt("pve","empire")}if(la.value.day>=42)return ve("ğŸ”„ 42ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),void setTimeout(()=>{localStorage.removeItem("reincarnationData"),localStorage.removeItem("gameData"),localStorage.removeItem("passiveCards"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("tutorialState"),localStorage.removeItem("synergyCards"),ve("ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{window.location.reload()},1e3)},2e3);ve(`${la.value.day}ì¼ì°¨ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.`,"info")},Ht=()=>{pa.value=!1,ve("ì¹´ë“œ êµí™˜ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.","info")},Jt=(e,a)=>{const t=Ee.value.findIndex(a=>a.id===e.id);-1!==t&&(Ee.value.splice(t,1,a),ve(`${e.name}ì„(ë¥¼) ${a.name}(ìœ¼)ë¡œ êµí™˜í–ˆìŠµë‹ˆë‹¤!`,"success"),pa.value=!1)},Ft=e=>Ee.value.some(a=>a.id===e.id)?(ve("ì´ë¯¸ ë³´ìœ í•œ ì¹´ë“œì…ë‹ˆë‹¤!","error"),!1):Ee.value.length>=f?(ve(`ìµœëŒ€ ${f}ì¥ê¹Œì§€ë§Œ ë³´ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!`,"error"),!1):(Ee.value.push(e),!0),Wt=e=>{Ft(e)&&(ve(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success"),pa.value=!1)},Kt=h(()=>(Re.value||[]).filter(e=>"common"===e.rarity||"rare"===e.rarity).slice(0,9)),Yt=e=>{let a=0;e.forEach(e=>{Ft(e)&&a++}),be(),ve(`${a}ê°œì˜ ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success")},Qt=()=>{ht(),0===la.value.day?(la.value.day=1,ve("âš”ï¸ ì „íˆ¬ ì¤€ë¹„ ì™„ë£Œ! 1ì¼ì°¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤!","success")):ve("âš”ï¸ ì „íˆ¬ ê°€ì´ë“œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},Xt=e=>{e&&(gt(),bt())};return I(()=>{Ae(),setTimeout(()=>{ba.value=!0},500),ie("base",{loop:!0,volume:.3})}),P(()=>{ce()}),(e,a)=>(w(),x("div",Qe,[_("video",{autoplay:"",loop:"",muted:"",playsinline:"",class:"absolute inset-0 w-full h-full object-cover z-0",src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/background/base_back_ani.mp4`},null,8,Xe),a[18]||(a[18]=_("div",{class:"absolute inset-0 bg-black/40 z-0"},null,-1)),_("div",Ze,[k(pe)?.storyCompleted&&!k(pe)?.hasSelectedStartCards?(w(),j(k(t),{key:0,cards:Kt.value,onConfirm:Yt},null,8,["cards"])):C("",!0),R(k(te),{show:ba.value,onComplete:wa,onSkip:k(he)},null,8,["show","onSkip"]),k($a)?.active?C("",!0):(w(),j(ue,{key:1,resources:k(la).resources,timer:k(Ce),"current-day":k(la).day,"reincarnation-count":k(Ca).count,"commandment-effects":ke.value,onShowResourceHelp:xa},null,8,["resources","timer","current-day","reincarnation-count","commandment-effects"])),a[17]||(a[17]=_("div",{class:"flex-1"},null,-1)),k($a)?.active?C("",!0):(w(),j(xe,{key:2,"unlocked-features":k(pe)?.unlockedFeatures||[],onShowCommandments:a[0]||(a[0]=e=>ga.value=!0),onShowPassiveCards:a[1]||(a[1]=e=>da.value=!0),onShowCardDeck:a[2]||(a[2]=e=>Me.value=!0),onShowCardGuide:a[3]||(a[3]=e=>ua.value=!0),onStartNormalBattle:Ya,onRecruitSoldiers:ca},null,8,["unlocked-features"])),R(k(D),{event:k(wt),"current-resources":k(la).resources,onClose:$t,onSelectChoice:Tt},null,8,["event","current-resources"]),R(k($),{crossroad:k(_t),onClose:It,onSelectChoice:Pt},null,8,["crossroad"]),R(k(y),{battle:k(st),"is-scrolling":k(ot),"battle-active-cards":k(Oe),"used-active-cards":k(ut),"attacker-score":k(mt),"defender-score":k(vt),"is-paused":k(pt),"card-selection-time":k(ft),"current-day":k(la).day,onClose:xt,onUseActiveCard:k(dt),onCompleteTutorial:Qt,onPauseTutorial:Xt,onManualPause:k(bt),onManualResume:k(ht),onSkipToResult:yt},null,8,["battle","is-scrolling","battle-active-cards","used-active-cards","attacker-score","defender-score","is-paused","card-selection-time","current-day","onUseActiveCard","onManualPause","onManualResume"]),R(k(V),{show:k(Se),cards:k(Re),onSelectCard:Mt},null,8,["show","cards"]),R(k(G),{show:_e.value,"owned-active-cards":k(Be),"battle-active-cards":k(Oe),"max-battle-cards":k(Le),onClose:a[4]||(a[4]=e=>_e.value=!1),onAddToDeck:k(Ve),onRemoveFromDeck:k(Ge)},null,8,["show","owned-active-cards","battle-active-cards","max-battle-cards","onAddToDeck","onRemoveFromDeck"]),R(k(U),{show:k(_a),"available-cards":ze.value,"reincarnation-count":k(Ca).count,"highest-day":Math.max(k(Ca).highestDay,k(la).day),"total-days-played":k(Ca).totalDaysPlayed+k(la).day,"inherited-cards-count":k(Ca).inheritedCards?.length||0,onSelectCard:Ra,onReincarnateWithoutCard:Da},null,8,["show","available-cards","reincarnation-count","highest-day","total-days-played","inherited-cards-count"]),R(k(q),{show:da.value,"passive-cards":k(Ee),"inherited-card-ids":k(Ca).inheritedCards.map(e=>e.id),onClose:a[5]||(a[5]=e=>da.value=!1)},null,8,["show","passive-cards","inherited-card-ids"]),R(k(z),{show:ua.value,"player-cards":k(Ee),onClose:a[6]||(a[6]=e=>ua.value=!1)},null,8,["show","player-cards"]),R(k(se),{modelValue:Me.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Me.value=e),"card-deck":k(De),"available-domestic-cards":k(Te),"available-battle-cards":k(Ie),"equipped-cards":k($e),onEquipCard:a[8]||(a[8]=(e,a,t)=>k(Pe)(e,a,t)),onUnequipCard:a[9]||(a[9]=(e,a)=>k(je)(e,a))},null,8,["modelValue","card-deck","available-domestic-cards","available-battle-cards","equipped-cards"]),R(k(H),{show:ga.value,commandments:k(re)?.selectedCommandments||[],onClose:a[10]||(a[10]=e=>ga.value=!1)},null,8,["show","commandments"]),R(k(J),{show:ye.value,title:we.value?.title||"",message:we.value?.message||"",rewards:we.value?.rewards,urgent:we.value?.urgent,important:we.value?.important,final:we.value?.final,onClose:At,onConfirm:At},null,8,["show","title","message","rewards","urgent","important","final"]),R(k(F),{show:k(Je),cards:k(Fe),onClose:a[11]||(a[11]=e=>Je.value=!1),onSelectCard:k(oa)},null,8,["show","cards","onSelectCard"]),R(k(W),{show:ma.value,cards:k(He),synergies:k(We),"total-effects":k(Ke).totalEffects,onClose:a[12]||(a[12]=e=>ma.value=!1)},null,8,["show","cards","synergies","total-effects"]),R(k(K),{show:va.value,onClose:a[13]||(a[13]=e=>va.value=!1)},null,8,["show"]),R(k(Q),{show:ha.value,"resource-type":ya.value,onClose:a[14]||(a[14]=e=>ha.value=!1)},null,8,["show","resource-type"]),R(k(Y),{show:pa.value,"current-cards":k(Ee),"new-cards":fa.value,onClose:a[15]||(a[15]=e=>pa.value=!1),onSkip:Ht,onExchange:Jt,onAdd:Wt},null,8,["show","current-cards","new-cards"]),k($a)?.active?(w(),j(k(X),{key:3,nodes:k($a)?.nodes||[],"current-node-id":k($a)?.currentNodeId||null,"accumulated-rewards":k($a)?.accumulatedRewards||{},"visible-cells":k($a)?.visibleCells||new Set,"is-selecting-path":k($a)?.isSelectingPath||!1,"available-paths":k($a)?.availablePaths||[],onNodeClick:Ot,onRetreat:Ga},null,8,["nodes","current-node-id","accumulated-rewards","visible-cells","is-selecting-path","available-paths"])):C("",!0),R(k(Z),{show:Ua.value,"current-gold":k(la).resources.gold,"current-food":k(la).resources.food,onClose:Lt,onBuy:Nt},null,8,["show","current-gold","current-food"]),R(k(ee),{show:qa.value,onClose:a[16]||(a[16]=e=>qa.value=!1),onSelect:Vt},null,8,["show"]),R(k(ae),{show:Qa.value,"enemy-name":Xa.value.enemyName,"enemy-power":Xa.value.enemyPower,"player-power":k(la).resources.soldiers,"deck-battle-cards":k(De).battle,"is-boss-battle":at.value,onConfirm:Ut,onCancel:Gt},null,8,["show","enemy-name","enemy-power","player-power","deck-battle-cards","is-boss-battle"]),R(k(oe),{show:za.value,"dice-results":k($a)?.diceResults||[],"current-index":k($a)?.currentDiceIndex||0,"is-rolling":Ja.value,onRoll:Fa,onUseNext:Ka,onConfirm:Wa},null,8,["show","dice-results","current-index","is-rolling"]),R(k(le),{show:Ha.value,"dice-results":k($a)?.diceResults||[],"current-index":k($a)?.currentDiceIndex||0},null,8,["show","dice-results","current-index"]),R(B,{name:"notification"},{default:M(()=>[k(me)?(w(),x("div",{key:0,class:S(["fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px]",{"bg-green-600 border-2 border-green-400":"success"===k(me).type,"bg-red-600 border-2 border-red-400":"error"===k(me).type,"bg-blue-600 border-2 border-blue-400":"info"===k(me).type}])},[_("span",ea,E("success"===k(me).type?"âœ“":"error"===k(me).type?"âœ—":"â„¹"),1),_("span",aa,E(k(me).message),1)],2)):C("",!0)]),_:1})])]))}});export{ta as default};
