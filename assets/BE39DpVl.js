const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./19ebYwQG.js","./DpePsv-0.js","./DNZqlUPn.js","./IN_h6Bj_.js","./tGAXIjMb.js","./entry.CrwtrUj0.css","./DM9cP67Q.js","./GameBattleModal.DUbjaYrW.css","./Ccrk7AXr.js","./Dcm-Q4sd.js","./D3wKW4lR.js","./CTq5DdoV.js","./CMzl8jjB.js","./GameActiveCardsModal.B6r-ilfv.css","./DDad3TPx.js","./GameReincarnationModal.DNWq0NAG.css","./_pAY78pE.js","./GamePassiveCardsModal.B7TDu7_z.css","./eCuZqh20.js","./GameCardCollection.B_5gcNsZ.css","./igPjlhUv.js","./GameCommandmentsModal.BpQvi8cF.css","./YUVSYA9M.js","./GameNarrativeModal.BWH3NpDh.css","./DN5pdh2l.js","./GameAdvisorModal.DXEfPlk2.css","./DnOHTrby.js","./GameSynergyCardSelection.ZhzXQiyu.css","./BUTM2p26.js","./GameSynergyCollection.C7znwYRa.css","./Cut9Xjnc.js","./GameSynergyGuide.BHmzaapF.css","./C488VfbS.js","./GameDailyCardExchange.CMiIgq1D.css","./C_gqlmx6.js","./GameResourceHelp.N43b38by.css","./CV2V-FHp.js","./GameAdventureMap.KMmYI9En.css","./CNI117PN.js","./GameAdventureShop.CBia5tev.css","./TK7_YhGL.js","./GameAdventureRest.xCSJfAfh.css","./DLyDDhP3.js","./GameBattleCardSelection.Dcuhs2Yz.css","./BdSIK8y4.js","./GameAdventureTutorial.Yv3IGJwD.css","./DLApZhDs.js","./GameOmenWarning.NFuABzaY.css","./vsGlgF0r.js","./GameCardDeckModal.D1u7_lsN.css","./CDbG0eSJ.js","./GameDiceRoulette.CZFqnT9q.css","./B-4uLtmd.js"])))=>i.map(i=>d[i]);
import{_ as e,a}from"#entry";import{s as t,u as s,e as o,g as l,i as r,k as n,l as i,m as c,o as u,q as d,t as m,M as v,v as p,x as f,y as g}from"./tGAXIjMb.js";import{b,c as h,d as y,f as x,k as w,l as _,j as C,p as k,n as E,C as S,v as D,F as R,z as T,y as I,w as $,G as j,o as P,q as A,O as L,u as M,T as O}from"./DpePsv-0.js";import{u as N}from"./D2lef-uv.js";import{u as B}from"./DM9cP67Q.js";const V=60/86400,G=()=>{const e=b((()=>{{const e=localStorage.getItem("gameStartTime");if(e)return new Date(e);{const e=new Date;return localStorage.setItem("gameStartTime",e.toISOString()),e}}})()),a=h(()=>{const a=new Date(e.value);return a.setDate(a.getDate()+V),a}),s=b({days:0,hours:0,minutes:0,seconds:0,isExpired:!1,totalElapsedDays:0,hasReached4Days:!1,hasReached8Days:!1}),o=()=>{const t=new Date,o=a.value.getTime()-t.getTime(),l=(t.getTime()-e.value.getTime())/1e3,r=l/60*12;Math.floor(l)%10==0&&Math.floor(l),s.value=o<=0?{days:0,hours:0,minutes:0,seconds:0,isExpired:!0,totalElapsedDays:V,hasReached4Days:!0,hasReached8Days:!0}:{days:Math.floor(o/864e5),hours:Math.floor(o%864e5/36e5),minutes:Math.floor(o%36e5/6e4),seconds:Math.floor(o%6e4/1e3),isExpired:!1,totalElapsedDays:r,hasReached4Days:r>=4,hasReached8Days:r>=8}};return o(),t(o,1e3),{gameStartTime:e,gameEndTime:a,remainingTime:s,updateRemainingTime:o,GAME_DURATION_DAYS:V}},U={class:"fixed top-0 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-1.5 pointer-events-none w-full max-w-md"},q={class:"flex flex-col gap-1.5 relative z-10"},z={class:"grid grid-cols-4 gap-1 pointer-events-auto"},J={class:"resource-display compact border-green-500"},H={class:"resource-info"},F={class:"resource-value"},W={class:"resource-display compact border-yellow-500"},K={class:"resource-info"},Y={class:"resource-value"},Q={class:"resource-display compact border-red-500"},X={class:"resource-info"},Z={class:"resource-value"},ee={class:"resource-display compact border-pink-500"},ae={class:"resource-info"},te={class:"resource-value"},se={class:"flex justify-between gap-1.5"},oe={class:"flex-1 pointer-events-auto"},le={class:"resource-display compact border-blue-500"},re={class:"resource-info"},ne={class:"resource-value"},ie={class:"flex-1 pointer-events-auto"},ce={class:"resource-display compact border-amber-500"},ue={class:"resource-info"},de={class:"resource-value text-amber-300"},me={key:0,class:"pointer-events-auto"},ve={class:"resource-value text-xs w-full animate-pulse"},pe={key:1,class:"pointer-events-auto"},fe={class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 border-2 border-indigo-400 rounded-lg p-2 sm:p-2.5 backdrop-blur-sm shadow-lg"},ge={class:"flex flex-wrap gap-1.5 sm:gap-2"},be=y({__name:"GameMobileResources",props:{resources:{},timer:{},currentDay:{},reincarnationCount:{default:0},commandmentEffects:{default:null}},emits:["show-resource-help"],setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),o=h(()=>""),l=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,r)=>(w(),x("div",U,[_("div",{class:"backdrop-blur-md border-b border-gray-700 px-2 py-2 bg-cover bg-center bg-no-repeat relative min-h-[120px]",style:S({backgroundImage:`url(${("useRuntimeConfig"in a?a.useRuntimeConfig:D(s))().app.baseURL}images/background/header_back_ground.png)`})},[r[13]||(r[13]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",q,[_("div",z,[_("div",J,[r[1]||(r[1]=_("span",{class:"resource-icon"},"ğŸ–",-1)),_("div",H,[r[0]||(r[0]=_("span",{class:"resource-label"},"ì‹ëŸ‰",-1)),_("span",F,k(e.resources.food),1)])]),_("div",W,[r[3]||(r[3]=_("span",{class:"resource-icon"},"ğŸ’°",-1)),_("div",K,[r[2]||(r[2]=_("span",{class:"resource-label"},"ê¸ˆ",-1)),_("span",Y,k(e.resources.gold),1)])]),_("div",Q,[r[5]||(r[5]=_("span",{class:"resource-icon"},"âš”ï¸",-1)),_("div",X,[r[4]||(r[4]=_("span",{class:"resource-label"},"ë³‘ì‚¬",-1)),_("span",Z,k(e.resources.soldiers),1)])]),_("div",ee,[r[7]||(r[7]=_("span",{class:"resource-icon"},"â¤ï¸",-1)),_("div",ae,[r[6]||(r[6]=_("span",{class:"resource-label"},"ë¯¼ì‹¬",-1)),_("span",te,k(e.resources.morale),1)])])]),_("div",se,[_("div",oe,[_("div",le,[r[9]||(r[9]=_("span",{class:"resource-icon"},"ğŸ“…",-1)),_("div",re,[r[8]||(r[8]=_("span",{class:"resource-label"},"ê²Œì„ ì¼ì°¨",-1)),_("span",ne,k(e.currentDay)+"ì¼",1)])])]),_("div",ie,[_("div",ce,[r[11]||(r[11]=_("span",{class:"resource-icon"},"â™»ï¸",-1)),_("div",ue,[r[10]||(r[10]=_("span",{class:"resource-label"},"í™˜ìƒ",-1)),_("span",de,k(e.reincarnationCount)+"íšŒ",1)])])])]),o.value?(w(),x("div",me,[_("div",{class:E(["resource-display compact text-center",t.value<=1?"border-red-500 bg-red-900/30":"border-yellow-500 bg-yellow-900/20"])},[_("span",ve,k(o.value),1)],2)])):C("",!0),e.commandmentEffects&&l.value?(w(),x("div",pe,[_("div",fe,[r[12]||(r[12]=_("div",{class:"flex items-center gap-2 mb-1.5"},[_("span",{class:"text-xl sm:text-2xl"},"âš–ï¸"),_("span",{class:"text-xs sm:text-sm font-bold text-indigo-200"},"ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©)")],-1)),_("div",ge,[0!==e.commandmentEffects.morale?(w(),x("span",{key:0,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+k(e.commandmentEffects.morale>0?"+":"")+k(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("span",{key:1,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+k(e.commandmentEffects.gold>0?"+":"")+k(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("span",{key:2,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+k(e.commandmentEffects.military>0?"+":"")+k(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("span",{key:3,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+k(e.commandmentEffects.food>0?"+":"")+k(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("span",{key:4,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+k(e.commandmentEffects.population>0?"+":"")+k(e.commandmentEffects.population),3)):C("",!0)])])])):C("",!0)])],4)]))}}),he=Object.assign(e(be,[["__scopeId","data-v-164657c0"]]),{__name:"GameMobileResources"}),ye=["src"],xe={class:"grid grid-cols-5 gap-1 relative z-10"},we=["src"],_e=["src"],Ce=["src"],ke=["src"],Ee=["src"],Se=y({__name:"GameMobileActions",emits:["show-generals","show-battle-history","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x(R,null,[_("button",{onClick:a[0]||(a[0]=a=>e.$emit("start-normal-battle")),class:"fixed left-1/2 -translate-x-1/2 z-50 flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-[72px] w-[72px]",style:{bottom:"calc(var(--bottom-bar-height, 72px) + 10px)"}},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/adventure.png`,alt:"ëª¨í—˜",class:"w-full h-full object-contain"},null,8,ye)]),_("div",{class:"fixed bottom-0 left-1/2 -translate-x-1/2 border-t border-gray-700 p-1 z-50 w-full max-w-md bg-cover bg-center bg-no-repeat relative",style:S({backgroundImage:`url(${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/background/under_back_ground.png)`})},[a[6]||(a[6]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",xe,[_("button",{onClick:a[1]||(a[1]=a=>e.$emit("show-battle-history")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/record.png`,alt:"ì „ìŸ ê¸°ë¡",class:"w-full h-full object-contain"},null,8,we)]),_("button",{onClick:a[2]||(a[2]=a=>e.$emit("show-passive-cards")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/card.png`,alt:"ì¹´ë“œ",class:"w-full h-full object-contain"},null,8,_e)]),_("button",{onClick:a[3]||(a[3]=a=>e.$emit("show-card-deck")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/deck.png`,alt:"ë±",class:"w-full h-full object-contain"},null,8,Ce)]),_("button",{onClick:a[4]||(a[4]=a=>e.$emit("show-card-guide")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/encyclopedia.png`,alt:"ë„ê°",class:"w-full h-full object-contain"},null,8,ke)]),_("button",{onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/button/recruitment.png`,alt:"ëª¨ì§‘",class:"w-full h-full object-contain"},null,8,Ee)])])],4)],64))}),De=Object.assign(Se,{__name:"GameMobileActions"}),Re={class:"hidden md:flex bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700 px-8 py-4"},Te={class:"max-w-7xl mx-auto w-full flex items-center justify-between"},Ie={class:"flex items-center gap-4"},$e={class:"text-2xl font-bold text-amber-100"},je={class:"text-sm text-slate-400"},Pe={class:"flex items-center gap-4"},Ae={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-green-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-green-500/20"},Le={class:"text-lg font-bold text-slate-100"},Me={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-yellow-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-yellow-500/20"},Oe={class:"text-lg font-bold text-slate-100"},Ne={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-red-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-red-500/20"},Be={class:"text-lg font-bold text-slate-100"},Ve={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-pink-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-pink-500/20"},Ge={class:"text-lg font-bold text-slate-100"},Ue=y({__name:"GameDesktopHeader",props:{kingdomName:{},day:{},resources:{}},emits:["show-resource-help"],setup:e=>(a,t)=>(w(),x("header",Re,[_("div",Te,[_("div",Ie,[t[4]||(t[4]=_("div",{class:"text-4xl"},"ğŸ‘‘",-1)),_("div",null,[_("h1",$e,k(e.kingdomName),1),_("p",je,"ì œ "+k(e.day)+"ì¼ í†µì¹˜",1)])]),_("div",Pe,[_("div",Ae,[t[6]||(t[6]=_("span",{class:"text-2xl"},"ğŸ–",-1)),_("div",null,[t[5]||(t[5]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ì‹ëŸ‰",-1)),_("p",Le,k(e.resources.food),1)]),_("button",{onClick:t[0]||(t[0]=e=>a.$emit("show-resource-help","food")),class:"absolute -top-1 -right-1 w-5 h-5 bg-green-600 hover:bg-green-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ì‹ëŸ‰ ë„ì›€ë§"}," ? ")]),_("div",Me,[t[8]||(t[8]=_("span",{class:"text-2xl"},"ğŸ’°",-1)),_("div",null,[t[7]||(t[7]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ê¸ˆí™”",-1)),_("p",Oe,k(e.resources.gold),1)]),_("button",{onClick:t[1]||(t[1]=e=>a.$emit("show-resource-help","gold")),class:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-600 hover:bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ê¸ˆ ë„ì›€ë§"}," ? ")]),_("div",Ne,[t[10]||(t[10]=_("span",{class:"text-2xl"},"âš”ï¸",-1)),_("div",null,[t[9]||(t[9]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ë³‘ì‚¬",-1)),_("p",Be,k(e.resources.soldiers),1)]),_("button",{onClick:t[2]||(t[2]=e=>a.$emit("show-resource-help","soldiers")),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 hover:bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë³‘ì‚¬ ë„ì›€ë§"}," ? ")]),_("div",Ve,[t[12]||(t[12]=_("span",{class:"text-2xl"},"â¤ï¸",-1)),_("div",null,[t[11]||(t[11]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ë¯¼ì‹¬",-1)),_("p",Ge,k(e.resources.morale),1)]),_("button",{onClick:t[3]||(t[3]=e=>a.$emit("show-resource-help","morale")),class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-600 hover:bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë¯¼ì‹¬ ë„ì›€ë§"}," ? ")])])])]))});Object.assign(Ue,{__name:"GameDesktopHeader"});const qe={class:"w-80 space-y-4"},ze={class:"text-lg font-bold animate-pulse"},Je={key:1,class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 backdrop-blur-xl border-2 border-indigo-400 rounded-xl p-4 shadow-lg"},He={class:"flex flex-wrap gap-2"},Fe=y({__name:"GameLeftSidebar",props:{timer:{},currentDay:{},commandmentEffects:{}},setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=h(()=>""),o=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,l)=>(w(),x("div",qe,[s.value?(w(),x("div",{key:0,class:E(["bg-gradient-to-br border-2 rounded-xl p-4 text-center",t.value<=1?"from-red-900/50 to-rose-900/50 border-red-500":"from-yellow-900/50 to-amber-900/50 border-yellow-500"])},[_("div",ze,k(s.value),1)],2)):C("",!0),e.commandmentEffects&&o.value?(w(),x("div",Je,[l[0]||(l[0]=_("h3",{class:"text-base font-bold text-indigo-200 mb-3 flex items-center gap-2"},[_("span",{class:"text-2xl"},"âš–ï¸"),T(" ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©) ")],-1)),_("div",He,[0!==e.commandmentEffects.morale?(w(),x("div",{key:0,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+k(e.commandmentEffects.morale>0?"+":"")+k(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("div",{key:1,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+k(e.commandmentEffects.gold>0?"+":"")+k(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("div",{key:2,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+k(e.commandmentEffects.military>0?"+":"")+k(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("div",{key:3,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+k(e.commandmentEffects.food>0?"+":"")+k(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("div",{key:4,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+k(e.commandmentEffects.population>0?"+":"")+k(e.commandmentEffects.population),3)):C("",!0)])])):C("",!0)]))}});Object.assign(Fe,{__name:"GameLeftSidebar"});const We=["disabled"],Ke={class:"action-icon"},Ye={class:"action-content"},Qe={class:"action-title"},Xe={key:0,class:"action-description"},Ze=y({__name:"ActionButton",props:{icon:{},title:{},description:{},variant:{default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,s=a,o=e=>{t.disabled||s("click",e)};return(a,t)=>(w(),x("button",{class:E(["action-button",e.variant,{"action-button-disabled":e.disabled}]),disabled:e.disabled,onClick:o},[_("div",Ke,k(e.icon),1),_("div",Ye,[_("div",Qe,k(e.title),1),e.description?(w(),x("div",Xe,k(e.description),1)):C("",!0)])],10,We))}}),ea=Object.assign(e(Ze,[["__scopeId","data-v-1657d8d0"]]),{__name:"GameActionButton"}),aa={class:"w-80 space-y-3"},ta=y({__name:"GameActionPanel",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",aa,[I(ea,{icon:"âœ¨",title:"ì‹ ì˜ ê³„ëª…",description:"ì‹ ì´ ë‚´ë¦° ê³„ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤",variant:"warning",onClick:a[0]||(a[0]=a=>e.$emit("show-commandments"))}),I(ea,{icon:"ğŸ´",title:"ë³´ìœ  ì¹´ë“œ",description:"ë³´ìœ í•œ íŒ¨ì‹œë¸Œ ì¹´ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards"))}),I(ea,{icon:"ğŸƒ",title:"ì¹´ë“œ ë± ì„¤ì •",description:"ë‚´ì • 3ì¥ + ì „íˆ¬ 3ì¥ì„ ì¥ì°©í•©ë‹ˆë‹¤",variant:"info",onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck"))}),I(ea,{icon:"ğŸ“š",title:"ì¹´ë“œ ë„ê°",description:"ëª¨ë“  ì¹´ë“œì™€ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide"))}),I(ea,{icon:"âš”ï¸",title:"ëª¨í—˜",description:"ì  ì„¸ë ¥ê³¼ ì „íˆ¬ë¥¼ ë²Œì…ë‹ˆë‹¤",variant:"success",onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle"))}),I(ea,{icon:"ğŸ›¡ï¸",title:"ë³‘ë ¥ ëª¨ì§‘",description:"ê¸ˆ 200ìœ¼ë¡œ ë³‘ë ¥ 100 ëª¨ì§‘",variant:"success",onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers"))})]))});Object.assign(ta,{__name:"GameActionPanel"});function sa(e){return e.filter(e=>null!==e).map(e=>function(e){const{effect:a}=e;let t,s="instant_damage",o=0,l="";return"combat"===a.type?a.attackBonus&&a.attackBonus>0?(s="power_boost",o=a.attackBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ê³µê²©ë ¥ +${a.attackBonus}%`):a.defenseBonus&&a.defenseBonus>0?(s="defense_boost",o=a.defenseBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ë°©ì–´ë ¥ +${a.defenseBonus}%`):a.skillPowerBonus&&a.skillPowerBonus>0&&(s="power_boost",o=a.skillPowerBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ìŠ¤í‚¬ ìœ„ë ¥ +${a.skillPowerBonus}%`):"resource"===a.type?a.morale&&a.morale>0?(s="morale_boost",o=Math.min(3*a.morale,30),t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +${o}%`):a.military&&a.military>0?(s="instant_damage",o=Math.min(2*a.military,50),l=`ì ì—ê²Œ ${o}ì˜ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤`):(s="heal",o=15,l="ì•„êµ° ë³‘ë ¥ì´ 15% íšŒë³µë©ë‹ˆë‹¤"):"special"===a.type&&(s="morale_boost",o=20,t=2,l=a.description||"2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +20%"),{id:`converted_${e.id}`,name:e.name,description:e.description,icon:e.icon,image:e.image,rarity:e.rarity,effectType:s,power:o,duration:t,battleDescription:l}}(e))}const oa={class:"min-h-screen text-white flex flex-col overflow-hidden relative bg-slate-900"},la=["src"],ra=["src"],na={class:"relative z-10 flex flex-col min-h-screen max-w-md mx-auto w-full bg-black/20"},ia={class:"text-2xl"},ca={class:"font-semibold"},ua=y({__name:"game",setup(e){const t=b(null),y=b(null),S=b(1),R=b(!1),T=e=>{if(R.value)return;const a=1===e?t.value:y.value,s=1===e?y.value:t.value;if(a&&s&&S.value===e){const t=a.duration-a.currentTime;t<=1&&t>0&&(R.value=!0,s.currentTime=0,s.play().catch(e=>{}),S.value=1===e?2:1,setTimeout(()=>{R.value=!1,a.pause()},1e3))}},V=L(()=>a(()=>import("./19ebYwQG.js"),__vite__mapDeps([0,1]),import.meta.url)),U=L(()=>a(()=>import("./DNZqlUPn.js"),__vite__mapDeps([2,1,3,4,5,6,7]),import.meta.url)),q=L(()=>a(()=>import("./Ccrk7AXr.js"),__vite__mapDeps([8,1,9,4]),import.meta.url)),z=L(()=>a(()=>import("./D3wKW4lR.js"),__vite__mapDeps([10,1]),import.meta.url)),J=L(()=>a(()=>import("./CTq5DdoV.js"),__vite__mapDeps([11,1]),import.meta.url)),H=L(()=>a(()=>import("./CMzl8jjB.js"),__vite__mapDeps([12,1,3,4,5,13]),import.meta.url)),F=L(()=>a(()=>import("./DDad3TPx.js"),__vite__mapDeps([14,1,3,4,5,15]),import.meta.url)),W=L(()=>a(()=>import("./_pAY78pE.js"),__vite__mapDeps([16,4,1,3,5,17]),import.meta.url)),K=L(()=>a(()=>import("./eCuZqh20.js"),__vite__mapDeps([18,4,1,3,5,19]),import.meta.url)),Y=L(()=>a(()=>import("./igPjlhUv.js"),__vite__mapDeps([20,1,3,4,5,21]),import.meta.url)),Q=L(()=>a(()=>import("./YUVSYA9M.js"),__vite__mapDeps([22,4,1,3,5,23]),import.meta.url)),X=L(()=>a(()=>import("./DN5pdh2l.js"),__vite__mapDeps([24,1,3,4,5,25]),import.meta.url)),Z=L(()=>a(()=>import("./DnOHTrby.js"),__vite__mapDeps([26,1,3,4,5,27]),import.meta.url)),ee=L(()=>a(()=>import("./BUTM2p26.js"),__vite__mapDeps([28,1,3,4,5,29]),import.meta.url)),ae=L(()=>a(()=>import("./Cut9Xjnc.js"),__vite__mapDeps([30,1,4,3,5,31]),import.meta.url)),te=L(()=>a(()=>import("./C488VfbS.js"),__vite__mapDeps([32,1,3,4,5,33]),import.meta.url)),se=L(()=>a(()=>import("./C_gqlmx6.js"),__vite__mapDeps([34,1,3,4,5,35]),import.meta.url)),oe=L(()=>a(()=>import("./CV2V-FHp.js"),__vite__mapDeps([36,1,4,3,5,37]),import.meta.url)),le=L(()=>a(()=>import("./CNI117PN.js"),__vite__mapDeps([38,1,3,4,5,39]),import.meta.url)),re=L(()=>a(()=>import("./TK7_YhGL.js"),__vite__mapDeps([40,1,3,4,5,41]),import.meta.url)),ne=L(()=>a(()=>import("./DLyDDhP3.js"),__vite__mapDeps([42,1,3,4,5,43]),import.meta.url)),ie=L(()=>a(()=>import("./BdSIK8y4.js"),__vite__mapDeps([44,4,1,3,5,45]),import.meta.url)),ce=L(()=>a(()=>import("./DLApZhDs.js"),__vite__mapDeps([46,4,1,3,5,47]),import.meta.url)),ue=L(()=>a(()=>import("./vsGlgF0r.js"),__vite__mapDeps([48,4,1,3,5,49]),import.meta.url)),de=L(()=>a(()=>import("./CDbG0eSJ.js"),__vite__mapDeps([50,1,3,4,5,51]),import.meta.url)),me=L(()=>a(()=>import("./B-4uLtmd.js"),__vite__mapDeps([52,1]),import.meta.url)),{nationState:ve,startCards:pe}=N(),{playBGM:fe,stopBGM:ge}=B(),be=b([]),{notification:ye,showNotification:xe}=(()=>{const e=b(null);return{notification:e,showNotification:(a,t="info")=>{e.value={message:a,type:t},setTimeout(()=>{e.value=null},3e3)}}})(),{tutorialState:we,advanceDay:_e,onRecruitSoldiers:Ce,completeStartCardSelection:ke}=o(),Ee=b(!1),Se=b(null),Re=b(!1),{remainingTime:Te}=G(),Ie=h(()=>{if(!ve.value?.selectedCommandments||0===ve.value.selectedCommandments.length)return null;const e={morale:0,gold:0,military:0,food:0,population:0};return ve.value.selectedCommandments.forEach(a=>{e.morale+=a.effects.morale,e.gold+=a.effects.gold,e.military+=a.effects.military,e.food+=a.effects.food,e.population+=a.effects.population}),e}),{playerPassiveCards:$e,showPassiveCardSelection:je,availablePassiveCards:Pe}=l(),{cardDeck:Ae,equippedCards:Le,availableDomesticCards:Me,availableBattleCards:Oe,equipCard:Ne,unequipCard:Be,loadDeck:Ve}=(e=>{const a=b({domestic:[null,null,null],battle:[null,null,null]}),t="cardDeck",s=e=>"daily"===e.trigger||"recruit"===e.trigger,o=e=>!0===e.isBattleCard||"battle_start"===e.trigger||"battle_win"===e.trigger||"battle_lose"===e.trigger,l=h(()=>[...a.value.domestic.filter(e=>null!==e),...a.value.battle.filter(e=>null!==e)]),r=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>s(e)&&!a.includes(e.id))}),n=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>o(e)&&!a.includes(e.id))}),i=()=>{{const e={domestic:a.value.domestic.map(e=>e?.id||null),battle:a.value.battle.map(e=>e?.id||null)};localStorage.setItem(t,JSON.stringify(e))}};return{cardDeck:a,equippedCards:l,availableDomesticCards:r,availableBattleCards:n,isDomesticCard:s,isBattleCard:o,equipCard:(e,t,r)=>!(r<0||r>2||"domestic"===t&&!s(e)||"battle"===t&&!o(e)||l.value.some(a=>a.id===e.id)||(a.value[t][r]=e,i(),0)),unequipCard:(e,t)=>!(t<0||t>2||(a.value[e][t]=null,i(),0)),saveDeck:i,loadDeck:()=>{{const o=localStorage.getItem(t);if(o)try{const t=JSON.parse(o);a.value.domestic=t.domestic.map(a=>a&&e.value.find(e=>e.id===a)||null),a.value.battle=t.battle.map(a=>a&&e.value.find(e=>e.id===a)||null)}catch(s){}}},resetDeck:()=>{a.value={domestic:[null,null,null],battle:[null,null,null]},i()},getActiveCardsForTrigger:e=>l.value.filter(a=>a.trigger===e)}})($e),Ge=b(!1),{ownedActiveCards:Ue,battleActiveCards:qe,maxBattleCards:ze,loadActiveCards:Je,addToBattleDeck:He,removeFromBattleDeck:Fe,clearBattleDeck:We,grantStarterCards:Ke}=r({showNotification:xe});Je();localStorage.getItem("hasGrantedStarterActiveCards")||0!==Ue.value.length||(Ke(),localStorage.setItem("hasGrantedStarterActiveCards","true"));$(Ue,e=>{{const a=e.map(e=>e.id);localStorage.setItem("activeCards",JSON.stringify(a))}},{deep:!0});const Ye=b([]),{playerCards:Qe,showCardSelection:Xe,availableCards:Ze,activeSynergies:ea,totalEffects:aa,dailyEffects:ta,battleEffects:ua,selectCard:da}=n(),{kingdom:ma,empire:va,recruitSoldiers:pa,calculateProduction:fa}=i(ve,be,xe),ga=()=>{pa(),Ce()},ba=b(!1),ha=b(!1),ya=b(!1),xa=b(!1),wa=b(!1),_a=b([]),Ca=b(!1),ka=b(!1),Ea=b([]),Sa=e=>{Ea.value.push(e),Ea.value.length>100&&(Ea.value=Ea.value.slice(-100)),localStorage.setItem("battleHistory",JSON.stringify(Ea.value))},Da=b(!1),Ra=b(!1),Ta=b(""),Ia=b([]),$a=b(!1),ja=b(null),Pa=e=>{ja.value=e,$a.value=!0},Aa=()=>{Da.value=!1,localStorage.setItem("adventureTutorialCompleted","true"),xe("ëª¨í—˜ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},La=()=>{Da.value=!1,localStorage.setItem("adventureTutorialCompleted","true")},{showReincarnationModal:Ma,reincarnationData:Oa,loadReincarnationData:Na,selectInheritedCard:Ba,reincarnateWithoutCard:Va}=c(ma,$e,ve,xe);Na();const Ga=e=>{if(xt.value){Oa.value.inheritedCards.some(a=>a.id===e.id)||(Oa.value.inheritedCards.length>=v&&Oa.value.inheritedCards.shift(),Oa.value.inheritedCards.push(e)),localStorage.setItem("reincarnationData",JSON.stringify(Oa.value)),xe(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤! (ëˆ„ì  ìƒì† ì¹´ë“œ: ${Oa.value.inheritedCards.length}ê°œ)`,"success"),Ma.value=!1,xt.value=!1}else Ba(e)},Ua=()=>{xt.value?(xe("ì¹´ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.","info"),Ma.value=!1,xt.value=!1):Va()},{narratives:qa,adventureCount:za,loadNarratives:Ja,onAdventureComplete:Ha}=(()=>{const e=b([]),a=b(0),t=()=>{localStorage.setItem("narratives",JSON.stringify(e.value)),localStorage.setItem("adventureCount",a.value.toString())},s=e=>{const{morale:a,gold:t,food:s,soldiers:o,victories:l,defeats:r}=e,n=l+r,i=n>0?l/n:0,c=t>5e3,u=t<1e3,d=s<500,m=s>3e3,v=o<500,p=o>2e3,f=[];return a<30&&i>.7?f.push("ë°±ì„±ë“¤ì€ ë‘ë ¤ì›Œí•˜ì§€ë§Œ, ì „ìŸê´‘ ì™•ì˜ ìŠ¹ë¦¬ëŠ” ë©ˆì¶”ì§€ ì•Šì•˜ë‹¤."):a<30&&i<.3?f.push("ì—°ì´ì€ íŒ¨ë°°ì— ë°±ì„±ë“¤ì˜ í¬ë§ë§ˆì € ì‚¬ë¼ì ¸ê°”ë‹¤."):a>70&&i>.7?f.push("ì˜ì›… ì™•ì˜ ìŠ¹ì „ë³´ì— ì˜¨ ë‚˜ë¼ê°€ í™˜í˜¸í–ˆë‹¤."):a>70&&0===l&&f.push("ì „ìŸ ì—†ëŠ” í‰í™”ë¡œìš´ ì‹œëŒ€, ë°±ì„±ë“¤ì€ í–‰ë³µí–ˆë‹¤."),c&&m&&a>60?f.push("í™©ê¸ˆê³¼ ê³¡ì‹ì´ ë„˜ì¹˜ëŠ” í’ìš”ì˜ ì‹œëŒ€ê°€ ì—´ë ¸ë‹¤."):u&&d?f.push("êµ¶ì£¼ë¦¼ê³¼ ê°€ë‚œì´ ì™•êµ­ì„ ë®ì³¤ë‹¤."):c&&d?f.push("ê¸ˆì€ ìˆìœ¼ë˜ ë¨¹ì„ ê²ƒì´ ì—†ëŠ” ê¸°ì´í•œ ì‹œëŒ€ì˜€ë‹¤."):u&&m&&f.push("ê°€ë‚œí•˜ì§€ë§Œ ë°°ë¶ˆë¦¬ ë¨¹ì„ ìˆ˜ ìˆëŠ” ì†Œë°•í•œ ì‹œì ˆì´ì—ˆë‹¤."),p&&a>60?f.push("ê°•ë ¥í•œ êµ°ëŒ€ì™€ ë†’ì€ ì‚¬ê¸°, ì ë“¤ì´ ë‘ë ¤ì›Œí–ˆë‹¤."):v&&r>l?f.push("ì•½í•´ì§„ êµ°ëŒ€, íŒ¨ë°°ì˜ ê·¸ë¦¼ìê°€ ì§™ì–´ì¡Œë‹¤."):p&&a<30&&f.push("ê°•í•œ êµ°ëŒ€ì´ë‚˜ ë°±ì„±ì˜ ë§ˆìŒì€ ì°¨ê°€ì› ë‹¤."),a<20&&u&&v?f.push("ì™•êµ­ì€ ë¶•ê´´ ì§ì „, ëª¨ë“  ê²ƒì´ ë°”ë‹¥ë‚¬ë‹¤."):a<30&&o<300&&f.push("ì•”í‘ì˜ ì‹œëŒ€, ë°±ì„±ë“¤ì€ ì ˆë§í–ˆë‹¤."),a>80&&t>7e3&&s>4e3?f.push("ì—­ì‚¬ìƒ ê°€ì¥ ìœ„ëŒ€í•œ ì™•ì˜ ì‹œëŒ€ë¡œ ê¸°ë¡ë˜ì—ˆë‹¤."):a>70&&c&&p&&f.push("êµ°ì‚¬ì™€ ê²½ì œ ëª¨ë‘ ê°•í•œ ì „ì„±ê¸°ë¥¼ ë§ì´í–ˆë‹¤."),a>=40&&a<=60&&!u&&!v&&f.push("í‰ë²”í•˜ì§€ë§Œ ì•ˆì •ì ì¸ ì™•êµ­ì˜ ì¼ìƒì´ ì´ì–´ì¡Œë‹¤."),l>10&&0===r?f.push("ë¬´íŒ¨ì˜ ì „ì„¤, ì™•ì˜ ì´ë¦„ì´ ëŒ€ë¥™ì— ìš¸ë ¤í¼ì¡Œë‹¤."):r>10&&0===l&&f.push("ëì—†ëŠ” íŒ¨ë°°, ì™•êµ­ì˜ ëª…ì˜ˆëŠ” ë•…ì— ë–¨ì–´ì¡Œë‹¤."),s>5e3&&o<500?f.push("ì‹ëŸ‰ì€ ì©ì–´ê°€ëŠ”ë° ì§€í‚¬ ë³‘ì‚¬ê°€ ì—†ì—ˆë‹¤."):o>3e3&&s<300&&f.push("ìˆ˜ë§ì€ êµ°ëŒ€ê°€ êµ¶ì£¼ë¦¼ì— ì‹ ìŒí–ˆë‹¤."),l>5&&a>50?f.push("ëª¨í—˜ìœ¼ë¡œ ì–»ì€ ìŠ¹ë¦¬ê°€ ì™•êµ­ì— í™œë ¥ì„ ë¶ˆì–´ë„£ì—ˆë‹¤."):l>3&&t>3e3&&f.push("ëª¨í—˜ì˜ ì „ë¦¬í’ˆì´ êµ­ê³ ë¥¼ ì±„ì› ë‹¤."),f.length>0?f[0]:`${e.day}ì¼ì°¨, ì™•êµ­ì€ ì¡°ìš©íˆ í•˜ë£¨ë¥¼ ë³´ëƒˆë‹¤.`};return{narratives:e,adventureCount:a,loadNarratives:()=>{{const t=localStorage.getItem("narratives");t&&(e.value=JSON.parse(t));const s=localStorage.getItem("adventureCount");s&&(a.value=parseInt(s))}},saveNarratives:t,onAdventureComplete:o=>{if(a.value++,a.value%3==0){const a={timestamp:Date.now(),day:o.day,text:s(o),gameState:{morale:o.morale,gold:o.gold,food:o.food,soldiers:o.soldiers,victories:o.victories,defeats:o.defeats}};return e.value.push(a),t(),a.text}return null},resetNarratives:()=>{e.value=[],a.value=0,t()}}})(),{adventureState:Fa,moveCompletedNodeId:Wa,currentNode:Ka,startAdventure:Ya,moveToNode:Qa,completeNode:Xa,completeAdventure:Za,retreatAdventure:et,rollDice:at,useNextDice:tt,startAutoMove:st,selectPath:ot}=u(ma.value.resources,xe),lt=()=>{fe("base",{loop:!0,volume:.3}),it.value=!1,ct.value=!1,et();const e=Ha({day:ma.value.day,morale:ma.value.resources.morale,gold:ma.value.resources.gold,food:ma.value.resources.food,soldiers:ma.value.resources.soldiers,victories:ma.value.victories,defeats:ma.value.defeats});e&&setTimeout(()=>{xe(`ğŸ“– ìƒˆë¡œìš´ ì—­ì‚¬ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤: "${e}"`,"info")},1e3)},rt=b(!1),nt=b(!1),it=b(!1),ct=b(!1),ut=b(!1),dt=async()=>{ut.value=!0,await new Promise(e=>setTimeout(e,1e3)),at(),ut.value=!1,xe("ì£¼ì‚¬ìœ„ 3ê°œ ìˆ«ì ìƒì„±! í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.","success")},mt=()=>{it.value=!1,ct.value=!0,setTimeout(()=>{const e=tt();xe(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),st(e)},300)},vt=()=>{const e=tt();xe(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),st(e)},pt=()=>{if(fe("adventure",{loop:!0,volume:.3}),Fa.value.nodes.length>0)Fa.value.active=!0,Fa.value.result=void 0,Fa.value.diceResults.length>0&&Fa.value.currentDiceIndex<Fa.value.diceResults.length?(ct.value=!0,it.value=!1,setTimeout(()=>{Qt()},1e3)):(it.value=!0,ct.value=!1);else{Ya(),it.value=!0,ct.value=!1;localStorage.getItem("adventureTutorialCompleted")||setTimeout(()=>{Da.value=!0},1e3)}},ft=b(!1),gt=b({enemyName:"",enemyPower:0,battleType:"normal"}),bt=b([]),ht=b(!1),yt=b(!1),xt=b(!1),{currentBattle:wt,isScrolling:_t,loadBattleRecords:Ct,selectBattleType:kt,startStoryBattle:Et,closeBattle:St,currentBattleMode:Dt,useActiveCard:Rt,usedActiveCards:Tt,attackerScore:It,defenderScore:$t,isPaused:jt,cardSelectionTime:Pt,stopCardSelectionTimer:At,manualPauseBattle:Lt,manualResumeBattle:Mt}=d({kingdom:ma,enemyKingdoms:g,permanentEffects:be,empire:va,showNotification:xe,synergyBattleEffects:ua,isWeeklyInvasion:ht,showReincarnationModal:Ma,selectedBattleCards:bt,battleActiveCards:qe}),Ot=()=>{if(!wt.value)return;jt.value||Lt();const e=It.value>$t.value;wt.value.result=e?"victory":"defeat";const a={turn:999,generalName:"ì‹¬íŒê´€",action:"ì „íˆ¬ ì¢…ë£Œ",success:!0,message:"",story:e?`ğŸ‰ ${wt.value.attacker.kingdomName}ì˜ ìŠ¹ë¦¬! (${It.value} vs ${$t.value})`:`ğŸ˜” ${wt.value.defender.kingdomName}ì˜ ìŠ¹ë¦¬... (${It.value} vs ${$t.value})`,narrativeType:"narration"};wt.value.log.push(a),setTimeout(()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)},100)},Nt=()=>{const e=wt.value?.result,a=Dt.value;if(wt.value&&e){const t={timestamp:Date.now(),result:e,enemyName:wt.value.defender.kingdomName,battleType:a||"pve",day:ma.value.day,score:{player:It.value,enemy:$t.value}};Sa(t)}St(),fe(Fa?.value?.active?"adventure":"base",{loop:!0,volume:.3}),Fa?.value?.active?ns(e):"defeat"===e&&"empire"===a&&setTimeout(()=>{ht&&(ht.value=!1),Ma.value=!0},500)};Ct(),pe.value&&pe.value.length>0&&pe.value.forEach(e=>{$e.value.some(a=>a.id===e.id)||$e.value.push(e)});const{currentEvent:Bt,currentCrossroad:Vt,drawEventCard:Gt,selectPassiveCard:Ut,selectChoice:qt,closeEvent:zt,selectCrossroadChoice:Jt,closeCrossroad:Ht}=m({kingdom:ma,playerPassiveCards:$e,showPassiveCardSelection:je,availablePassiveCards:Pe,permanentEffects:be,reincarnationData:Oa,showReincarnationModal:Ma,showNotification:xe,calculateProduction:fa,synergyDailyEffects:ta,godGameState:ve}),Ft=()=>{zt()},Wt=e=>{qt(e),Fa.value?.active&&Qt()},Kt=()=>{Ht()},Yt=e=>{Jt(e),Fa.value?.active&&Qt()};$(Ma,e=>{e&&(Ye.value=$e.value)}),$(()=>Wa.value,e=>{e&&setTimeout(()=>{const a=Fa.value.nodes.find(a=>a.id===e);a&&!a.completed?es(a):a&&a.completed&&Qt(),Wa.value=null},100)}),$(()=>Te.value.hasReached4Days,(e,a)=>{if(e&&!a){localStorage.getItem("omen4DaysShown")||setTimeout(()=>{Ta.value="ğŸ“œ ë¶ˆê¸¸í•œ ì§•ì¡°",Ia.value=["-ì•„ë¦¬ì—˜-\n\níí•˜... ì œê°€ ì˜¤ëœ ì‹œê°„ ê³ ëŒ€ ë¬¸í—Œì„ ì—°êµ¬í•œ ê²°ê³¼, ì´ìƒí•œ ì‚¬ì‹¤ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.","ë°¤í•˜ëŠ˜ì˜ ë³„ë“¤ì´ í‰ì†Œì™€ ë‹¤ë¥¸ ë°°ì—´ì„ ë³´ì´ê³  ìˆê³ , í•˜ëŠ˜ì´ ì ì  ë¶‰ê²Œ ë¬¼ë“¤ì–´ê°€ê³  ìˆì–´ìš”.",'ê³ ëŒ€ ì˜ˆì–¸ì„œì— ë”°ë¥´ë©´ ì´ëŠ” "ì„¸ê³„ì˜ ì¢…ë§"ì„ ì•Œë¦¬ëŠ” ì²« ë²ˆì§¸ ì§•ì¡°ë¼ê³  í•©ë‹ˆë‹¤...\n\nì•ìœ¼ë¡œ ë‚¨ì€ ì‹œê°„ì´ ê·¸ë¦¬ ë§ì§€ ì•Šì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤. ì„œë‘˜ëŸ¬ì•¼ í•©ë‹ˆë‹¤!'],Ra.value=!0,localStorage.setItem("omen4DaysShown","true")},1e3)}},{immediate:!0}),$(()=>Te.value.hasReached8Days,(e,a)=>{if(e&&!a){localStorage.getItem("omen8DaysShown")||setTimeout(()=>{Ta.value="âš ï¸ ìœ„ê¸‰í•œ ì§•ì¡°!",Ia.value=["-ì•„ë¦¬ì—˜-\n\níí•˜! í° ì¼ì…ë‹ˆë‹¤!\n\nëŒ€ì§€ì—ì„œ ë¶ˆê¸¸í•œ ì§„ë™ì´ ëŠê»´ì§€ê³ , í•˜ëŠ˜ì˜ ê· ì—´ì´ ì ì  ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤!","ì˜ˆì–¸ì„œì˜ ë‘ ë²ˆì§¸ ì§•ì¡°ê°€ ë‚˜íƒ€ë‚¬ì–´ìš”!\n\nê³³ê³³ì—ì„œ ì‹œê°„ì˜ íë¦„ì´ ì™œê³¡ë˜ê³  ìˆìœ¼ë©°, ì„¸ê³„ì˜ ëì´ ì ì  ê°€ê¹Œì›Œì§€ê³  ìˆìŠµë‹ˆë‹¤...","ì´ì œ ì •ë§ ì‹œê°„ì´ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!\n\nì„œë‘˜ëŸ¬ ì œêµ­ì„ ì •ë³µí•˜ì§€ ì•Šìœ¼ë©´, ëª¨ë“  ê²ƒì´ ë¬´ë„ˆì§ˆì§€ë„ ëª°ë¼ìš”!"],Ra.value=!0,localStorage.setItem("omen8DaysShown","true")},1e3)}},{immediate:!0}),$(()=>Te.value.isExpired,e=>{e&&(Ta.value="ğŸŒ‘ ì„¸ê³„ì˜ ì¢…ë§",Ia.value=["-ì•„ë¦¬ì—˜-\n\níí•˜... ì´ì œ ëì…ë‹ˆë‹¤...\n\nì˜ˆì–¸ì´ í˜„ì‹¤ì´ ë˜ì—ˆì–´ìš”.","ì„¸ê³„ê°€ ì™„ì „íˆ ë¬´ë„ˆì§€ê³  ìˆìŠµë‹ˆë‹¤!\n\ní•˜ëŠ˜ì´ ê°ˆë¼ì§€ê³ , ëŒ€ì§€ê°€ ë¶€ì„œì§€ë©°, ëª¨ë“  ê²ƒì´ ì–´ë‘  ì†ìœ¼ë¡œ ì‚¬ë¼ì§€ê³  ìˆì–´ìš”...","...ì‹œê°„ì„ ë˜ëŒë ¤ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ë°–ì— ì—†ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤."],Ra.value=!0,xe("âš ï¸ í˜„ì‹¤ì‹œê°„ 12ì¼ì´ ê²½ê³¼í–ˆìŠµë‹ˆë‹¤! ì„¸ê³„ê°€ ë©¸ë§í•˜ì—¬ ê²Œì„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤...","error"),setTimeout(()=>{localStorage.removeItem("gameData"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("invasionTracker"),localStorage.removeItem("playerName"),localStorage.removeItem("kingdomName"),localStorage.removeItem("tutorialProgress"),localStorage.removeItem("omen4DaysShown"),localStorage.removeItem("omen8DaysShown"),window.location.href="/story"},3e3))});const Qt=()=>{if(Fa.value.active)if(Fa.value.currentDiceIndex<Fa.value.diceResults.length){(()=>{let e=0,a=0,t=0,s=0;if(ve.value){const o=ve.value.commandmentEffects;o&&(o.gold&&(ma.value.resources.gold+=o.gold,e+=o.gold),o.food&&(ma.value.resources.food+=o.food,a+=o.food),o.morale&&(ma.value.resources.morale=Math.min(100,Math.max(0,ma.value.resources.morale+o.morale)),t+=o.morale),o.military&&(ma.value.resources.soldiers+=o.military,s+=o.military))}if(Ae.value.domestic.filter(e=>null!==e).forEach(o=>{o.effect&&(o.effect.gold&&(ma.value.resources.gold+=o.effect.gold,e+=o.effect.gold),o.effect.food&&(ma.value.resources.food+=o.effect.food,a+=o.effect.food),o.effect.morale&&(ma.value.resources.morale=Math.min(100,Math.max(0,ma.value.resources.morale+o.effect.morale)),t+=o.effect.morale),o.effect.military&&(ma.value.resources.soldiers+=o.effect.military,s+=o.effect.military))}),0!==e||0!==a||0!==t||0!==s){let o="ì´ë™ íš¨ê³¼: ";const l=[];0!==e&&l.push(`ê¸ˆ ${e>0?"+":""}${e}`),0!==a&&l.push(`ì‹ëŸ‰ ${a>0?"+":""}${a}`),0!==t&&l.push(`ë¯¼ì‹¬ ${t>0?"+":""}${t}`),0!==s&&l.push(`ë³‘ë ¥ ${s>0?"+":""}${s}`),o+=l.join(", "),xe(o,"success")}})();const e=tt();xe(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),setTimeout(()=>{st(e)},500)}else ct.value=!1,Fa.value.diceResults=[],Fa.value.currentDiceIndex=0,setTimeout(()=>{it.value=!0,xe("ëª¨ë“  ìˆ«ìë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”.","info")},800)},Xt=()=>{if(Ee.value=!1,Se.value?.rewards){const e=Se.value.rewards;e.gold&&(ma.value.resources.gold+=e.gold),e.food&&(ma.value.resources.food+=e.food),e.soldiers&&(ma.value.resources.soldiers+=e.soldiers)}Se.value=null},Zt=e=>{Ut(e),Fa.value?.active&&setTimeout(()=>{Qt()},500)},es=e=>{switch(Qa(e.id),e.type){case"start":const a=Fa.value.nodes.find(a=>a.id===e.id);a&&(a.status="completed",a.completed=!0),is(),Fa.value.active&&Qt();break;case"battle":case"elite":case"boss":e.enemy&&("boss"===e.type&&(yt.value=!0),gt.value={enemyName:e.enemy.name,enemyPower:e.enemy.power,battleType:"boss"===e.type?"empire":"normal"},ft.value=!0);break;case"event":const t=Fa.value.nodes.find(a=>a.id===e.id);t&&(t.status="completed",t.completed=!0),Fa.value.active?Gt():is();break;case"shop":rt.value=!0;break;case"rest":nt.value=!0;break;case"treasure":const s={gold:Math.floor(300*Math.random())+200,food:Math.floor(200*Math.random())+100,cards:p(1)};Xa(s),xe(`ğŸ’ ë³´ë¬¼ ë°œê²¬! ê¸ˆ +${s.gold}, ì‹ëŸ‰ +${s.food}`,"success");const o=Fa.value.nodes.find(a=>a.id===e.id);o&&(o.status="completed",o.completed=!0),is(),Fa.value.active&&Qt()}},as=e=>{if(Fa.value.isSelectingPath){if(Fa.value.availablePaths.some(a=>a.id===e.id)){ot(e.id);const a={battle:"âš”ï¸",elite:"ğŸ”¥",boss:"ğŸ‘‘",event:"â“",shop:"ğŸª",rest:"ğŸ•ï¸",treasure:"ğŸ’",start:"ğŸšª"}[e.type]||"â¡ï¸";xe(`${a} ë°©í–¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!`,"info")}else xe("ì„ íƒ ê°€ëŠ¥í•œ ê²½ë¡œê°€ ì•„ë‹™ë‹ˆë‹¤.","error");return}if(e.completed){const a=Fa.value.nodes.find(e=>e.id===Fa.value.currentNodeId);return void(a&&a.connections.includes(e.id)?(Qa(e.id),xe("ì´ë¯¸ ì™„ë£Œí•œ ì¹¸ìœ¼ë¡œ ë˜ëŒì•„ì™”ìŠµë‹ˆë‹¤.","info")):xe("í˜„ì¬ ìœ„ì¹˜ì™€ ì¸ì ‘í•œ ì¹¸ë§Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","error"))}"available"!==e.status?xe("ì•„ì§ ê°ˆ ìˆ˜ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤.","error"):xe("ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì„œ ì´ë™í•´ì£¼ì„¸ìš”!","info")},ts=()=>{rt.value=!1,Ka.value&&(Ka.value.status="completed",Ka.value.completed=!0,Ka.value.connections.forEach(e=>{const a=Fa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),is(),Fa.value.active&&Qt())},ss=e=>{let a=!1;switch(e){case"soldiers":ma.value.resources.gold>=400&&(ma.value.resources.gold-=400,ma.value.resources.soldiers+=200,xe("ë³‘ì‚¬ 200ëª… ëª¨ì§‘!","success"),a=!0);break;case"food":ma.value.resources.gold>=200&&(ma.value.resources.gold-=200,ma.value.resources.food+=500,xe("ì‹ëŸ‰ 500 êµ¬ë§¤!","success"),a=!0);break;case"card":ma.value.resources.gold>=300&&(ma.value.resources.gold-=300,Pe.value=p(3),je.value=!0,xe("ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!","info"),a=!0);break;case"heal":if(ma.value.resources.food>=200){ma.value.resources.food-=200;const e=Math.floor(.1*Fa.value.startingResources.soldiers);ma.value.resources.soldiers+=e,xe(`ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success"),a=!0}}a&&"card"!==e&&ts()},os=e=>{switch(e){case"heal":const e=Math.floor(.2*Fa.value.startingResources.soldiers);ma.value.resources.soldiers+=e,xe(`ğŸ•ï¸ íœ´ì‹ìœ¼ë¡œ ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success");break;case"remove-card":xe("ğŸ—‘ï¸ ì¹´ë“œ ì •ë¦¬ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤","info");break;case"meditate":const a=Math.floor(200*Math.random())+100,t=Math.floor(150*Math.random())+50;ma.value.resources.gold+=a,ma.value.resources.food+=t,xe(`ğŸ§˜ ëª…ìƒ... ê¸ˆ +${a}, ì‹ëŸ‰ +${t}`,"success")}nt.value=!1,Ka.value&&(Ka.value.status="completed",Ka.value.completed=!0,Ka.value.connections.forEach(e=>{const a=Fa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),is(),Fa.value.active&&Qt())},ls=()=>{ft.value=!1,Fa.value?.active&&Ka.value&&(Ka.value.status="completed",Ka.value.completed=!0,yt.value&&(yt.value=!1),setTimeout(()=>{Qt()},300))},rs=()=>{ft.value=!1,We();sa(Ae.value.battle).forEach(e=>{He(e)}),Et(gt.value.enemyName,gt.value.enemyPower,gt.value.battleType)},ns=e=>{if(Ka.value&&Ka.value.enemy)if(yt.value)if("victory"===e){const e={gold:5e3,food:3e3,soldiers:1e3};ma.value.resources.gold+=e.gold,ma.value.resources.food+=e.food,ma.value.resources.soldiers+=e.soldiers,xe(`ğŸ‘‘ ë³´ìŠ¤ ì²˜ì¹˜! ê¸ˆ +${e.gold}, ì‹ëŸ‰ +${e.food}, ë³‘ë ¥ +${e.soldiers}`,"success"),Za(),setTimeout(()=>{yt.value=!1,xt.value=!0,Ma.value=!0},1e3)}else setTimeout(()=>{yt.value=!1,xt.value=!1,Ma.value=!0},500);else if("victory"===e){Xa(Ka.value.enemy.rewards),xe(`ìŠ¹ë¦¬! ê¸ˆ +${Ka.value.enemy.rewards.gold}, ì‹ëŸ‰ +${Ka.value.enemy.rewards.food}`,"success");const e=Ka.value.enemy.rewards.cards&&Ka.value.enemy.rewards.cards.length>0;e&&(Pe.value=Ka.value.enemy.rewards.cards,je.value=!0),Ka.value.status="completed",Ka.value.completed=!0,Ka.value.connections.forEach(e=>{const a=Fa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),is(),Fa.value.active&&!e?Qt():Fa.value.active}else{const e=Math.floor(.3*ma.value.resources.soldiers);ma.value.resources.soldiers=Math.max(0,ma.value.resources.soldiers-e),xe(`íŒ¨ë°°... ë³‘ë ¥ ${e}ëª… ì†ì‹¤. ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤.`,"error"),Ka.value.status="completed",Ka.value.completed=!0,Ka.value.connections.forEach(e=>{const a=Fa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),is(),Fa.value.active&&Qt()}},is=()=>{if(ma.value.day++,Fa.value?.active)return void xe(`${ma.value.day}ì¼ì°¨`,"info");const e=_e(ma.value.day);if(e)return a=e,Se.value=a,void(Ee.value=!0);var a;if(ma.value.day%7==0&&ma.value.day>0&&ma.value.day<42){const e=ma.value.day/7;return xe(`âš”ï¸ ${e}ì£¼ì°¨! ì œêµ­êµ°ì´ ì „ë©´ ì¹¨ëµí•´ì˜µë‹ˆë‹¤!`,"error"),ht.value=!0,void kt("pve","empire")}if(ma.value.day>=42)return xe("ğŸ”„ 42ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),void setTimeout(()=>{localStorage.removeItem("reincarnationData"),localStorage.removeItem("gameData"),localStorage.removeItem("passiveCards"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("tutorialState"),localStorage.removeItem("synergyCards"),xe("ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{window.location.reload()},1e3)},2e3);xe(`${ma.value.day}ì¼ì°¨ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.`,"info")},cs=()=>{wa.value=!1,xe("ì¹´ë“œ êµí™˜ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.","info")},us=(e,a)=>{const t=$e.value.findIndex(a=>a.id===e.id);-1!==t&&($e.value.splice(t,1,a),xe(`${e.name}ì„(ë¥¼) ${a.name}(ìœ¼)ë¡œ êµí™˜í–ˆìŠµë‹ˆë‹¤!`,"success"),wa.value=!1)},ds=e=>$e.value.some(a=>a.id===e.id)?(xe("ì´ë¯¸ ë³´ìœ í•œ ì¹´ë“œì…ë‹ˆë‹¤!","error"),!1):$e.value.length>=f?(xe(`ìµœëŒ€ ${f}ì¥ê¹Œì§€ë§Œ ë³´ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!`,"error"),!1):($e.value.push(e),!0),ms=e=>{ds(e)&&(xe(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success"),wa.value=!1)},vs=h(()=>(Pe.value||[]).filter(e=>"common"===e.rarity||"rare"===e.rarity).slice(0,9)),ps=e=>{let a=0;e.forEach(e=>{ds(e)&&a++}),ke(),xe(`${a}ê°œì˜ ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success")},fs=()=>{Mt(),0===ma.value.day?(ma.value.day=1,xe("âš”ï¸ ì „íˆ¬ ì¤€ë¹„ ì™„ë£Œ! 1ì¼ì°¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤!","success")):xe("âš”ï¸ ì „íˆ¬ ê°€ì´ë“œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},gs=e=>{e&&(At(),Lt())};return j(()=>{{Ve(),(()=>{{const a=localStorage.getItem("battleHistory");if(a)try{Ea.value=JSON.parse(a)}catch(e){Ea.value=[]}}})(),Ja(),fe("base",{loop:!0,volume:.3});let e=!1;const a=()=>{e||(fe("base",{loop:!0,volume:.3}),e=!0,document.removeEventListener("click",a),document.removeEventListener("touchstart",a))};document.addEventListener("click",a,{once:!0}),document.addEventListener("touchstart",a,{once:!0}),setTimeout(()=>{e=!0,document.removeEventListener("click",a),document.removeEventListener("touchstart",a)},3e3)}}),P(()=>{ge()}),(e,a)=>(w(),x("div",oa,[_("video",{ref_key:"bgVideo1",ref:t,autoplay:"",muted:"",playsinline:"",class:E(["absolute inset-0 w-full h-full object-cover z-0 transition-opacity duration-1000 ease-in-out",{"opacity-100":1===S.value,"opacity-0":2===S.value}]),src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/background/base_back_ani.mp4`,onTimeupdate:a[0]||(a[0]=e=>T(1))},null,42,la),_("video",{ref_key:"bgVideo2",ref:y,muted:"",playsinline:"",class:E(["absolute inset-0 w-full h-full object-cover z-0 transition-opacity duration-1000 ease-in-out",{"opacity-100":2===S.value,"opacity-0":1===S.value}]),src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:D(s))().app.baseURL}images/background/base_back_ani.mp4`,onTimeupdate:a[1]||(a[1]=e=>T(2))},null,42,ra),a[22]||(a[22]=_("div",{class:"absolute inset-0 bg-black/40 z-0"},null,-1)),_("div",na,[D(we)?.storyCompleted&&!D(we)?.hasSelectedStartCards?(w(),A(D(V),{key:0,cards:vs.value,onConfirm:ps},null,8,["cards"])):C("",!0),D(Fa)?.active?(w(),A(D(ie),{key:1,show:Da.value,onComplete:Aa,onSkip:La},null,8,["show"])):C("",!0),I(D(ce),{show:Ra.value,title:Ta.value,messages:Ia.value,onClose:a[2]||(a[2]=e=>Ra.value=!1)},null,8,["show","title","messages"]),D(Fa)?.active?C("",!0):(w(),A(he,{key:2,resources:D(ma).resources,timer:D(Te),"current-day":D(ma).day,"reincarnation-count":D(Oa).count,"commandment-effects":Ie.value,onShowResourceHelp:Pa},null,8,["resources","timer","current-day","reincarnation-count","commandment-effects"])),a[21]||(a[21]=_("div",{class:"flex-1"},null,-1)),D(Fa)?.active?C("",!0):(w(),A(De,{key:3,"unlocked-features":D(we)?.unlockedFeatures||[],onShowBattleHistory:a[3]||(a[3]=e=>ka.value=!0),onShowPassiveCards:a[4]||(a[4]=e=>ba.value=!0),onShowCardDeck:a[5]||(a[5]=e=>Ge.value=!0),onShowCardGuide:a[6]||(a[6]=e=>ha.value=!0),onStartNormalBattle:pt,onRecruitSoldiers:ga},null,8,["unlocked-features"])),I(D(q),{event:D(Bt),"current-resources":D(ma).resources,onClose:Ft,onSelectChoice:Wt},null,8,["event","current-resources"]),I(D(z),{crossroad:D(Vt),onClose:Kt,onSelectChoice:Yt},null,8,["crossroad"]),I(D(U),{battle:D(wt),"is-scrolling":D(_t),"battle-active-cards":D(qe),"used-active-cards":D(Tt),"attacker-score":D(It),"defender-score":D($t),"is-paused":D(jt),"card-selection-time":D(Pt),"current-day":D(ma).day,onClose:Nt,onUseActiveCard:D(Rt),onCompleteTutorial:fs,onPauseTutorial:gs,onManualPause:D(Lt),onManualResume:D(Mt),onSkipToResult:Ot},null,8,["battle","is-scrolling","battle-active-cards","used-active-cards","attacker-score","defender-score","is-paused","card-selection-time","current-day","onUseActiveCard","onManualPause","onManualResume"]),I(D(J),{show:D(je),cards:D(Pe),onSelectCard:Zt},null,8,["show","cards"]),I(D(H),{show:Re.value,"owned-active-cards":D(Ue),"battle-active-cards":D(qe),"max-battle-cards":D(ze),onClose:a[7]||(a[7]=e=>Re.value=!1),onAddToDeck:D(He),onRemoveFromDeck:D(Fe)},null,8,["show","owned-active-cards","battle-active-cards","max-battle-cards","onAddToDeck","onRemoveFromDeck"]),I(D(F),{show:D(Ma),"available-cards":Ye.value,"reincarnation-count":D(Oa).count,"highest-day":Math.max(D(Oa).highestDay,D(ma).day),"total-days-played":D(Oa).totalDaysPlayed+D(ma).day,"inherited-cards-count":D(Oa).inheritedCards?.length||0,onSelectCard:Ga,onReincarnateWithoutCard:Ua},null,8,["show","available-cards","reincarnation-count","highest-day","total-days-played","inherited-cards-count"]),I(D(W),{show:ba.value,"passive-cards":D($e),"inherited-card-ids":D(Oa).inheritedCards.map(e=>e.id),onClose:a[8]||(a[8]=e=>ba.value=!1)},null,8,["show","passive-cards","inherited-card-ids"]),I(D(K),{show:ha.value,"player-cards":D($e),onClose:a[9]||(a[9]=e=>ha.value=!1)},null,8,["show","player-cards"]),I(D(ue),{modelValue:Ge.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Ge.value=e),"card-deck":D(Ae),"available-domestic-cards":D(Me),"available-battle-cards":D(Oe),"equipped-cards":D(Le),onEquipCard:a[11]||(a[11]=(e,a,t)=>D(Ne)(e,a,t)),onUnequipCard:a[12]||(a[12]=(e,a)=>D(Be)(e,a))},null,8,["modelValue","card-deck","available-domestic-cards","available-battle-cards","equipped-cards"]),I(D(Y),{show:Ca.value,commandments:D(ve)?.selectedCommandments||[],onClose:a[13]||(a[13]=e=>Ca.value=!1)},null,8,["show","commandments"]),I(D(Q),{show:ka.value,narratives:D(qa),"adventure-count":D(za),onClose:a[14]||(a[14]=e=>ka.value=!1)},null,8,["show","narratives","adventure-count"]),I(D(X),{show:Ee.value,title:Se.value?.title||"",message:Se.value?.message||"",rewards:Se.value?.rewards,urgent:Se.value?.urgent,important:Se.value?.important,final:Se.value?.final,onClose:Xt,onConfirm:Xt},null,8,["show","title","message","rewards","urgent","important","final"]),I(D(Z),{show:D(Xe),cards:D(Ze),onClose:a[15]||(a[15]=e=>Xe.value=!1),onSelectCard:D(da)},null,8,["show","cards","onSelectCard"]),I(D(ee),{show:ya.value,cards:D(Qe),synergies:D(ea),"total-effects":D(aa).totalEffects,onClose:a[16]||(a[16]=e=>ya.value=!1)},null,8,["show","cards","synergies","total-effects"]),I(D(ae),{show:xa.value,onClose:a[17]||(a[17]=e=>xa.value=!1)},null,8,["show"]),I(D(se),{show:$a.value,"resource-type":ja.value,onClose:a[18]||(a[18]=e=>$a.value=!1)},null,8,["show","resource-type"]),I(D(te),{show:wa.value,"current-cards":D($e),"new-cards":_a.value,onClose:a[19]||(a[19]=e=>wa.value=!1),onSkip:cs,onExchange:us,onAdd:ms},null,8,["show","current-cards","new-cards"]),D(Fa)?.active?(w(),A(D(oe),{key:4,nodes:D(Fa)?.nodes||[],"current-node-id":D(Fa)?.currentNodeId||null,"accumulated-rewards":D(Fa)?.accumulatedRewards||{},"visible-cells":D(Fa)?.visibleCells||new Set,"is-selecting-path":D(Fa)?.isSelectingPath||!1,"available-paths":D(Fa)?.availablePaths||[],onNodeClick:as,onRetreat:lt},null,8,["nodes","current-node-id","accumulated-rewards","visible-cells","is-selecting-path","available-paths"])):C("",!0),I(D(le),{show:rt.value,"current-gold":D(ma).resources.gold,"current-food":D(ma).resources.food,onClose:ts,onBuy:ss},null,8,["show","current-gold","current-food"]),I(D(re),{show:nt.value,onClose:a[20]||(a[20]=e=>nt.value=!1),onSelect:os},null,8,["show"]),I(D(ne),{show:ft.value,"enemy-name":gt.value.enemyName,"enemy-power":gt.value.enemyPower,"player-power":D(ma).resources.soldiers,"deck-battle-cards":D(Ae).battle,"is-boss-battle":yt.value,onConfirm:rs,onCancel:ls},null,8,["show","enemy-name","enemy-power","player-power","deck-battle-cards","is-boss-battle"]),I(D(de),{show:it.value,"dice-results":D(Fa)?.diceResults||[],"current-index":D(Fa)?.currentDiceIndex||0,"is-rolling":ut.value,onRoll:dt,onUseNext:vt,onConfirm:mt},null,8,["show","dice-results","current-index","is-rolling"]),I(D(me),{show:ct.value,"dice-results":D(Fa)?.diceResults||[],"current-index":D(Fa)?.currentDiceIndex||0},null,8,["show","dice-results","current-index"]),I(O,{name:"notification"},{default:M(()=>[D(ye)?(w(),x("div",{key:0,class:E(["fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px]",{"bg-green-600 border-2 border-green-400":"success"===D(ye).type,"bg-red-600 border-2 border-red-400":"error"===D(ye).type,"bg-blue-600 border-2 border-blue-400":"info"===D(ye).type}])},[_("span",ia,k("success"===D(ye).type?"âœ“":"error"===D(ye).type?"âœ—":"â„¹"),1),_("span",ca,k(D(ye).message),1)],2)):C("",!0)]),_:1})])]))}});export{ua as default};
