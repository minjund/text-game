import{s as t,u as e}from"./tGAXIjMb.js";import{d as l,b as o,w as s,G as n,o as a,q as i,k as u,u as r,f as c,j as d,l as v,F as m,x as p,C as g,n as h,v as b,p as f,T as w}from"./DpePsv-0.js";import{_ as x}from"#entry";const y={key:0,class:"fixed inset-0 z-[9999] pointer-events-none"},k={class:"flex items-end gap-2"},T={class:"animate-bounce-slow flex-shrink-0"},S=["src"],C={class:"relative flex-1"},B={class:"relative p-2.5 min-h-[100px]"},L=["src"],_={class:"relative z-10 text-left px-2 py-1"},q={class:"text-xs font-bold text-white mb-0.5 drop-shadow-lg"},j={class:"text-[10px] leading-relaxed text-white mb-1.5 drop-shadow-md"},z=l({__name:"GameAdventureTutorial",props:{show:{type:Boolean}},emits:["complete","skip","highlightButton"],setup(l,{emit:x}){const z=l,H=x,I=o(0),R=o(null),E=o(!1),A=[{title:"ëª¨í—˜ì˜ ì‹œìž‘! ðŸ—ºï¸",message:"ì§€ë„ë¥¼ í´ë¦­í•´ì„œ ë‹¤ìŒ ë…¸ë“œë¡œ ì´ë™í•  ìˆ˜ ìžˆì–´ìš”. ë¹›ë‚˜ëŠ” ë…¸ë“œë¥¼ í´ë¦­í•´ë³´ì„¸ìš”!",targetButton:"click-node",buttonSelector:null,noHighlight:!0,waitTime:5e3},{title:"ë…¸ë“œ ì¢…ë¥˜ ì•ˆë‚´ ðŸ“",message:"âš”ï¸ì „íˆ¬, ðŸªìƒì , ðŸ•ï¸íœ´ì‹ì²˜, ðŸ’Žë³´ë¬¼, â“ì´ë²¤íŠ¸, ðŸ”±ë³´ìŠ¤ ë“± ë‹¤ì–‘í•œ ë…¸ë“œê°€ ìžˆì–´ìš”!",targetButton:"node-types",buttonSelector:null,noHighlight:!0,waitTime:4e3},{title:"ì² ìˆ˜í•˜ê¸° ðŸšª",message:'ì–¸ì œë“ ì§€ ìš°ì¸¡ ìƒë‹¨ì˜ "ë– ë‚˜ê¸°" ë²„íŠ¼ì„ ëˆŒëŸ¬ ëª¨í—˜ì„ ì¢…ë£Œí•˜ê³  ë³´ìƒì„ ë°›ì„ ìˆ˜ ìžˆì–´ìš”!',targetButton:"retreat-info",buttonSelector:null,noHighlight:!0,isLast:!0,waitTime:4e3}];let F=null;const G=()=>{const t=document.querySelectorAll(".fixed.inset-0");for(const e of t){const t=e;if("9999"===getComputedStyle(t).zIndex)continue;if("none"===getComputedStyle(t).display||0===t.offsetHeight)continue;const l=t.querySelectorAll("button");for(const e of l){const t=e;if(t.querySelector("svg")||t.textContent?.includes("Ã—")||t.textContent?.includes("âœ•")||t.className.includes("close"))return t}}return null},M=(t=0)=>{if(!z.show||I.value>=A.length)return void(R.value=null);const e=A[I.value];if(e.noHighlight)return R.value=null,void(e.waitTime&&setTimeout(()=>{N()},e.waitTime));let l=null;if("close-modal"===e.targetButton?l=G():e.buttonSelector&&(l=document.querySelector(e.buttonSelector)?.closest("button")),l){const t=l.getBoundingClientRect();R.value={top:t.top,left:t.left,width:t.width,height:t.height}}else t<20?setTimeout(()=>{M(t+1)},300):R.value=null},$=()=>{const t=document.querySelectorAll(".fixed.inset-0");for(const e of t){const t=e;if("9999"!==getComputedStyle(t).zIndex&&("none"!==getComputedStyle(t).display&&t.offsetHeight>0))return!0}return!1},O=()=>{E.value=$()},U=e=>{F&&F.disconnect();let l=0;const o=t(()=>{l++;const t=$();E.value=t,e&&t?(clearInterval(o),setTimeout(()=>{N()},300)):e||t||(clearInterval(o),setTimeout(()=>{N()},300)),l>=50&&clearInterval(o)},100);F=new MutationObserver(()=>{O()}),F.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]})},N=()=>{if(I.value<A.length-1){I.value++;const t="close-modal"===A[I.value].targetButton?300:100;setTimeout(()=>{M(),D()},t)}else H("complete")},D=(t=0)=>{const e=A[I.value];if(e.noHighlight)return;let l=null;"close-modal"===e.targetButton?l=G():e.buttonSelector&&(l=document.querySelector(e.buttonSelector)?.closest("button")),l?(l.removeEventListener("click",K,!0),l.addEventListener("click",K,!0)):t<20&&setTimeout(()=>{D(t+1)},300)},J=()=>{A.forEach(t=>{let e=null;"close-modal"===t.targetButton?e=G():t.buttonSelector&&(e=document.querySelector(t.buttonSelector)?.closest("button")),e&&e.removeEventListener("click",K,!0)})},K=t=>{const e=A[I.value];"close-modal"!==e.targetButton?e.waitForModal?U(!0):e.waitForModalClose?U(!1):e.isLast?setTimeout(()=>{H("complete")},500):setTimeout(()=>{N()},300):setTimeout(()=>{N()},300)};let P;s(()=>z.show,t=>{t?(I.value=0,setTimeout(()=>{M(),D()},100)):(J(),F&&(F.disconnect(),F=null))});const Q=()=>{clearTimeout(P),P=setTimeout(M,100)};let V=null;return n(()=>{window.addEventListener("resize",Q),V=t(()=>{z.show&&O()},200),z.show&&setTimeout(()=>{M(),D(),O()},100)}),a(()=>{window.removeEventListener("resize",Q),J(),F&&(F.disconnect(),F=null),V&&(clearInterval(V),V=null)}),(t,o)=>(u(),i(w,{name:"fade"},{default:r(()=>[l.show?(u(),c("div",y,[R.value?(u(),c(m,{key:0},[v("div",{class:"absolute left-0 right-0 bg-black/50 pointer-events-auto transition-all duration-300",style:g({top:"0",height:R.value.top+"px"}),onClick:o[0]||(o[0]=p(()=>{},["stop"]))},null,4),v("div",{class:"absolute left-0 right-0 bottom-0 bg-black/50 pointer-events-auto transition-all duration-300",style:g({top:R.value.top+R.value.height+"px"}),onClick:o[1]||(o[1]=p(()=>{},["stop"]))},null,4),v("div",{class:"absolute bg-black/50 pointer-events-auto transition-all duration-300",style:g({left:"0",top:R.value.top+"px",width:R.value.left+"px",height:R.value.height+"px"}),onClick:o[2]||(o[2]=p(()=>{},["stop"]))},null,4),v("div",{class:"absolute right-0 bg-black/50 pointer-events-auto transition-all duration-300",style:g({left:R.value.left+R.value.width+"px",top:R.value.top+"px",height:R.value.height+"px"}),onClick:o[3]||(o[3]=p(()=>{},["stop"]))},null,4),v("div",{class:"absolute pointer-events-none transition-all duration-300",style:g({top:R.value.top+"px",left:R.value.left+"px",width:R.value.width+"px",height:R.value.height+"px"})},[...o[6]||(o[6]=[v("div",{class:"absolute inset-0 border-4 border-yellow-400 rounded-lg animate-pulse shadow-lg shadow-yellow-400/50"},null,-1),v("div",{class:"absolute inset-0 bg-yellow-400/20 rounded-lg animate-ping"},null,-1)])],4)],64)):d("",!0),R.value?d("",!0):(u(),c("div",{key:1,class:"absolute inset-0 bg-black/50 pointer-events-auto",onClick:o[4]||(o[4]=p(()=>{},["stop"]))})),v("div",{class:h(["absolute right-2 max-w-sm pointer-events-auto z-[10000] transition-all duration-300",E.value?"bottom-4":"bottom-48"])},[v("div",k,[v("div",T,[v("img",{src:`${("useRuntimeConfig"in t?t.useRuntimeConfig:b(e))().app.baseURL}images/character/assistant.png`,alt:"ì–´ì‹œìŠ¤í„´íŠ¸",class:"w-24 h-24 object-contain drop-shadow-2xl"},null,8,S)]),v("div",C,[v("div",B,[v("img",{src:`${("useRuntimeConfig"in t?t.useRuntimeConfig:b(e))().app.baseURL}images/object/chat_window.png`,alt:"chat background",class:"absolute inset-0 w-full h-full object-fill"},null,8,L),v("div",_,[v("h2",q,f(A[I.value].title),1),v("p",j,f(A[I.value].message),1),v("button",{onClick:o[5]||(o[5]=e=>t.$emit("skip")),class:"text-[9px] text-white hover:text-yellow-200 underline drop-shadow-md"}," ê±´ë„ˆë›°ê¸° ")])])])])],2)])):d("",!0)]),_:1}))}}),H=Object.assign(x(z,[["__scopeId","data-v-512ff373"]]),{__name:"GameAdventureTutorial"});export{H as default};
