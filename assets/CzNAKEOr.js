const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CORv2xfF.js","./CresfOYy.js","./D7Ny2TdZ.js","./BoENP0IT.js","./CrS8unBr.js","./entry.CMGf5R0z.css","./GameBattleModal.BFNsUqXW.css","./Dw_NZvNA.js","./BiTWWuMX.js","./Bv_2tq-K.js","./By0l1tXg.js","./B9Vsk9xz.js","./GameActiveCardsModal.B6r-ilfv.css","./Cp2h6MTz.js","./GameReincarnationModal.DNWq0NAG.css","./Csb8YTTv.js","./GamePassiveCardsModal.irA25d0s.css","./DW2Uz6Gt.js","./GameCardCollection.bWGxB5-_.css","./bxIo8-Lu.js","./GameCommandmentsModal.BpQvi8cF.css","./C6djHEgi.js","./GameAdvisorModal.DXEfPlk2.css","./CxWd_POK.js","./GameSynergyCardSelection.ZhzXQiyu.css","./BIWvSIiL.js","./GameSynergyCollection.C7znwYRa.css","./knVPlOzb.js","./GameSynergyGuide.BHmzaapF.css","./FG53DlZS.js","./GameDailyCardExchange.CMiIgq1D.css","./BYdGThJW.js","./GameResourceHelp.N43b38by.css","./BTFLJ6AF.js","./GameAdventureMap.KMmYI9En.css","./BpoZAbiR.js","./GameAdventureShop.CBia5tev.css","./zaFnNiMI.js","./GameAdventureRest.xCSJfAfh.css","./BMkUeJsj.js","./GameBattleCardSelection.Dcuhs2Yz.css","./zPyfIa-e.js","./GameInteractiveTutorial.CpJ4AFAL.css","./BLps9cBi.js","./MezUD9L_.js","./GameDiceRoulette.7Rpv6TWj.css","./dQM_kQ1v.js"])))=>i.map(i=>d[i]);
import{_ as e,a}from"#entry";import{s as t,b as s,e as o,g as l,i as r,k as n,l as i,m as c,o as d,q as u,t as m,M as v,v as p,x as f,y as g}from"./CrS8unBr.js";import{b,c as h,d as y,f as x,k as w,l as _,j as C,N as k,p as E,n as S,x as R,J as D,y as $,w as T,A as I,o as P,q as j,O as A,u as L,T as M}from"./CresfOYy.js";import{u as O}from"./0vYvbZSD.js";const B=()=>{const e=b((()=>{{const e=localStorage.getItem("gameStartTime");if(e)return new Date(e);{const e=new Date;return localStorage.setItem("gameStartTime",e.toISOString()),e}}})()),a=h(()=>{const a=new Date(e.value);return a.setDate(a.getDate()+12),a}),s=b({days:0,hours:0,minutes:0,seconds:0,isExpired:!1}),o=()=>{const e=new Date,t=a.value.getTime()-e.getTime();s.value=t<=0?{days:0,hours:0,minutes:0,seconds:0,isExpired:!0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),isExpired:!1}};return o(),t(o,1e3),{gameStartTime:e,gameEndTime:a,remainingTime:s,updateRemainingTime:o,GAME_DURATION_DAYS:12}},N=["src","alt"],V={key:1,class:"resource-icon"},G={key:0,class:"resource-label"},U={class:"resource-value"},q=["title"],z=y({__name:"ResourceDisplay",props:{icon:{},label:{},value:{},variant:{default:"default"},showPlus:{type:Boolean,default:!1},helpEnabled:{type:Boolean,default:!0}},emits:["show-help"],setup(e){const a=e,t=h(()=>{const e=Math.floor(a.value);return a.showPlus&&e>0?`+${e}`:e.toLocaleString()}),o=h(()=>({"ì‹ëŸ‰":"food.png","ê¸ˆ":"gold.png","ë¯¼ì‹¬":"public_opinion.png","ë³‘ì‚¬":"soldier.png"}[a.label]||null));return(a,l)=>(w(),x("div",{class:S(["resource-display",e.variant,"group relative",o.value?"flex-col items-center":""])},[o.value?(w(),x("img",{key:0,src:`${("useRuntimeConfig"in a?a.useRuntimeConfig:k(s))().app.baseURL}images/mark/${o.value}`,alt:e.label,class:"resource-icon-img"},null,8,N)):(w(),x("span",V,E(e.icon),1)),_("div",{class:S(["resource-info",o.value?"items-center":""])},[o.value?C("",!0):(w(),x("span",G,E(e.label),1)),_("span",U,E(t.value),1)],2),e.helpEnabled?(w(),x("button",{key:2,onClick:l[0]||(l[0]=e=>a.$emit("show-help")),class:S(["help-button",`help-${e.label.toLowerCase()}`]),title:`${e.label} ë„ì›€ë§`}," ? ",10,q)):C("",!0)],2))}}),H=Object.assign(e(z,[["__scopeId","data-v-4e1a8807"]]),{__name:"GameResourceDisplay"}),J={class:"fixed top-0 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-1.5 pointer-events-none w-full max-w-md"},F={class:"flex flex-col gap-1.5 relative z-10"},W={class:"grid grid-cols-4 gap-1 pointer-events-auto"},K={class:"flex justify-between gap-1.5"},Y={class:"flex-1 pointer-events-auto"},Q={class:"resource-display compact border-blue-500"},X={class:"resource-info"},Z={class:"resource-value"},ee={class:"flex-1 pointer-events-auto"},ae={class:"resource-display compact border-amber-500"},te={class:"resource-info"},se={class:"resource-value text-amber-300"},oe={key:0,class:"pointer-events-auto"},le={class:"resource-value text-xs w-full animate-pulse"},re={key:1,class:"pointer-events-auto"},ne={class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 border-2 border-indigo-400 rounded-lg p-2 sm:p-2.5 backdrop-blur-sm shadow-lg"},ie={class:"flex flex-wrap gap-1.5 sm:gap-2"},ce=y({__name:"GameMobileResources",props:{resources:{},timer:{},currentDay:{},reincarnationCount:{default:0},commandmentEffects:{default:null}},emits:["show-resource-help"],setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),o=h(()=>""),l=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,r)=>(w(),x("div",J,[_("div",{class:"backdrop-blur-md border-b border-gray-700 px-2 py-2 bg-cover bg-center bg-no-repeat relative min-h-[120px]",style:D({backgroundImage:`url(${("useRuntimeConfig"in a?a.useRuntimeConfig:k(s))().app.baseURL}images/background/header_back_ground.png)`})},[r[9]||(r[9]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",F,[_("div",W,[R(H,{icon:"ğŸ–",label:"ì‹ëŸ‰",value:e.resources.food,variant:"compact",onShowHelp:r[0]||(r[0]=e=>a.$emit("show-resource-help","food"))},null,8,["value"]),R(H,{icon:"ğŸ’°",label:"ê¸ˆ",value:e.resources.gold,variant:"compact",onShowHelp:r[1]||(r[1]=e=>a.$emit("show-resource-help","gold"))},null,8,["value"]),R(H,{icon:"âš”ï¸",label:"ë³‘ì‚¬",value:e.resources.soldiers,variant:"compact",onShowHelp:r[2]||(r[2]=e=>a.$emit("show-resource-help","soldiers"))},null,8,["value"]),R(H,{icon:"â¤ï¸",label:"ë¯¼ì‹¬",value:e.resources.morale,variant:"compact",onShowHelp:r[3]||(r[3]=e=>a.$emit("show-resource-help","morale"))},null,8,["value"])]),_("div",K,[_("div",Y,[_("div",Q,[r[5]||(r[5]=_("span",{class:"resource-icon"},"ğŸ“…",-1)),_("div",X,[r[4]||(r[4]=_("span",{class:"resource-label"},"ê²Œì„ ì¼ì°¨",-1)),_("span",Z,E(e.currentDay)+"ì¼",1)])])]),_("div",ee,[_("div",ae,[r[7]||(r[7]=_("span",{class:"resource-icon"},"â™»ï¸",-1)),_("div",te,[r[6]||(r[6]=_("span",{class:"resource-label"},"í™˜ìƒ",-1)),_("span",se,E(e.reincarnationCount)+"íšŒ",1)])])])]),o.value?(w(),x("div",oe,[_("div",{class:S(["resource-display compact text-center",t.value<=1?"border-red-500 bg-red-900/30":"border-yellow-500 bg-yellow-900/20"])},[_("span",le,E(o.value),1)],2)])):C("",!0),e.commandmentEffects&&l.value?(w(),x("div",re,[_("div",ne,[r[8]||(r[8]=_("div",{class:"flex items-center gap-2 mb-1.5"},[_("span",{class:"text-xl sm:text-2xl"},"âš–ï¸"),_("span",{class:"text-xs sm:text-sm font-bold text-indigo-200"},"ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©)")],-1)),_("div",ie,[0!==e.commandmentEffects.morale?(w(),x("span",{key:0,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+E(e.commandmentEffects.morale>0?"+":"")+E(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("span",{key:1,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+E(e.commandmentEffects.gold>0?"+":"")+E(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("span",{key:2,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+E(e.commandmentEffects.military>0?"+":"")+E(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("span",{key:3,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+E(e.commandmentEffects.food>0?"+":"")+E(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("span",{key:4,class:S(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+E(e.commandmentEffects.population>0?"+":"")+E(e.commandmentEffects.population),3)):C("",!0)])])])):C("",!0)])],4)]))}}),de=Object.assign(e(ce,[["__scopeId","data-v-40745451"]]),{__name:"GameMobileResources"}),ue={class:"grid grid-cols-3 gap-1.5 relative z-10"},me=["src"],ve=["src"],pe=["src"],fe=["src"],ge=["src"],be=["src"],he=y({__name:"GameMobileActions",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",{class:"fixed bottom-0 left-1/2 -translate-x-1/2 border-t border-gray-700 p-2 z-50 w-full max-w-md bg-cover bg-center bg-no-repeat relative",style:D({backgroundImage:`url(${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/background/under_back_ground.png)`})},[a[6]||(a[6]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",ue,[_("button",{onClick:a[0]||(a[0]=a=>e.$emit("show-commandments")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/commandment.png`,alt:"ê³„ëª…",class:"w-full h-full object-contain"},null,8,me)]),_("button",{onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/card.png`,alt:"ì¹´ë“œ",class:"w-full h-full object-contain"},null,8,ve)]),_("button",{onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/deck.png`,alt:"ë±",class:"w-full h-full object-contain"},null,8,pe)]),_("button",{onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/encyclopedia.png`,alt:"ë„ê°",class:"w-full h-full object-contain"},null,8,fe)]),_("button",{onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/adventure.png`,alt:"ëª¨í—˜",class:"w-full h-full object-contain"},null,8,ge)]),_("button",{onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-16"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/button/recruitment.png`,alt:"ëª¨ì§‘",class:"w-full h-full object-contain"},null,8,be)])])],4))}),ye=Object.assign(he,{__name:"GameMobileActions"}),xe={class:"hidden md:flex bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700 px-8 py-4"},we={class:"max-w-7xl mx-auto w-full flex items-center justify-between"},_e={class:"flex items-center gap-4"},Ce={class:"text-2xl font-bold text-amber-100"},ke={class:"text-sm text-slate-400"},Ee={class:"flex items-center gap-6"},Se={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Re={class:"text-lg font-bold"},De={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},$e={class:"text-lg font-bold"},Te={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},Ie={class:"text-lg font-bold"},Pe={class:"flex items-center gap-2 bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-2 relative group"},je={class:"text-lg font-bold"},Ae=y({__name:"GameDesktopHeader",props:{kingdomName:{},day:{},resources:{}},emits:["show-resource-help"],setup:e=>(a,t)=>(w(),x("header",xe,[_("div",we,[_("div",_e,[t[4]||(t[4]=_("div",{class:"text-4xl"},"ğŸ‘‘",-1)),_("div",null,[_("h1",Ce,E(e.kingdomName),1),_("p",ke,"ì œ "+E(e.day)+"ì¼ í†µì¹˜",1)])]),_("div",Ee,[_("div",Se,[t[6]||(t[6]=_("span",{class:"text-2xl"},"ğŸ–",-1)),_("div",null,[t[5]||(t[5]=_("p",{class:"text-xs text-slate-400"},"ì‹ëŸ‰",-1)),_("p",Re,E(e.resources.food),1)]),_("button",{onClick:t[0]||(t[0]=e=>a.$emit("show-resource-help","food")),class:"absolute -top-1 -right-1 w-5 h-5 bg-green-600 hover:bg-green-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ì‹ëŸ‰ ë„ì›€ë§"}," ? ")]),_("div",De,[t[8]||(t[8]=_("span",{class:"text-2xl"},"ğŸ’°",-1)),_("div",null,[t[7]||(t[7]=_("p",{class:"text-xs text-slate-400"},"ê¸ˆí™”",-1)),_("p",$e,E(e.resources.gold),1)]),_("button",{onClick:t[1]||(t[1]=e=>a.$emit("show-resource-help","gold")),class:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-600 hover:bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ê¸ˆ ë„ì›€ë§"}," ? ")]),_("div",Te,[t[10]||(t[10]=_("span",{class:"text-2xl"},"âš”ï¸",-1)),_("div",null,[t[9]||(t[9]=_("p",{class:"text-xs text-slate-400"},"ë³‘ì‚¬",-1)),_("p",Ie,E(e.resources.soldiers),1)]),_("button",{onClick:t[2]||(t[2]=e=>a.$emit("show-resource-help","soldiers")),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 hover:bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë³‘ì‚¬ ë„ì›€ë§"}," ? ")]),_("div",Pe,[t[12]||(t[12]=_("span",{class:"text-2xl"},"â¤ï¸",-1)),_("div",null,[t[11]||(t[11]=_("p",{class:"text-xs text-slate-400"},"ì‚¬ê¸°",-1)),_("p",je,E(e.resources.morale),1)]),_("button",{onClick:t[3]||(t[3]=e=>a.$emit("show-resource-help","morale")),class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-600 hover:bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë¯¼ì‹¬ ë„ì›€ë§"}," ? ")])])])]))});Object.assign(Ae,{__name:"GameDesktopHeader"});const Le={class:"w-80 space-y-4"},Me={class:"text-lg font-bold animate-pulse"},Oe={key:1,class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 backdrop-blur-xl border-2 border-indigo-400 rounded-xl p-4 shadow-lg"},Be={class:"flex flex-wrap gap-2"},Ne=y({__name:"GameLeftSidebar",props:{timer:{},currentDay:{},commandmentEffects:{}},setup(e){const a=e,t=h(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=h(()=>""),o=h(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,l)=>(w(),x("div",Le,[s.value?(w(),x("div",{key:0,class:S(["bg-gradient-to-br border-2 rounded-xl p-4 text-center",t.value<=1?"from-red-900/50 to-rose-900/50 border-red-500":"from-yellow-900/50 to-amber-900/50 border-yellow-500"])},[_("div",Me,E(s.value),1)],2)):C("",!0),e.commandmentEffects&&o.value?(w(),x("div",Oe,[l[0]||(l[0]=_("h3",{class:"text-base font-bold text-indigo-200 mb-3 flex items-center gap-2"},[_("span",{class:"text-2xl"},"âš–ï¸"),$(" ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©) ")],-1)),_("div",Be,[0!==e.commandmentEffects.morale?(w(),x("div",{key:0,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+E(e.commandmentEffects.morale>0?"+":"")+E(e.commandmentEffects.morale),3)):C("",!0),0!==e.commandmentEffects.gold?(w(),x("div",{key:1,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+E(e.commandmentEffects.gold>0?"+":"")+E(e.commandmentEffects.gold),3)):C("",!0),0!==e.commandmentEffects.military?(w(),x("div",{key:2,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+E(e.commandmentEffects.military>0?"+":"")+E(e.commandmentEffects.military),3)):C("",!0),0!==e.commandmentEffects.food?(w(),x("div",{key:3,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+E(e.commandmentEffects.food>0?"+":"")+E(e.commandmentEffects.food),3)):C("",!0),0!==e.commandmentEffects.population?(w(),x("div",{key:4,class:S(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+E(e.commandmentEffects.population>0?"+":"")+E(e.commandmentEffects.population),3)):C("",!0)])])):C("",!0)]))}});Object.assign(Ne,{__name:"GameLeftSidebar"});const Ve=["disabled"],Ge={class:"action-icon"},Ue={class:"action-content"},qe={class:"action-title"},ze={key:0,class:"action-description"},He=y({__name:"ActionButton",props:{icon:{},title:{},description:{},variant:{default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,s=a,o=e=>{t.disabled||s("click",e)};return(a,t)=>(w(),x("button",{class:S(["action-button",e.variant,{"action-button-disabled":e.disabled}]),disabled:e.disabled,onClick:o},[_("div",Ge,E(e.icon),1),_("div",Ue,[_("div",qe,E(e.title),1),e.description?(w(),x("div",ze,E(e.description),1)):C("",!0)])],10,Ve))}}),Je=Object.assign(e(He,[["__scopeId","data-v-1657d8d0"]]),{__name:"GameActionButton"}),Fe={class:"w-80 space-y-3"},We=y({__name:"GameActionPanel",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",Fe,[R(Je,{icon:"âœ¨",title:"ì‹ ì˜ ê³„ëª…",description:"ì‹ ì´ ë‚´ë¦° ê³„ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤",variant:"warning",onClick:a[0]||(a[0]=a=>e.$emit("show-commandments"))}),R(Je,{icon:"ğŸ´",title:"ë³´ìœ  ì¹´ë“œ",description:"ë³´ìœ í•œ íŒ¨ì‹œë¸Œ ì¹´ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards"))}),R(Je,{icon:"ğŸƒ",title:"ì¹´ë“œ ë± ì„¤ì •",description:"ë‚´ì • 3ì¥ + ì „íˆ¬ 3ì¥ì„ ì¥ì°©í•©ë‹ˆë‹¤",variant:"info",onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck"))}),R(Je,{icon:"ğŸ“š",title:"ì¹´ë“œ ë„ê°",description:"ëª¨ë“  ì¹´ë“œì™€ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide"))}),R(Je,{icon:"âš”ï¸",title:"ëª¨í—˜",description:"ì  ì„¸ë ¥ê³¼ ì „íˆ¬ë¥¼ ë²Œì…ë‹ˆë‹¤",variant:"success",onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle"))}),R(Je,{icon:"ğŸ›¡ï¸",title:"ë³‘ë ¥ ëª¨ì§‘",description:"ê¸ˆ 200ìœ¼ë¡œ ë³‘ë ¥ 100 ëª¨ì§‘",variant:"success",onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers"))})]))});Object.assign(We,{__name:"GameActionPanel"});function Ke(e){return e.filter(e=>null!==e).map(e=>function(e){const{effect:a}=e;let t,s="instant_damage",o=0,l="";return"combat"===a.type?a.attackBonus&&a.attackBonus>0?(s="power_boost",o=a.attackBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ê³µê²©ë ¥ +${a.attackBonus}%`):a.defenseBonus&&a.defenseBonus>0?(s="defense_boost",o=a.defenseBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ë°©ì–´ë ¥ +${a.defenseBonus}%`):a.skillPowerBonus&&a.skillPowerBonus>0&&(s="power_boost",o=a.skillPowerBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ìŠ¤í‚¬ ìœ„ë ¥ +${a.skillPowerBonus}%`):"resource"===a.type?a.morale&&a.morale>0?(s="morale_boost",o=Math.min(3*a.morale,30),t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +${o}%`):a.military&&a.military>0?(s="instant_damage",o=Math.min(2*a.military,50),l=`ì ì—ê²Œ ${o}ì˜ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤`):(s="heal",o=15,l="ì•„êµ° ë³‘ë ¥ì´ 15% íšŒë³µë©ë‹ˆë‹¤"):"special"===a.type&&(s="morale_boost",o=20,t=2,l=a.description||"2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +20%"),{id:`converted_${e.id}`,name:e.name,description:e.description,icon:e.icon,image:e.image,rarity:e.rarity,effectType:s,power:o,duration:t,battleDescription:l}}(e))}const Ye={class:"min-h-screen text-white flex flex-col overflow-hidden relative bg-slate-900"},Qe=["src"],Xe={class:"relative z-10 flex flex-col min-h-screen max-w-md mx-auto w-full bg-black/20"},Ze={class:"text-2xl"},ea={class:"font-semibold"},aa=y({__name:"game",setup(e){const t=A(()=>a(()=>import("./CORv2xfF.js"),__vite__mapDeps([0,1]),import.meta.url)),y=A(()=>a(()=>import("./D7Ny2TdZ.js"),__vite__mapDeps([2,1,3,4,5,6]),import.meta.url)),D=A(()=>a(()=>import("./Dw_NZvNA.js"),__vite__mapDeps([7,1,8,4]),import.meta.url)),$=A(()=>a(()=>import("./Bv_2tq-K.js"),__vite__mapDeps([9,1]),import.meta.url)),N=A(()=>a(()=>import("./By0l1tXg.js"),__vite__mapDeps([10,1]),import.meta.url)),V=A(()=>a(()=>import("./B9Vsk9xz.js"),__vite__mapDeps([11,1,3,4,5,12]),import.meta.url)),G=A(()=>a(()=>import("./Cp2h6MTz.js"),__vite__mapDeps([13,1,3,4,5,14]),import.meta.url)),U=A(()=>a(()=>import("./Csb8YTTv.js"),__vite__mapDeps([15,1,3,4,5,16]),import.meta.url)),q=A(()=>a(()=>import("./DW2Uz6Gt.js"),__vite__mapDeps([17,1,4,3,5,18]),import.meta.url)),z=A(()=>a(()=>import("./bxIo8-Lu.js"),__vite__mapDeps([19,1,3,4,5,20]),import.meta.url)),H=A(()=>a(()=>import("./C6djHEgi.js"),__vite__mapDeps([21,1,3,4,5,22]),import.meta.url)),J=A(()=>a(()=>import("./CxWd_POK.js"),__vite__mapDeps([23,1,3,4,5,24]),import.meta.url)),F=A(()=>a(()=>import("./BIWvSIiL.js"),__vite__mapDeps([25,1,3,4,5,26]),import.meta.url)),W=A(()=>a(()=>import("./knVPlOzb.js"),__vite__mapDeps([27,1,4,3,5,28]),import.meta.url)),K=A(()=>a(()=>import("./FG53DlZS.js"),__vite__mapDeps([29,1,3,4,5,30]),import.meta.url)),Y=A(()=>a(()=>import("./BYdGThJW.js"),__vite__mapDeps([31,1,3,4,5,32]),import.meta.url)),Q=A(()=>a(()=>import("./BTFLJ6AF.js"),__vite__mapDeps([33,1,4,3,5,34]),import.meta.url)),X=A(()=>a(()=>import("./BpoZAbiR.js"),__vite__mapDeps([35,1,3,4,5,36]),import.meta.url)),Z=A(()=>a(()=>import("./zaFnNiMI.js"),__vite__mapDeps([37,1,3,4,5,38]),import.meta.url)),ee=A(()=>a(()=>import("./BMkUeJsj.js"),__vite__mapDeps([39,1,3,4,5,40]),import.meta.url)),ae=A(()=>a(()=>import("./zPyfIa-e.js"),__vite__mapDeps([41,1,3,4,5,42]),import.meta.url)),te=A(()=>a(()=>import("./BLps9cBi.js"),__vite__mapDeps([43,1]),import.meta.url)),se=A(()=>a(()=>import("./MezUD9L_.js"),__vite__mapDeps([44,1,3,4,5,45]),import.meta.url)),oe=A(()=>a(()=>import("./dQM_kQ1v.js"),__vite__mapDeps([46,1]),import.meta.url)),{nationState:le,startCards:re}=O(),ne=b([]),{notification:ie,showNotification:ce}=(()=>{const e=b(null);return{notification:e,showNotification:(a,t="info")=>{e.value={message:a,type:t},setTimeout(()=>{e.value=null},3e3)}}})(),{tutorialState:ue,advanceDay:me,onRecruitSoldiers:ve,completeStartCardSelection:pe,skipTutorial:fe}=o(),ge=b(!1),be=b(null),he=b(!1),{remainingTime:xe}=B(),we=h(()=>{if(!le.value?.selectedCommandments||0===le.value.selectedCommandments.length)return null;const e={morale:0,gold:0,military:0,food:0,population:0};return le.value.selectedCommandments.forEach(a=>{e.morale+=a.effects.morale,e.gold+=a.effects.gold,e.military+=a.effects.military,e.food+=a.effects.food,e.population+=a.effects.population}),e}),{playerPassiveCards:_e,showPassiveCardSelection:Ce,availablePassiveCards:ke}=l(),{cardDeck:Ee,equippedCards:Se,availableDomesticCards:Re,availableBattleCards:De,equipCard:$e,unequipCard:Te,loadDeck:Ie}=(e=>{const a=b({domestic:[null,null,null],battle:[null,null,null]}),t="cardDeck",s=e=>"daily"===e.trigger||"recruit"===e.trigger,o=e=>!0===e.isBattleCard||"battle_start"===e.trigger||"battle_win"===e.trigger||"battle_lose"===e.trigger,l=h(()=>[...a.value.domestic.filter(e=>null!==e),...a.value.battle.filter(e=>null!==e)]),r=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>s(e)&&!a.includes(e.id))}),n=h(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>o(e)&&!a.includes(e.id))}),i=()=>{{const e={domestic:a.value.domestic.map(e=>e?.id||null),battle:a.value.battle.map(e=>e?.id||null)};localStorage.setItem(t,JSON.stringify(e))}};return{cardDeck:a,equippedCards:l,availableDomesticCards:r,availableBattleCards:n,isDomesticCard:s,isBattleCard:o,equipCard:(e,t,r)=>!(r<0||r>2||"domestic"===t&&!s(e)||"battle"===t&&!o(e)||l.value.some(a=>a.id===e.id)||(a.value[t][r]=e,i(),0)),unequipCard:(e,t)=>!(t<0||t>2||(a.value[e][t]=null,i(),0)),saveDeck:i,loadDeck:()=>{{const o=localStorage.getItem(t);if(o)try{const t=JSON.parse(o);a.value.domestic=t.domestic.map(a=>a&&e.value.find(e=>e.id===a)||null),a.value.battle=t.battle.map(a=>a&&e.value.find(e=>e.id===a)||null)}catch(s){}}},resetDeck:()=>{a.value={domestic:[null,null,null],battle:[null,null,null]},i()},getActiveCardsForTrigger:e=>l.value.filter(a=>a.trigger===e)}})(_e),Pe=b(!1),{ownedActiveCards:je,battleActiveCards:Ae,maxBattleCards:Le,loadActiveCards:Me,addToBattleDeck:Oe,removeFromBattleDeck:Be,clearBattleDeck:Ne,grantStarterCards:Ve}=r({showNotification:ce});Me();localStorage.getItem("hasGrantedStarterActiveCards")||0!==je.value.length||(Ve(),localStorage.setItem("hasGrantedStarterActiveCards","true"));T(je,e=>{{const a=e.map(e=>e.id);localStorage.setItem("activeCards",JSON.stringify(a))}},{deep:!0});const Ge=b([]),{playerCards:Ue,showCardSelection:qe,availableCards:ze,activeSynergies:He,totalEffects:Je,dailyEffects:Fe,battleEffects:We,selectCard:aa}=n(),{kingdom:ta,empire:sa,recruitSoldiers:oa,calculateProduction:la}=i(le,ne,ce),ra=()=>{oa(),ve()},na=b(!1),ia=b(!1),ca=b(!1),da=b(!1),ua=b(!1),ma=b([]),va=b(!1),pa=b(!1),fa=b(!1),ga=b(null),ba=e=>{ga.value=e,fa.value=!0},ha=()=>{pa.value=!1,ue.value.tutorialCompleted=!0,ue.value.isActive=!1,localStorage.setItem("tutorialState",JSON.stringify(ue.value)),ce("íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!","success")},{showReincarnationModal:ya,reincarnationData:xa,loadReincarnationData:wa,selectInheritedCard:_a,reincarnateWithoutCard:Ca}=c(ta,_e,le,ce);wa();const ka=e=>{if(Za.value){xa.value.inheritedCards.some(a=>a.id===e.id)||(xa.value.inheritedCards.length>=v&&xa.value.inheritedCards.shift(),xa.value.inheritedCards.push(e)),localStorage.setItem("reincarnationData",JSON.stringify(xa.value)),ce(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤! (ëˆ„ì  ìƒì† ì¹´ë“œ: ${xa.value.inheritedCards.length}ê°œ)`,"success"),ya.value=!1,Za.value=!1}else _a(e)},Ea=()=>{Za.value?(ce("ì¹´ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.","info"),ya.value=!1,Za.value=!1):Ca()},{adventureState:Sa,moveCompletedNodeId:Ra,currentNode:Da,startAdventure:$a,moveToNode:Ta,completeNode:Ia,completeAdventure:Pa,retreatAdventure:ja,rollDice:Aa,useNextDice:La,startAutoMove:Ma,selectPath:Oa}=d(ta.value.resources,ce),Ba=()=>{Ga.value=!1,Ua.value=!1,ja()},Na=b(!1),Va=b(!1),Ga=b(!1),Ua=b(!1),qa=b(!1),za=async()=>{qa.value=!0,await new Promise(e=>setTimeout(e,1e3)),Aa(),qa.value=!1,ce("ë£°ë › 5ê°œ ìˆ«ì ìƒì„±! í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.","success")},Ha=()=>{Ga.value=!1,Ua.value=!0,setTimeout(()=>{const e=La();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Ma(e)},300)},Ja=()=>{const e=La();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Ma(e)},Fa=()=>{Sa.value.nodes.length>0?(Sa.value.active=!0,Sa.value.result=void 0,Sa.value.diceResults.length>0&&Sa.value.currentDiceIndex<Sa.value.diceResults.length?(Ua.value=!0,Ga.value=!1,setTimeout(()=>{Tt()},1e3)):(Ga.value=!0,Ua.value=!1)):($a(),Ga.value=!0,Ua.value=!1)},Wa=b(!1),Ka=b({enemyName:"",enemyPower:0,battleType:"normal"}),Ya=b([]),Qa=b(!1),Xa=b(!1),Za=b(!1),{currentBattle:et,isScrolling:at,loadBattleRecords:tt,selectBattleType:st,startStoryBattle:ot,closeBattle:lt,currentBattleMode:rt,useActiveCard:nt,usedActiveCards:it,attackerScore:ct,defenderScore:dt,isPaused:ut,cardSelectionTime:mt,stopCardSelectionTimer:vt,manualPauseBattle:pt,manualResumeBattle:ft}=u({kingdom:ta,enemyKingdoms:g,permanentEffects:ne,empire:sa,showNotification:ce,synergyBattleEffects:We,isWeeklyInvasion:Qa,showReincarnationModal:ya,selectedBattleCards:Ya,battleActiveCards:Ae}),gt=()=>{if(!et.value)return;ut.value||pt();const e=ct.value>dt.value;et.value.result=e?"victory":"defeat";const a={turn:999,generalName:"ì‹¬íŒê´€",action:"ì „íˆ¬ ì¢…ë£Œ",success:!0,message:"",story:e?`ğŸ‰ ${et.value.attacker.kingdomName}ì˜ ìŠ¹ë¦¬! (${ct.value} vs ${dt.value})`:`ğŸ˜” ${et.value.defender.kingdomName}ì˜ ìŠ¹ë¦¬... (${ct.value} vs ${dt.value})`,narrativeType:"narration"};et.value.log.push(a),setTimeout(()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)},100)},bt=()=>{const e=et.value?.result,a=rt.value;lt(),Sa?.value?.active?Vt(e):"defeat"===e&&"empire"===a&&setTimeout(()=>{Qa&&(Qa.value=!1),ya.value=!0},500)};tt(),re.value&&re.value.length>0&&re.value.forEach(e=>{_e.value.some(a=>a.id===e.id)||_e.value.push(e)});const{currentEvent:ht,currentCrossroad:yt,drawEventCard:xt,selectPassiveCard:wt,selectChoice:_t,closeEvent:Ct,selectCrossroadChoice:kt,closeCrossroad:Et}=m({kingdom:ta,playerPassiveCards:_e,showPassiveCardSelection:Ce,availablePassiveCards:ke,permanentEffects:ne,reincarnationData:xa,showReincarnationModal:ya,showNotification:ce,calculateProduction:la,synergyDailyEffects:Fe,godGameState:le}),St=()=>{Ct()},Rt=e=>{_t(e),Sa.value?.active&&Tt()},Dt=()=>{Et()},$t=e=>{kt(e),Sa.value?.active&&Tt()};T(ya,e=>{e&&(Ge.value=_e.value)}),T(()=>Ra.value,e=>{e&&setTimeout(()=>{const a=Sa.value.nodes.find(a=>a.id===e);a&&!a.completed?jt(a):a&&a.completed&&Tt(),Ra.value=null},100)}),T(()=>xe.value.isExpired,e=>{e&&(ce("âš ï¸ í˜„ì‹¤ì‹œê°„ 12ì¼ì´ ê²½ê³¼í–ˆìŠµë‹ˆë‹¤! ì„¸ê³„ê°€ ë©¸ë§í•˜ì—¬ ê²Œì„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤...","error"),setTimeout(()=>{localStorage.removeItem("gameData"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("invasionTracker"),localStorage.removeItem("playerName"),localStorage.removeItem("kingdomName"),localStorage.removeItem("tutorialProgress"),window.location.href="/story"},2e3))});const Tt=()=>{if(Sa.value.active)if(Sa.value.currentDiceIndex<Sa.value.diceResults.length){(()=>{let e=0,a=0,t=0,s=0;if(le.value){const o=le.value.commandmentEffects;o&&(o.gold&&(ta.value.resources.gold+=o.gold,e+=o.gold),o.food&&(ta.value.resources.food+=o.food,a+=o.food),o.morale&&(ta.value.resources.morale=Math.min(100,Math.max(0,ta.value.resources.morale+o.morale)),t+=o.morale),o.military&&(ta.value.resources.soldiers+=o.military,s+=o.military))}if(Ee.value.domestic.filter(e=>null!==e).forEach(o=>{o.effect&&(o.effect.gold&&(ta.value.resources.gold+=o.effect.gold,e+=o.effect.gold),o.effect.food&&(ta.value.resources.food+=o.effect.food,a+=o.effect.food),o.effect.morale&&(ta.value.resources.morale=Math.min(100,Math.max(0,ta.value.resources.morale+o.effect.morale)),t+=o.effect.morale),o.effect.military&&(ta.value.resources.soldiers+=o.effect.military,s+=o.effect.military))}),0!==e||0!==a||0!==t||0!==s){let o="ì´ë™ íš¨ê³¼: ";const l=[];0!==e&&l.push(`ê¸ˆ ${e>0?"+":""}${e}`),0!==a&&l.push(`ì‹ëŸ‰ ${a>0?"+":""}${a}`),0!==t&&l.push(`ë¯¼ì‹¬ ${t>0?"+":""}${t}`),0!==s&&l.push(`ë³‘ë ¥ ${s>0?"+":""}${s}`),o+=l.join(", "),ce(o,"success")}})();const e=La();ce(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),setTimeout(()=>{Ma(e)},500)}else Ua.value=!1,Sa.value.diceResults=[],Sa.value.currentDiceIndex=0,setTimeout(()=>{Ga.value=!0,ce("ëª¨ë“  ìˆ«ìë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ë£°ë ›ì„ ëŒë ¤ì£¼ì„¸ìš”.","info")},800)},It=()=>{if(ge.value=!1,be.value?.rewards){const e=be.value.rewards;e.gold&&(ta.value.resources.gold+=e.gold),e.food&&(ta.value.resources.food+=e.food),e.soldiers&&(ta.value.resources.soldiers+=e.soldiers)}be.value=null},Pt=e=>{wt(e),Sa.value?.active&&setTimeout(()=>{Tt()},500)},jt=e=>{switch(Ta(e.id),e.type){case"start":const a=Sa.value.nodes.find(a=>a.id===e.id);a&&(a.status="completed",a.completed=!0),Gt(),Sa.value.active&&Tt();break;case"battle":case"elite":case"boss":e.enemy&&("boss"===e.type&&(Xa.value=!0),Ka.value={enemyName:e.enemy.name,enemyPower:e.enemy.power,battleType:"boss"===e.type?"empire":"normal"},Wa.value=!0);break;case"event":const t=Sa.value.nodes.find(a=>a.id===e.id);t&&(t.status="completed",t.completed=!0),Sa.value.active?xt():Gt();break;case"shop":Na.value=!0;break;case"rest":Va.value=!0;break;case"treasure":const s={gold:Math.floor(300*Math.random())+200,food:Math.floor(200*Math.random())+100,cards:p(1)};Ia(s),ce(`ğŸ’ ë³´ë¬¼ ë°œê²¬! ê¸ˆ +${s.gold}, ì‹ëŸ‰ +${s.food}`,"success");const o=Sa.value.nodes.find(a=>a.id===e.id);o&&(o.status="completed",o.completed=!0),Gt(),Sa.value.active&&Tt()}},At=e=>{if(Sa.value.isSelectingPath){if(Sa.value.availablePaths.some(a=>a.id===e.id)){Oa(e.id);const a={battle:"âš”ï¸",elite:"ğŸ”¥",boss:"ğŸ‘‘",event:"â“",shop:"ğŸª",rest:"ğŸ•ï¸",treasure:"ğŸ’",start:"ğŸšª"}[e.type]||"â¡ï¸";ce(`${a} ë°©í–¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!`,"info")}else ce("ì„ íƒ ê°€ëŠ¥í•œ ê²½ë¡œê°€ ì•„ë‹™ë‹ˆë‹¤.","error");return}if(e.completed){const a=Sa.value.nodes.find(e=>e.id===Sa.value.currentNodeId);return void(a&&a.connections.includes(e.id)?(Ta(e.id),ce("ì´ë¯¸ ì™„ë£Œí•œ ì¹¸ìœ¼ë¡œ ë˜ëŒì•„ì™”ìŠµë‹ˆë‹¤.","info")):ce("í˜„ì¬ ìœ„ì¹˜ì™€ ì¸ì ‘í•œ ì¹¸ë§Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","error"))}"available"!==e.status?ce("ì•„ì§ ê°ˆ ìˆ˜ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤.","error"):ce("ë£°ë ›ì„ ëŒë ¤ì„œ ì´ë™í•´ì£¼ì„¸ìš”!","info")},Lt=()=>{Na.value=!1,Da.value&&(Da.value.status="completed",Da.value.completed=!0,Da.value.connections.forEach(e=>{const a=Sa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Gt(),Sa.value.active&&Tt())},Mt=e=>{let a=!1;switch(e){case"soldiers":ta.value.resources.gold>=400&&(ta.value.resources.gold-=400,ta.value.resources.soldiers+=200,ce("ë³‘ì‚¬ 200ëª… ëª¨ì§‘!","success"),a=!0);break;case"food":ta.value.resources.gold>=200&&(ta.value.resources.gold-=200,ta.value.resources.food+=500,ce("ì‹ëŸ‰ 500 êµ¬ë§¤!","success"),a=!0);break;case"card":ta.value.resources.gold>=300&&(ta.value.resources.gold-=300,ke.value=p(3),Ce.value=!0,ce("ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!","info"),a=!0);break;case"heal":if(ta.value.resources.food>=200){ta.value.resources.food-=200;const e=Math.floor(.1*Sa.value.startingResources.soldiers);ta.value.resources.soldiers+=e,ce(`ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success"),a=!0}}a&&"card"!==e&&Lt()},Ot=e=>{switch(e){case"heal":const e=Math.floor(.2*Sa.value.startingResources.soldiers);ta.value.resources.soldiers+=e,ce(`ğŸ•ï¸ íœ´ì‹ìœ¼ë¡œ ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success");break;case"remove-card":ce("ğŸ—‘ï¸ ì¹´ë“œ ì •ë¦¬ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤","info");break;case"meditate":const a=Math.floor(200*Math.random())+100,t=Math.floor(150*Math.random())+50;ta.value.resources.gold+=a,ta.value.resources.food+=t,ce(`ğŸ§˜ ëª…ìƒ... ê¸ˆ +${a}, ì‹ëŸ‰ +${t}`,"success")}Va.value=!1,Da.value&&(Da.value.status="completed",Da.value.completed=!0,Da.value.connections.forEach(e=>{const a=Sa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Gt(),Sa.value.active&&Tt())},Bt=()=>{Wa.value=!1,Sa.value?.active&&Da.value&&(Da.value.status="completed",Da.value.completed=!0,Xa.value&&(Xa.value=!1),setTimeout(()=>{Tt()},300))},Nt=()=>{Wa.value=!1,Ne();Ke(Ee.value.battle).forEach(e=>{Oe(e)}),ot(Ka.value.enemyName,Ka.value.enemyPower,Ka.value.battleType)},Vt=e=>{if(Da.value&&Da.value.enemy)if(Xa.value)if("victory"===e){const e={gold:5e3,food:3e3,soldiers:1e3};ta.value.resources.gold+=e.gold,ta.value.resources.food+=e.food,ta.value.resources.soldiers+=e.soldiers,ce(`ğŸ‘‘ ë³´ìŠ¤ ì²˜ì¹˜! ê¸ˆ +${e.gold}, ì‹ëŸ‰ +${e.food}, ë³‘ë ¥ +${e.soldiers}`,"success"),Pa(),setTimeout(()=>{Xa.value=!1,Za.value=!0,ya.value=!0},1e3)}else setTimeout(()=>{Xa.value=!1,Za.value=!1,ya.value=!0},500);else if("victory"===e){Ia(Da.value.enemy.rewards),ce(`ìŠ¹ë¦¬! ê¸ˆ +${Da.value.enemy.rewards.gold}, ì‹ëŸ‰ +${Da.value.enemy.rewards.food}`,"success");const e=Da.value.enemy.rewards.cards&&Da.value.enemy.rewards.cards.length>0;e&&(ke.value=Da.value.enemy.rewards.cards,Ce.value=!0),Da.value.status="completed",Da.value.completed=!0,Da.value.connections.forEach(e=>{const a=Sa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Gt(),Sa.value.active&&!e?Tt():Sa.value.active}else{const e=Math.floor(.3*ta.value.resources.soldiers);ta.value.resources.soldiers=Math.max(0,ta.value.resources.soldiers-e),ce(`íŒ¨ë°°... ë³‘ë ¥ ${e}ëª… ì†ì‹¤. ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤.`,"error"),Da.value.status="completed",Da.value.completed=!0,Da.value.connections.forEach(e=>{const a=Sa.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),Gt(),Sa.value.active&&Tt()}},Gt=()=>{if(ta.value.day++,Sa.value?.active)return void ce(`${ta.value.day}ì¼ì°¨`,"info");const e=me(ta.value.day);if(e)return a=e,be.value=a,void(ge.value=!0);var a;if(ta.value.day%7==0&&ta.value.day>0&&ta.value.day<42){const e=ta.value.day/7;return ce(`âš”ï¸ ${e}ì£¼ì°¨! ì œêµ­êµ°ì´ ì „ë©´ ì¹¨ëµí•´ì˜µë‹ˆë‹¤!`,"error"),Qa.value=!0,void st("pve","empire")}if(ta.value.day>=42)return ce("ğŸ”„ 42ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),void setTimeout(()=>{localStorage.removeItem("reincarnationData"),localStorage.removeItem("gameData"),localStorage.removeItem("passiveCards"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("tutorialState"),localStorage.removeItem("synergyCards"),ce("ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{window.location.reload()},1e3)},2e3);ce(`${ta.value.day}ì¼ì°¨ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.`,"info")},Ut=()=>{ua.value=!1,ce("ì¹´ë“œ êµí™˜ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.","info")},qt=(e,a)=>{const t=_e.value.findIndex(a=>a.id===e.id);-1!==t&&(_e.value.splice(t,1,a),ce(`${e.name}ì„(ë¥¼) ${a.name}(ìœ¼)ë¡œ êµí™˜í–ˆìŠµë‹ˆë‹¤!`,"success"),ua.value=!1)},zt=e=>_e.value.some(a=>a.id===e.id)?(ce("ì´ë¯¸ ë³´ìœ í•œ ì¹´ë“œì…ë‹ˆë‹¤!","error"),!1):_e.value.length>=f?(ce(`ìµœëŒ€ ${f}ì¥ê¹Œì§€ë§Œ ë³´ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!`,"error"),!1):(_e.value.push(e),!0),Ht=e=>{zt(e)&&(ce(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success"),ua.value=!1)},Jt=h(()=>(ke.value||[]).filter(e=>"common"===e.rarity||"rare"===e.rarity).slice(0,9)),Ft=e=>{let a=0;e.forEach(e=>{zt(e)&&a++}),pe(),ce(`${a}ê°œì˜ ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success")},Wt=()=>{ft(),0===ta.value.day?(ta.value.day=1,ce("âš”ï¸ ì „íˆ¬ ì¤€ë¹„ ì™„ë£Œ! 1ì¼ì°¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤!","success")):ce("âš”ï¸ ì „íˆ¬ ê°€ì´ë“œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},Kt=e=>{e&&(vt(),pt())},Yt=b(null);return I(()=>{{Ie(),setTimeout(()=>{pa.value=!0},500);const e=s();Yt.value=new Audio(e.app.baseURL+"/bgm/baseBgm.mp3"),Yt.value.loop=!0,Yt.value.volume=.3,Yt.value.play().catch(e=>{const a=()=>{Yt.value&&Yt.value.play().catch(e=>{}),document.removeEventListener("click",a)};document.addEventListener("click",a,{once:!0})})}}),P(()=>{Yt.value&&(Yt.value.pause(),Yt.value.currentTime=0,Yt.value=null)}),(e,a)=>(w(),x("div",Ye,[_("video",{autoplay:"",loop:"",muted:"",playsinline:"",class:"absolute inset-0 w-full h-full object-cover z-0",src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:k(s))().app.baseURL}images/background/base_back_ani.mp4`},null,8,Qe),a[18]||(a[18]=_("div",{class:"absolute inset-0 bg-black/40 z-0"},null,-1)),_("div",Xe,[k(ue)?.storyCompleted&&!k(ue)?.hasSelectedStartCards?(w(),j(k(t),{key:0,cards:Jt.value,onConfirm:Ft},null,8,["cards"])):C("",!0),R(k(ae),{show:pa.value,onComplete:ha,onSkip:k(fe)},null,8,["show","onSkip"]),k(Sa)?.active?C("",!0):(w(),j(de,{key:1,resources:k(ta).resources,timer:k(xe),"current-day":k(ta).day,"reincarnation-count":k(xa).count,"commandment-effects":we.value,onShowResourceHelp:ba},null,8,["resources","timer","current-day","reincarnation-count","commandment-effects"])),a[17]||(a[17]=_("div",{class:"flex-1"},null,-1)),k(Sa)?.active?C("",!0):(w(),j(ye,{key:2,"unlocked-features":k(ue)?.unlockedFeatures||[],onShowCommandments:a[0]||(a[0]=e=>va.value=!0),onShowPassiveCards:a[1]||(a[1]=e=>na.value=!0),onShowCardDeck:a[2]||(a[2]=e=>Pe.value=!0),onShowCardGuide:a[3]||(a[3]=e=>ia.value=!0),onStartNormalBattle:Fa,onRecruitSoldiers:ra},null,8,["unlocked-features"])),R(k(D),{event:k(ht),"current-resources":k(ta).resources,onClose:St,onSelectChoice:Rt},null,8,["event","current-resources"]),R(k($),{crossroad:k(yt),onClose:Dt,onSelectChoice:$t},null,8,["crossroad"]),R(k(y),{battle:k(et),"is-scrolling":k(at),"battle-active-cards":k(Ae),"used-active-cards":k(it),"attacker-score":k(ct),"defender-score":k(dt),"is-paused":k(ut),"card-selection-time":k(mt),"current-day":k(ta).day,onClose:bt,onUseActiveCard:k(nt),onCompleteTutorial:Wt,onPauseTutorial:Kt,onManualPause:k(pt),onManualResume:k(ft),onSkipToResult:gt},null,8,["battle","is-scrolling","battle-active-cards","used-active-cards","attacker-score","defender-score","is-paused","card-selection-time","current-day","onUseActiveCard","onManualPause","onManualResume"]),R(k(N),{show:k(Ce),cards:k(ke),onSelectCard:Pt},null,8,["show","cards"]),R(k(V),{show:he.value,"owned-active-cards":k(je),"battle-active-cards":k(Ae),"max-battle-cards":k(Le),onClose:a[4]||(a[4]=e=>he.value=!1),onAddToDeck:k(Oe),onRemoveFromDeck:k(Be)},null,8,["show","owned-active-cards","battle-active-cards","max-battle-cards","onAddToDeck","onRemoveFromDeck"]),R(k(G),{show:k(ya),"available-cards":Ge.value,"reincarnation-count":k(xa).count,"highest-day":Math.max(k(xa).highestDay,k(ta).day),"total-days-played":k(xa).totalDaysPlayed+k(ta).day,"inherited-cards-count":k(xa).inheritedCards?.length||0,onSelectCard:ka,onReincarnateWithoutCard:Ea},null,8,["show","available-cards","reincarnation-count","highest-day","total-days-played","inherited-cards-count"]),R(k(U),{show:na.value,"passive-cards":k(_e),"inherited-card-ids":k(xa).inheritedCards.map(e=>e.id),onClose:a[5]||(a[5]=e=>na.value=!1)},null,8,["show","passive-cards","inherited-card-ids"]),R(k(q),{show:ia.value,"player-cards":k(_e),onClose:a[6]||(a[6]=e=>ia.value=!1)},null,8,["show","player-cards"]),R(k(te),{modelValue:Pe.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Pe.value=e),"card-deck":k(Ee),"available-domestic-cards":k(Re),"available-battle-cards":k(De),"equipped-cards":k(Se),onEquipCard:a[8]||(a[8]=(e,a,t)=>k($e)(e,a,t)),onUnequipCard:a[9]||(a[9]=(e,a)=>k(Te)(e,a))},null,8,["modelValue","card-deck","available-domestic-cards","available-battle-cards","equipped-cards"]),R(k(z),{show:va.value,commandments:k(le)?.selectedCommandments||[],onClose:a[10]||(a[10]=e=>va.value=!1)},null,8,["show","commandments"]),R(k(H),{show:ge.value,title:be.value?.title||"",message:be.value?.message||"",rewards:be.value?.rewards,urgent:be.value?.urgent,important:be.value?.important,final:be.value?.final,onClose:It,onConfirm:It},null,8,["show","title","message","rewards","urgent","important","final"]),R(k(J),{show:k(qe),cards:k(ze),onClose:a[11]||(a[11]=e=>qe.value=!1),onSelectCard:k(aa)},null,8,["show","cards","onSelectCard"]),R(k(F),{show:ca.value,cards:k(Ue),synergies:k(He),"total-effects":k(Je).totalEffects,onClose:a[12]||(a[12]=e=>ca.value=!1)},null,8,["show","cards","synergies","total-effects"]),R(k(W),{show:da.value,onClose:a[13]||(a[13]=e=>da.value=!1)},null,8,["show"]),R(k(Y),{show:fa.value,"resource-type":ga.value,onClose:a[14]||(a[14]=e=>fa.value=!1)},null,8,["show","resource-type"]),R(k(K),{show:ua.value,"current-cards":k(_e),"new-cards":ma.value,onClose:a[15]||(a[15]=e=>ua.value=!1),onSkip:Ut,onExchange:qt,onAdd:Ht},null,8,["show","current-cards","new-cards"]),k(Sa)?.active?(w(),j(k(Q),{key:3,nodes:k(Sa)?.nodes||[],"current-node-id":k(Sa)?.currentNodeId||null,"accumulated-rewards":k(Sa)?.accumulatedRewards||{},"visible-cells":k(Sa)?.visibleCells||new Set,"is-selecting-path":k(Sa)?.isSelectingPath||!1,"available-paths":k(Sa)?.availablePaths||[],onNodeClick:At,onRetreat:Ba},null,8,["nodes","current-node-id","accumulated-rewards","visible-cells","is-selecting-path","available-paths"])):C("",!0),R(k(X),{show:Na.value,"current-gold":k(ta).resources.gold,"current-food":k(ta).resources.food,onClose:Lt,onBuy:Mt},null,8,["show","current-gold","current-food"]),R(k(Z),{show:Va.value,onClose:a[16]||(a[16]=e=>Va.value=!1),onSelect:Ot},null,8,["show"]),R(k(ee),{show:Wa.value,"enemy-name":Ka.value.enemyName,"enemy-power":Ka.value.enemyPower,"player-power":k(ta).resources.soldiers,"deck-battle-cards":k(Ee).battle,"is-boss-battle":Xa.value,onConfirm:Nt,onCancel:Bt},null,8,["show","enemy-name","enemy-power","player-power","deck-battle-cards","is-boss-battle"]),R(k(se),{show:Ga.value,"dice-results":k(Sa)?.diceResults||[],"current-index":k(Sa)?.currentDiceIndex||0,"is-rolling":qa.value,onRoll:za,onUseNext:Ja,onConfirm:Ha},null,8,["show","dice-results","current-index","is-rolling"]),R(k(oe),{show:Ua.value,"dice-results":k(Sa)?.diceResults||[],"current-index":k(Sa)?.currentDiceIndex||0},null,8,["show","dice-results","current-index"]),R(M,{name:"notification"},{default:L(()=>[k(ie)?(w(),x("div",{key:0,class:S(["fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px]",{"bg-green-600 border-2 border-green-400":"success"===k(ie).type,"bg-red-600 border-2 border-red-400":"error"===k(ie).type,"bg-blue-600 border-2 border-blue-400":"info"===k(ie).type}])},[_("span",Ze,E("success"===k(ie).type?"âœ“":"error"===k(ie).type?"âœ—":"â„¹"),1),_("span",ea,E(k(ie).message),1)],2)):C("",!0)]),_:1})])]))}});export{aa as default};
