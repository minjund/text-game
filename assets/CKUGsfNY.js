const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DPNg7_ot.js","./DvSjL5z3.js","./D18Nttjh.js","./DtfMIlTk.js","./kkAUuAVg.js","./entry.ByCC1TSI.css","./B4_LaVq5.js","./GameBattleModal.DUbjaYrW.css","./DPTXa9sg.js","./DjTCJ7Sd.js","./B_Qk4lVr.js","./Dwt9PNei.js","./D7_FddSo.js","./GameActiveCardsModal.B6r-ilfv.css","./CU-E4_PG.js","./GameReincarnationModal.DNWq0NAG.css","./D0laA_5L.js","./GamePassiveCardsModal.irA25d0s.css","./KmWG2adZ.js","./GameCardCollection.bWGxB5-_.css","./171I_o7I.js","./GameCommandmentsModal.BpQvi8cF.css","./DBgrpUtW.js","./GameBattleHistoryModal.DgBsnzbu.css","./DWQAsOxk.js","./GameAdvisorModal.DXEfPlk2.css","./CB50UwFh.js","./GameSynergyCardSelection.ZhzXQiyu.css","./1UEPOCfZ.js","./GameSynergyCollection.C7znwYRa.css","./0xLzABaL.js","./GameSynergyGuide.BHmzaapF.css","./D2rJFBRH.js","./GameDailyCardExchange.CMiIgq1D.css","./fIQAtrHl.js","./GameResourceHelp.N43b38by.css","./DffIDpLV.js","./GameAdventureMap.KMmYI9En.css","./DXFAeDb0.js","./GameAdventureShop.CBia5tev.css","./hgopUsuK.js","./GameAdventureRest.xCSJfAfh.css","./1OISCWBS.js","./GameBattleCardSelection.Dcuhs2Yz.css","./DoS4oBz4.js","./GameInteractiveTutorial.CpJ4AFAL.css","./C3OKxfnV.js","./BoK1PSWn.js","./GameDiceRoulette.7Rpv6TWj.css","./gI7jf0i_.js"])))=>i.map(i=>d[i]);
import{_ as e,a}from"#entry";import{s as t,u as s,e as o,g as l,i as r,k as n,l as i,m as c,o as d,q as u,t as m,M as v,v as p,x as f,y as g}from"./kkAUuAVg.js";import{b,c as y,d as h,f as x,k as w,l as _,j as k,p as C,n as E,K as S,D as R,y as D,x as T,w as $,C as I,o as P,q as A,O as j,u as M,T as O}from"./DvSjL5z3.js";import{u as B}from"./DdeBwGJA.js";import{u as L}from"./B4_LaVq5.js";const N=()=>{const e=b((()=>{{const e=localStorage.getItem("gameStartTime");if(e)return new Date(e);{const e=new Date;return localStorage.setItem("gameStartTime",e.toISOString()),e}}})()),a=y(()=>{const a=new Date(e.value);return a.setDate(a.getDate()+12),a}),s=b({days:0,hours:0,minutes:0,seconds:0,isExpired:!1}),o=()=>{const e=new Date,t=a.value.getTime()-e.getTime();s.value=t<=0?{days:0,hours:0,minutes:0,seconds:0,isExpired:!0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),isExpired:!1}};return o(),t(o,1e3),{gameStartTime:e,gameEndTime:a,remainingTime:s,updateRemainingTime:o,GAME_DURATION_DAYS:12}},V={class:"fixed top-0 left-1/2 -translate-x-1/2 z-50 flex flex-col gap-1.5 pointer-events-none w-full max-w-md"},G={class:"flex flex-col gap-1.5 relative z-10"},U={class:"grid grid-cols-4 gap-1 pointer-events-auto"},q={class:"resource-display compact border-green-500"},z={class:"resource-info"},H={class:"resource-value"},J={class:"resource-display compact border-yellow-500"},F={class:"resource-info"},W={class:"resource-value"},K={class:"resource-display compact border-red-500"},Y={class:"resource-info"},Q={class:"resource-value"},X={class:"resource-display compact border-pink-500"},Z={class:"resource-info"},ee={class:"resource-value"},ae={class:"flex justify-between gap-1.5"},te={class:"flex-1 pointer-events-auto"},se={class:"resource-display compact border-blue-500"},oe={class:"resource-info"},le={class:"resource-value"},re={class:"flex-1 pointer-events-auto"},ne={class:"resource-display compact border-amber-500"},ie={class:"resource-info"},ce={class:"resource-value text-amber-300"},de={key:0,class:"pointer-events-auto"},ue={class:"resource-value text-xs w-full animate-pulse"},me={key:1,class:"pointer-events-auto"},ve={class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 border-2 border-indigo-400 rounded-lg p-2 sm:p-2.5 backdrop-blur-sm shadow-lg"},pe={class:"flex flex-wrap gap-1.5 sm:gap-2"},fe=h({__name:"GameMobileResources",props:{resources:{},timer:{},currentDay:{},reincarnationCount:{default:0},commandmentEffects:{default:null}},emits:["show-resource-help"],setup(e){const a=e,t=y(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),o=y(()=>""),l=y(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,r)=>(w(),x("div",V,[_("div",{class:"backdrop-blur-md border-b border-gray-700 px-2 py-2 bg-cover bg-center bg-no-repeat relative min-h-[120px]",style:S({backgroundImage:`url(${("useRuntimeConfig"in a?a.useRuntimeConfig:R(s))().app.baseURL}images/background/header_back_ground.png)`})},[r[13]||(r[13]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",G,[_("div",U,[_("div",q,[r[1]||(r[1]=_("span",{class:"resource-icon"},"ğŸ–",-1)),_("div",z,[r[0]||(r[0]=_("span",{class:"resource-label"},"ì‹ëŸ‰",-1)),_("span",H,C(e.resources.food),1)])]),_("div",J,[r[3]||(r[3]=_("span",{class:"resource-icon"},"ğŸ’°",-1)),_("div",F,[r[2]||(r[2]=_("span",{class:"resource-label"},"ê¸ˆ",-1)),_("span",W,C(e.resources.gold),1)])]),_("div",K,[r[5]||(r[5]=_("span",{class:"resource-icon"},"âš”ï¸",-1)),_("div",Y,[r[4]||(r[4]=_("span",{class:"resource-label"},"ë³‘ì‚¬",-1)),_("span",Q,C(e.resources.soldiers),1)])]),_("div",X,[r[7]||(r[7]=_("span",{class:"resource-icon"},"â¤ï¸",-1)),_("div",Z,[r[6]||(r[6]=_("span",{class:"resource-label"},"ë¯¼ì‹¬",-1)),_("span",ee,C(e.resources.morale),1)])])]),_("div",ae,[_("div",te,[_("div",se,[r[9]||(r[9]=_("span",{class:"resource-icon"},"ğŸ“…",-1)),_("div",oe,[r[8]||(r[8]=_("span",{class:"resource-label"},"ê²Œì„ ì¼ì°¨",-1)),_("span",le,C(e.currentDay)+"ì¼",1)])])]),_("div",re,[_("div",ne,[r[11]||(r[11]=_("span",{class:"resource-icon"},"â™»ï¸",-1)),_("div",ie,[r[10]||(r[10]=_("span",{class:"resource-label"},"í™˜ìƒ",-1)),_("span",ce,C(e.reincarnationCount)+"íšŒ",1)])])])]),o.value?(w(),x("div",de,[_("div",{class:E(["resource-display compact text-center",t.value<=1?"border-red-500 bg-red-900/30":"border-yellow-500 bg-yellow-900/20"])},[_("span",ue,C(o.value),1)],2)])):k("",!0),e.commandmentEffects&&l.value?(w(),x("div",me,[_("div",ve,[r[12]||(r[12]=_("div",{class:"flex items-center gap-2 mb-1.5"},[_("span",{class:"text-xl sm:text-2xl"},"âš–ï¸"),_("span",{class:"text-xs sm:text-sm font-bold text-indigo-200"},"ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©)")],-1)),_("div",pe,[0!==e.commandmentEffects.morale?(w(),x("span",{key:0,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+C(e.commandmentEffects.morale>0?"+":"")+C(e.commandmentEffects.morale),3)):k("",!0),0!==e.commandmentEffects.gold?(w(),x("span",{key:1,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+C(e.commandmentEffects.gold>0?"+":"")+C(e.commandmentEffects.gold),3)):k("",!0),0!==e.commandmentEffects.military?(w(),x("span",{key:2,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+C(e.commandmentEffects.military>0?"+":"")+C(e.commandmentEffects.military),3)):k("",!0),0!==e.commandmentEffects.food?(w(),x("span",{key:3,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+C(e.commandmentEffects.food>0?"+":"")+C(e.commandmentEffects.food),3)):k("",!0),0!==e.commandmentEffects.population?(w(),x("span",{key:4,class:E(["text-[10px] sm:text-xs px-2 py-1 rounded-md font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+C(e.commandmentEffects.population>0?"+":"")+C(e.commandmentEffects.population),3)):k("",!0)])])])):k("",!0)])],4)]))}}),ge=Object.assign(e(fe,[["__scopeId","data-v-164657c0"]]),{__name:"GameMobileResources"}),be={class:"grid grid-cols-3 gap-1.5 relative z-10"},ye=["src"],he=["src"],xe=["src"],we=["src"],_e=["src"],ke=["src"],Ce=h({__name:"GameMobileActions",emits:["show-generals","show-battle-history","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",{class:"fixed bottom-0 left-1/2 -translate-x-1/2 border-t border-gray-700 p-2 z-50 w-full max-w-md bg-cover bg-center bg-no-repeat relative",style:S({backgroundImage:`url(${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/background/under_back_ground.png)`})},[a[6]||(a[6]=_("div",{class:"absolute inset-0 bg-black/60"},null,-1)),_("div",be,[_("button",{onClick:a[0]||(a[0]=a=>e.$emit("show-battle-history")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/record.png`,alt:"ì „ìŸ ê¸°ë¡"},null,8,ye)]),_("button",{onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/card.png`,alt:"ì¹´ë“œ"},null,8,he)]),_("button",{onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/deck.png`,alt:"ë±"},null,8,xe)]),_("button",{onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/encyclopedia.png`,alt:"ë„ê°"},null,8,we)]),_("button",{onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/adventure.png`,alt:"ëª¨í—˜"},null,8,_e)]),_("button",{onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers")),class:"flex items-center justify-center bg-transparent rounded-lg active:opacity-70 transition-all h-20"},[_("img",{src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/button/recruitment.png`,alt:"ëª¨ì§‘"},null,8,ke)])])],4))}),Ee=Object.assign(Ce,{__name:"GameMobileActions"}),Se={class:"hidden md:flex bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border-b border-slate-700 px-8 py-4"},Re={class:"max-w-7xl mx-auto w-full flex items-center justify-between"},De={class:"flex items-center gap-4"},Te={class:"text-2xl font-bold text-amber-100"},$e={class:"text-sm text-slate-400"},Ie={class:"flex items-center gap-4"},Pe={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-green-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-green-500/20"},Ae={class:"text-lg font-bold text-slate-100"},je={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-yellow-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-yellow-500/20"},Me={class:"text-lg font-bold text-slate-100"},Oe={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-red-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-red-500/20"},Be={class:"text-lg font-bold text-slate-100"},Le={class:"flex items-center gap-2 bg-slate-800/60 backdrop-blur-sm border-2 border-pink-500 rounded-lg px-4 py-2 relative group transition-all hover:shadow-lg hover:shadow-pink-500/20"},Ne={class:"text-lg font-bold text-slate-100"},Ve=h({__name:"GameDesktopHeader",props:{kingdomName:{},day:{},resources:{}},emits:["show-resource-help"],setup:e=>(a,t)=>(w(),x("header",Se,[_("div",Re,[_("div",De,[t[4]||(t[4]=_("div",{class:"text-4xl"},"ğŸ‘‘",-1)),_("div",null,[_("h1",Te,C(e.kingdomName),1),_("p",$e,"ì œ "+C(e.day)+"ì¼ í†µì¹˜",1)])]),_("div",Ie,[_("div",Pe,[t[6]||(t[6]=_("span",{class:"text-2xl"},"ğŸ–",-1)),_("div",null,[t[5]||(t[5]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ì‹ëŸ‰",-1)),_("p",Ae,C(e.resources.food),1)]),_("button",{onClick:t[0]||(t[0]=e=>a.$emit("show-resource-help","food")),class:"absolute -top-1 -right-1 w-5 h-5 bg-green-600 hover:bg-green-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ì‹ëŸ‰ ë„ì›€ë§"}," ? ")]),_("div",je,[t[8]||(t[8]=_("span",{class:"text-2xl"},"ğŸ’°",-1)),_("div",null,[t[7]||(t[7]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ê¸ˆí™”",-1)),_("p",Me,C(e.resources.gold),1)]),_("button",{onClick:t[1]||(t[1]=e=>a.$emit("show-resource-help","gold")),class:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-600 hover:bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ê¸ˆ ë„ì›€ë§"}," ? ")]),_("div",Oe,[t[10]||(t[10]=_("span",{class:"text-2xl"},"âš”ï¸",-1)),_("div",null,[t[9]||(t[9]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ë³‘ì‚¬",-1)),_("p",Be,C(e.resources.soldiers),1)]),_("button",{onClick:t[2]||(t[2]=e=>a.$emit("show-resource-help","soldiers")),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-600 hover:bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë³‘ì‚¬ ë„ì›€ë§"}," ? ")]),_("div",Le,[t[12]||(t[12]=_("span",{class:"text-2xl"},"â¤ï¸",-1)),_("div",null,[t[11]||(t[11]=_("p",{class:"text-xs text-slate-400 font-semibold uppercase tracking-wider"},"ë¯¼ì‹¬",-1)),_("p",Ne,C(e.resources.morale),1)]),_("button",{onClick:t[3]||(t[3]=e=>a.$emit("show-resource-help","morale")),class:"absolute -top-1 -right-1 w-5 h-5 bg-pink-600 hover:bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"ë¯¼ì‹¬ ë„ì›€ë§"}," ? ")])])])]))});Object.assign(Ve,{__name:"GameDesktopHeader"});const Ge={class:"w-80 space-y-4"},Ue={class:"text-lg font-bold animate-pulse"},qe={key:1,class:"bg-gradient-to-r from-indigo-900/80 to-purple-900/80 backdrop-blur-xl border-2 border-indigo-400 rounded-xl p-4 shadow-lg"},ze={class:"flex flex-wrap gap-2"},He=h({__name:"GameLeftSidebar",props:{timer:{},currentDay:{},commandmentEffects:{}},setup(e){const a=e,t=y(()=>{if(a.currentDay>=12)return 0;return 7*Math.ceil((a.currentDay+1)/7)-a.currentDay}),s=y(()=>""),o=y(()=>{if(!a.commandmentEffects)return!1;const e=a.commandmentEffects;return 0!==e.morale||0!==e.gold||0!==e.military||0!==e.food||0!==e.population});return(a,l)=>(w(),x("div",Ge,[s.value?(w(),x("div",{key:0,class:E(["bg-gradient-to-br border-2 rounded-xl p-4 text-center",t.value<=1?"from-red-900/50 to-rose-900/50 border-red-500":"from-yellow-900/50 to-amber-900/50 border-yellow-500"])},[_("div",Ue,C(s.value),1)],2)):k("",!0),e.commandmentEffects&&o.value?(w(),x("div",qe,[l[0]||(l[0]=_("h3",{class:"text-base font-bold text-indigo-200 mb-3 flex items-center gap-2"},[_("span",{class:"text-2xl"},"âš–ï¸"),D(" ì‹ ì˜ ê³„ëª… íš¨ê³¼ (ë§¤ì¼ ì ìš©) ")],-1)),_("div",ze,[0!==e.commandmentEffects.morale?(w(),x("div",{key:0,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.morale>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ˜Š ë¯¼ì‹¬ "+C(e.commandmentEffects.morale>0?"+":"")+C(e.commandmentEffects.morale),3)):k("",!0),0!==e.commandmentEffects.gold?(w(),x("div",{key:1,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.gold>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ’° ê¸ˆ "+C(e.commandmentEffects.gold>0?"+":"")+C(e.commandmentEffects.gold),3)):k("",!0),0!==e.commandmentEffects.military?(w(),x("div",{key:2,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.military>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," âš”ï¸ ë³‘ë ¥ "+C(e.commandmentEffects.military>0?"+":"")+C(e.commandmentEffects.military),3)):k("",!0),0!==e.commandmentEffects.food?(w(),x("div",{key:3,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.food>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ– ì‹ëŸ‰ "+C(e.commandmentEffects.food>0?"+":"")+C(e.commandmentEffects.food),3)):k("",!0),0!==e.commandmentEffects.population?(w(),x("div",{key:4,class:E(["px-3 py-1.5 rounded-md text-sm font-semibold border",e.commandmentEffects.population>0?"bg-emerald-500/30 text-emerald-200 border-emerald-400":"bg-red-500/30 text-red-200 border-red-400"])}," ğŸ‘¥ ì¸êµ¬ "+C(e.commandmentEffects.population>0?"+":"")+C(e.commandmentEffects.population),3)):k("",!0)])])):k("",!0)]))}});Object.assign(He,{__name:"GameLeftSidebar"});const Je=["disabled"],Fe={class:"action-icon"},We={class:"action-content"},Ke={class:"action-title"},Ye={key:0,class:"action-description"},Qe=h({__name:"ActionButton",props:{icon:{},title:{},description:{},variant:{default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,s=a,o=e=>{t.disabled||s("click",e)};return(a,t)=>(w(),x("button",{class:E(["action-button",e.variant,{"action-button-disabled":e.disabled}]),disabled:e.disabled,onClick:o},[_("div",Fe,C(e.icon),1),_("div",We,[_("div",Ke,C(e.title),1),e.description?(w(),x("div",Ye,C(e.description),1)):k("",!0)])],10,Je))}}),Xe=Object.assign(e(Qe,[["__scopeId","data-v-1657d8d0"]]),{__name:"GameActionButton"}),Ze={class:"w-80 space-y-3"},ea=h({__name:"GameActionPanel",emits:["show-generals","show-commandments","show-passive-cards","show-card-deck","show-card-guide","start-normal-battle","recruit-soldiers"],setup:e=>(e,a)=>(w(),x("div",Ze,[T(Xe,{icon:"âœ¨",title:"ì‹ ì˜ ê³„ëª…",description:"ì‹ ì´ ë‚´ë¦° ê³„ëª…ì„ í™•ì¸í•©ë‹ˆë‹¤",variant:"warning",onClick:a[0]||(a[0]=a=>e.$emit("show-commandments"))}),T(Xe,{icon:"ğŸ´",title:"ë³´ìœ  ì¹´ë“œ",description:"ë³´ìœ í•œ íŒ¨ì‹œë¸Œ ì¹´ë“œë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[1]||(a[1]=a=>e.$emit("show-passive-cards"))}),T(Xe,{icon:"ğŸƒ",title:"ì¹´ë“œ ë± ì„¤ì •",description:"ë‚´ì • 3ì¥ + ì „íˆ¬ 3ì¥ì„ ì¥ì°©í•©ë‹ˆë‹¤",variant:"info",onClick:a[2]||(a[2]=a=>e.$emit("show-card-deck"))}),T(Xe,{icon:"ğŸ“š",title:"ì¹´ë“œ ë„ê°",description:"ëª¨ë“  ì¹´ë“œì™€ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤",variant:"info",onClick:a[3]||(a[3]=a=>e.$emit("show-card-guide"))}),T(Xe,{icon:"âš”ï¸",title:"ëª¨í—˜",description:"ì  ì„¸ë ¥ê³¼ ì „íˆ¬ë¥¼ ë²Œì…ë‹ˆë‹¤",variant:"success",onClick:a[4]||(a[4]=a=>e.$emit("start-normal-battle"))}),T(Xe,{icon:"ğŸ›¡ï¸",title:"ë³‘ë ¥ ëª¨ì§‘",description:"ê¸ˆ 200ìœ¼ë¡œ ë³‘ë ¥ 100 ëª¨ì§‘",variant:"success",onClick:a[5]||(a[5]=a=>e.$emit("recruit-soldiers"))})]))});Object.assign(ea,{__name:"GameActionPanel"});function aa(e){return e.filter(e=>null!==e).map(e=>function(e){const{effect:a}=e;let t,s="instant_damage",o=0,l="";return"combat"===a.type?a.attackBonus&&a.attackBonus>0?(s="power_boost",o=a.attackBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ê³µê²©ë ¥ +${a.attackBonus}%`):a.defenseBonus&&a.defenseBonus>0?(s="defense_boost",o=a.defenseBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ë°©ì–´ë ¥ +${a.defenseBonus}%`):a.skillPowerBonus&&a.skillPowerBonus>0&&(s="power_boost",o=a.skillPowerBonus,t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ìŠ¤í‚¬ ìœ„ë ¥ +${a.skillPowerBonus}%`):"resource"===a.type?a.morale&&a.morale>0?(s="morale_boost",o=Math.min(3*a.morale,30),t=2,l=`2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +${o}%`):a.military&&a.military>0?(s="instant_damage",o=Math.min(2*a.military,50),l=`ì ì—ê²Œ ${o}ì˜ í”¼í•´ë¥¼ ì…í™ë‹ˆë‹¤`):(s="heal",o=15,l="ì•„êµ° ë³‘ë ¥ì´ 15% íšŒë³µë©ë‹ˆë‹¤"):"special"===a.type&&(s="morale_boost",o=20,t=2,l=a.description||"2í„´ ë™ì•ˆ ì•„êµ° ì‚¬ê¸° +20%"),{id:`converted_${e.id}`,name:e.name,description:e.description,icon:e.icon,image:e.image,rarity:e.rarity,effectType:s,power:o,duration:t,battleDescription:l}}(e))}const ta={class:"min-h-screen text-white flex flex-col overflow-hidden relative bg-slate-900"},sa=["src"],oa=["src"],la={class:"relative z-10 flex flex-col min-h-screen max-w-md mx-auto w-full bg-black/20"},ra={class:"text-2xl"},na={class:"font-semibold"},ia=h({__name:"game",setup(e){const t=b(null),h=b(null),S=b(1),D=b(!1),V=e=>{if(D.value)return;const a=1===e?t.value:h.value,s=1===e?h.value:t.value;if(a&&s&&S.value===e){const t=a.duration-a.currentTime;t<=1&&t>0&&(D.value=!0,s.currentTime=0,s.play().catch(e=>{}),S.value=1===e?2:1,setTimeout(()=>{D.value=!1,a.pause()},1e3))}},G=j(()=>a(()=>import("./DPNg7_ot.js"),__vite__mapDeps([0,1]),import.meta.url)),U=j(()=>a(()=>import("./D18Nttjh.js"),__vite__mapDeps([2,1,3,4,5,6,7]),import.meta.url)),q=j(()=>a(()=>import("./DPTXa9sg.js"),__vite__mapDeps([8,1,9,4]),import.meta.url)),z=j(()=>a(()=>import("./B_Qk4lVr.js"),__vite__mapDeps([10,1]),import.meta.url)),H=j(()=>a(()=>import("./Dwt9PNei.js"),__vite__mapDeps([11,1]),import.meta.url)),J=j(()=>a(()=>import("./D7_FddSo.js"),__vite__mapDeps([12,1,3,4,5,13]),import.meta.url)),F=j(()=>a(()=>import("./CU-E4_PG.js"),__vite__mapDeps([14,1,3,4,5,15]),import.meta.url)),W=j(()=>a(()=>import("./D0laA_5L.js"),__vite__mapDeps([16,1,3,4,5,17]),import.meta.url)),K=j(()=>a(()=>import("./KmWG2adZ.js"),__vite__mapDeps([18,1,4,3,5,19]),import.meta.url)),Y=j(()=>a(()=>import("./171I_o7I.js"),__vite__mapDeps([20,1,3,4,5,21]),import.meta.url)),Q=j(()=>a(()=>import("./DBgrpUtW.js"),__vite__mapDeps([22,1,3,4,5,23]),import.meta.url)),X=j(()=>a(()=>import("./DWQAsOxk.js"),__vite__mapDeps([24,1,3,4,5,25]),import.meta.url)),Z=j(()=>a(()=>import("./CB50UwFh.js"),__vite__mapDeps([26,1,3,4,5,27]),import.meta.url)),ee=j(()=>a(()=>import("./1UEPOCfZ.js"),__vite__mapDeps([28,1,3,4,5,29]),import.meta.url)),ae=j(()=>a(()=>import("./0xLzABaL.js"),__vite__mapDeps([30,1,4,3,5,31]),import.meta.url)),te=j(()=>a(()=>import("./D2rJFBRH.js"),__vite__mapDeps([32,1,3,4,5,33]),import.meta.url)),se=j(()=>a(()=>import("./fIQAtrHl.js"),__vite__mapDeps([34,1,3,4,5,35]),import.meta.url)),oe=j(()=>a(()=>import("./DffIDpLV.js"),__vite__mapDeps([36,1,4,3,5,37]),import.meta.url)),le=j(()=>a(()=>import("./DXFAeDb0.js"),__vite__mapDeps([38,1,3,4,5,39]),import.meta.url)),re=j(()=>a(()=>import("./hgopUsuK.js"),__vite__mapDeps([40,1,3,4,5,41]),import.meta.url)),ne=j(()=>a(()=>import("./1OISCWBS.js"),__vite__mapDeps([42,1,3,4,5,43]),import.meta.url)),ie=j(()=>a(()=>import("./DoS4oBz4.js"),__vite__mapDeps([44,1,3,4,5,45]),import.meta.url)),ce=j(()=>a(()=>import("./C3OKxfnV.js"),__vite__mapDeps([46,1]),import.meta.url)),de=j(()=>a(()=>import("./BoK1PSWn.js"),__vite__mapDeps([47,1,3,4,5,48]),import.meta.url)),ue=j(()=>a(()=>import("./gI7jf0i_.js"),__vite__mapDeps([49,1]),import.meta.url)),{nationState:me,startCards:ve}=B(),{playBGM:pe,stopBGM:fe}=L(),be=b([]),{notification:ye,showNotification:he}=(()=>{const e=b(null);return{notification:e,showNotification:(a,t="info")=>{e.value={message:a,type:t},setTimeout(()=>{e.value=null},3e3)}}})(),{tutorialState:xe,advanceDay:we,onRecruitSoldiers:_e,completeStartCardSelection:ke,skipTutorial:Ce}=o(),Se=b(!1),Re=b(null),De=b(!1),{remainingTime:Te}=N(),$e=y(()=>{if(!me.value?.selectedCommandments||0===me.value.selectedCommandments.length)return null;const e={morale:0,gold:0,military:0,food:0,population:0};return me.value.selectedCommandments.forEach(a=>{e.morale+=a.effects.morale,e.gold+=a.effects.gold,e.military+=a.effects.military,e.food+=a.effects.food,e.population+=a.effects.population}),e}),{playerPassiveCards:Ie,showPassiveCardSelection:Pe,availablePassiveCards:Ae}=l(),{cardDeck:je,equippedCards:Me,availableDomesticCards:Oe,availableBattleCards:Be,equipCard:Le,unequipCard:Ne,loadDeck:Ve}=(e=>{const a=b({domestic:[null,null,null],battle:[null,null,null]}),t="cardDeck",s=e=>"daily"===e.trigger||"recruit"===e.trigger,o=e=>!0===e.isBattleCard||"battle_start"===e.trigger||"battle_win"===e.trigger||"battle_lose"===e.trigger,l=y(()=>[...a.value.domestic.filter(e=>null!==e),...a.value.battle.filter(e=>null!==e)]),r=y(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>s(e)&&!a.includes(e.id))}),n=y(()=>{const a=l.value.map(e=>e.id);return e.value.filter(e=>o(e)&&!a.includes(e.id))}),i=()=>{{const e={domestic:a.value.domestic.map(e=>e?.id||null),battle:a.value.battle.map(e=>e?.id||null)};localStorage.setItem(t,JSON.stringify(e))}};return{cardDeck:a,equippedCards:l,availableDomesticCards:r,availableBattleCards:n,isDomesticCard:s,isBattleCard:o,equipCard:(e,t,r)=>!(r<0||r>2||"domestic"===t&&!s(e)||"battle"===t&&!o(e)||l.value.some(a=>a.id===e.id)||(a.value[t][r]=e,i(),0)),unequipCard:(e,t)=>!(t<0||t>2||(a.value[e][t]=null,i(),0)),saveDeck:i,loadDeck:()=>{{const o=localStorage.getItem(t);if(o)try{const t=JSON.parse(o);a.value.domestic=t.domestic.map(a=>a&&e.value.find(e=>e.id===a)||null),a.value.battle=t.battle.map(a=>a&&e.value.find(e=>e.id===a)||null)}catch(s){}}},resetDeck:()=>{a.value={domestic:[null,null,null],battle:[null,null,null]},i()},getActiveCardsForTrigger:e=>l.value.filter(a=>a.trigger===e)}})(Ie),Ge=b(!1),{ownedActiveCards:Ue,battleActiveCards:qe,maxBattleCards:ze,loadActiveCards:He,addToBattleDeck:Je,removeFromBattleDeck:Fe,clearBattleDeck:We,grantStarterCards:Ke}=r({showNotification:he});He();localStorage.getItem("hasGrantedStarterActiveCards")||0!==Ue.value.length||(Ke(),localStorage.setItem("hasGrantedStarterActiveCards","true"));$(Ue,e=>{{const a=e.map(e=>e.id);localStorage.setItem("activeCards",JSON.stringify(a))}},{deep:!0});const Ye=b([]),{playerCards:Qe,showCardSelection:Xe,availableCards:Ze,activeSynergies:ea,totalEffects:ia,dailyEffects:ca,battleEffects:da,selectCard:ua}=n(),{kingdom:ma,empire:va,recruitSoldiers:pa,calculateProduction:fa}=i(me,be,he),ga=()=>{pa(),_e()},ba=b(!1),ya=b(!1),ha=b(!1),xa=b(!1),wa=b(!1),_a=b([]),ka=b(!1),Ca=b(!1),Ea=b([]),Sa=e=>{Ea.value.push(e),Ea.value.length>100&&(Ea.value=Ea.value.slice(-100)),localStorage.setItem("battleHistory",JSON.stringify(Ea.value))},Ra=b(!1),Da=b(!1),Ta=b(null),$a=e=>{Ta.value=e,Da.value=!0},Ia=()=>{Ra.value=!1,xe.value.tutorialCompleted=!0,xe.value.isActive=!1,localStorage.setItem("tutorialState",JSON.stringify(xe.value)),he("íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!","success")},{showReincarnationModal:Pa,reincarnationData:Aa,loadReincarnationData:ja,selectInheritedCard:Ma,reincarnateWithoutCard:Oa}=c(ma,Ie,me,he);ja();const Ba=e=>{if(mt.value){Aa.value.inheritedCards.some(a=>a.id===e.id)||(Aa.value.inheritedCards.length>=v&&Aa.value.inheritedCards.shift(),Aa.value.inheritedCards.push(e)),localStorage.setItem("reincarnationData",JSON.stringify(Aa.value)),he(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤! (ëˆ„ì  ìƒì† ì¹´ë“œ: ${Aa.value.inheritedCards.length}ê°œ)`,"success"),Pa.value=!1,mt.value=!1}else Ma(e)},La=()=>{mt.value?(he("ì¹´ë“œë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.","info"),Pa.value=!1,mt.value=!1):Oa()},{adventureState:Na,moveCompletedNodeId:Va,currentNode:Ga,startAdventure:Ua,moveToNode:qa,completeNode:za,completeAdventure:Ha,retreatAdventure:Ja,rollDice:Fa,useNextDice:Wa,startAutoMove:Ka,selectPath:Ya}=d(ma.value.resources,he),Qa=()=>{pe("base",{loop:!0,volume:.3}),et.value=!1,at.value=!1,Ja()},Xa=b(!1),Za=b(!1),et=b(!1),at=b(!1),tt=b(!1),st=async()=>{tt.value=!0,await new Promise(e=>setTimeout(e,1e3)),Fa(),tt.value=!1,he("ë£°ë › 5ê°œ ìˆ«ì ìƒì„±! í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.","success")},ot=()=>{et.value=!1,at.value=!0,setTimeout(()=>{const e=Wa();he(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Ka(e)},300)},lt=()=>{const e=Wa();he(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),Ka(e)},rt=()=>{pe("adventure",{loop:!0,volume:.3}),Na.value.nodes.length>0?(Na.value.active=!0,Na.value.result=void 0,Na.value.diceResults.length>0&&Na.value.currentDiceIndex<Na.value.diceResults.length?(at.value=!0,et.value=!1,setTimeout(()=>{qt()},1e3)):(et.value=!0,at.value=!1)):(Ua(),et.value=!0,at.value=!1)},nt=b(!1),it=b({enemyName:"",enemyPower:0,battleType:"normal"}),ct=b([]),dt=b(!1),ut=b(!1),mt=b(!1),{currentBattle:vt,isScrolling:pt,loadBattleRecords:ft,selectBattleType:gt,startStoryBattle:bt,closeBattle:yt,currentBattleMode:ht,useActiveCard:xt,usedActiveCards:wt,attackerScore:_t,defenderScore:kt,isPaused:Ct,cardSelectionTime:Et,stopCardSelectionTimer:St,manualPauseBattle:Rt,manualResumeBattle:Dt}=u({kingdom:ma,enemyKingdoms:g,permanentEffects:be,empire:va,showNotification:he,synergyBattleEffects:da,isWeeklyInvasion:dt,showReincarnationModal:Pa,selectedBattleCards:ct,battleActiveCards:qe}),Tt=()=>{if(!vt.value)return;Ct.value||Rt();const e=_t.value>kt.value;vt.value.result=e?"victory":"defeat";const a={turn:999,generalName:"ì‹¬íŒê´€",action:"ì „íˆ¬ ì¢…ë£Œ",success:!0,message:"",story:e?`ğŸ‰ ${vt.value.attacker.kingdomName}ì˜ ìŠ¹ë¦¬! (${_t.value} vs ${kt.value})`:`ğŸ˜” ${vt.value.defender.kingdomName}ì˜ ìŠ¹ë¦¬... (${_t.value} vs ${kt.value})`,narrativeType:"narration"};vt.value.log.push(a),setTimeout(()=>{const e=document.querySelector(".overflow-y-auto");e&&(e.scrollTop=e.scrollHeight)},100)},$t=()=>{const e=vt.value?.result,a=ht.value;if(vt.value&&e){const t={timestamp:Date.now(),result:e,enemyName:vt.value.defender.kingdomName,battleType:a||"pve",day:ma.value.day,score:{player:_t.value,enemy:kt.value}};Sa(t)}yt(),pe(Na?.value?.active?"adventure":"base",{loop:!0,volume:.3}),Na?.value?.active?Zt(e):"defeat"===e&&"empire"===a&&setTimeout(()=>{dt&&(dt.value=!1),Pa.value=!0},500)};ft(),ve.value&&ve.value.length>0&&ve.value.forEach(e=>{Ie.value.some(a=>a.id===e.id)||Ie.value.push(e)});const{currentEvent:It,currentCrossroad:Pt,drawEventCard:At,selectPassiveCard:jt,selectChoice:Mt,closeEvent:Ot,selectCrossroadChoice:Bt,closeCrossroad:Lt}=m({kingdom:ma,playerPassiveCards:Ie,showPassiveCardSelection:Pe,availablePassiveCards:Ae,permanentEffects:be,reincarnationData:Aa,showReincarnationModal:Pa,showNotification:he,calculateProduction:fa,synergyDailyEffects:ca,godGameState:me}),Nt=()=>{Ot()},Vt=e=>{Mt(e),Na.value?.active&&qt()},Gt=()=>{Lt()},Ut=e=>{Bt(e),Na.value?.active&&qt()};$(Pa,e=>{e&&(Ye.value=Ie.value)}),$(()=>Va.value,e=>{e&&setTimeout(()=>{const a=Na.value.nodes.find(a=>a.id===e);a&&!a.completed?Jt(a):a&&a.completed&&qt(),Va.value=null},100)}),$(()=>Te.value.isExpired,e=>{e&&(he("âš ï¸ í˜„ì‹¤ì‹œê°„ 12ì¼ì´ ê²½ê³¼í–ˆìŠµë‹ˆë‹¤! ì„¸ê³„ê°€ ë©¸ë§í•˜ì—¬ ê²Œì„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤...","error"),setTimeout(()=>{localStorage.removeItem("gameData"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("invasionTracker"),localStorage.removeItem("playerName"),localStorage.removeItem("kingdomName"),localStorage.removeItem("tutorialProgress"),window.location.href="/story"},2e3))});const qt=()=>{if(Na.value.active)if(Na.value.currentDiceIndex<Na.value.diceResults.length){(()=>{let e=0,a=0,t=0,s=0;if(me.value){const o=me.value.commandmentEffects;o&&(o.gold&&(ma.value.resources.gold+=o.gold,e+=o.gold),o.food&&(ma.value.resources.food+=o.food,a+=o.food),o.morale&&(ma.value.resources.morale=Math.min(100,Math.max(0,ma.value.resources.morale+o.morale)),t+=o.morale),o.military&&(ma.value.resources.soldiers+=o.military,s+=o.military))}if(je.value.domestic.filter(e=>null!==e).forEach(o=>{o.effect&&(o.effect.gold&&(ma.value.resources.gold+=o.effect.gold,e+=o.effect.gold),o.effect.food&&(ma.value.resources.food+=o.effect.food,a+=o.effect.food),o.effect.morale&&(ma.value.resources.morale=Math.min(100,Math.max(0,ma.value.resources.morale+o.effect.morale)),t+=o.effect.morale),o.effect.military&&(ma.value.resources.soldiers+=o.effect.military,s+=o.effect.military))}),0!==e||0!==a||0!==t||0!==s){let o="ì´ë™ íš¨ê³¼: ";const l=[];0!==e&&l.push(`ê¸ˆ ${e>0?"+":""}${e}`),0!==a&&l.push(`ì‹ëŸ‰ ${a>0?"+":""}${a}`),0!==t&&l.push(`ë¯¼ì‹¬ ${t>0?"+":""}${t}`),0!==s&&l.push(`ë³‘ë ¥ ${s>0?"+":""}${s}`),o+=l.join(", "),he(o,"success")}})();const e=Wa();he(`${e}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`,"info"),setTimeout(()=>{Ka(e)},500)}else at.value=!1,Na.value.diceResults=[],Na.value.currentDiceIndex=0,setTimeout(()=>{et.value=!0,he("ëª¨ë“  ìˆ«ìë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤! ë‹¤ì‹œ ë£°ë ›ì„ ëŒë ¤ì£¼ì„¸ìš”.","info")},800)},zt=()=>{if(Se.value=!1,Re.value?.rewards){const e=Re.value.rewards;e.gold&&(ma.value.resources.gold+=e.gold),e.food&&(ma.value.resources.food+=e.food),e.soldiers&&(ma.value.resources.soldiers+=e.soldiers)}Re.value=null},Ht=e=>{jt(e),Na.value?.active&&setTimeout(()=>{qt()},500)},Jt=e=>{switch(qa(e.id),e.type){case"start":const a=Na.value.nodes.find(a=>a.id===e.id);a&&(a.status="completed",a.completed=!0),es(),Na.value.active&&qt();break;case"battle":case"elite":case"boss":e.enemy&&("boss"===e.type&&(ut.value=!0),it.value={enemyName:e.enemy.name,enemyPower:e.enemy.power,battleType:"boss"===e.type?"empire":"normal"},nt.value=!0);break;case"event":const t=Na.value.nodes.find(a=>a.id===e.id);t&&(t.status="completed",t.completed=!0),Na.value.active?At():es();break;case"shop":Xa.value=!0;break;case"rest":Za.value=!0;break;case"treasure":const s={gold:Math.floor(300*Math.random())+200,food:Math.floor(200*Math.random())+100,cards:p(1)};za(s),he(`ğŸ’ ë³´ë¬¼ ë°œê²¬! ê¸ˆ +${s.gold}, ì‹ëŸ‰ +${s.food}`,"success");const o=Na.value.nodes.find(a=>a.id===e.id);o&&(o.status="completed",o.completed=!0),es(),Na.value.active&&qt()}},Ft=e=>{if(Na.value.isSelectingPath){if(Na.value.availablePaths.some(a=>a.id===e.id)){Ya(e.id);const a={battle:"âš”ï¸",elite:"ğŸ”¥",boss:"ğŸ‘‘",event:"â“",shop:"ğŸª",rest:"ğŸ•ï¸",treasure:"ğŸ’",start:"ğŸšª"}[e.type]||"â¡ï¸";he(`${a} ë°©í–¥ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!`,"info")}else he("ì„ íƒ ê°€ëŠ¥í•œ ê²½ë¡œê°€ ì•„ë‹™ë‹ˆë‹¤.","error");return}if(e.completed){const a=Na.value.nodes.find(e=>e.id===Na.value.currentNodeId);return void(a&&a.connections.includes(e.id)?(qa(e.id),he("ì´ë¯¸ ì™„ë£Œí•œ ì¹¸ìœ¼ë¡œ ë˜ëŒì•„ì™”ìŠµë‹ˆë‹¤.","info")):he("í˜„ì¬ ìœ„ì¹˜ì™€ ì¸ì ‘í•œ ì¹¸ë§Œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","error"))}"available"!==e.status?he("ì•„ì§ ê°ˆ ìˆ˜ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤.","error"):he("ë£°ë ›ì„ ëŒë ¤ì„œ ì´ë™í•´ì£¼ì„¸ìš”!","info")},Wt=()=>{Xa.value=!1,Ga.value&&(Ga.value.status="completed",Ga.value.completed=!0,Ga.value.connections.forEach(e=>{const a=Na.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),es(),Na.value.active&&qt())},Kt=e=>{let a=!1;switch(e){case"soldiers":ma.value.resources.gold>=400&&(ma.value.resources.gold-=400,ma.value.resources.soldiers+=200,he("ë³‘ì‚¬ 200ëª… ëª¨ì§‘!","success"),a=!0);break;case"food":ma.value.resources.gold>=200&&(ma.value.resources.gold-=200,ma.value.resources.food+=500,he("ì‹ëŸ‰ 500 êµ¬ë§¤!","success"),a=!0);break;case"card":ma.value.resources.gold>=300&&(ma.value.resources.gold-=300,Ae.value=p(3),Pe.value=!0,he("ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”!","info"),a=!0);break;case"heal":if(ma.value.resources.food>=200){ma.value.resources.food-=200;const e=Math.floor(.1*Na.value.startingResources.soldiers);ma.value.resources.soldiers+=e,he(`ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success"),a=!0}}a&&"card"!==e&&Wt()},Yt=e=>{switch(e){case"heal":const e=Math.floor(.2*Na.value.startingResources.soldiers);ma.value.resources.soldiers+=e,he(`ğŸ•ï¸ íœ´ì‹ìœ¼ë¡œ ë³‘ë ¥ ${e}ëª… íšŒë³µ!`,"success");break;case"remove-card":he("ğŸ—‘ï¸ ì¹´ë“œ ì •ë¦¬ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤","info");break;case"meditate":const a=Math.floor(200*Math.random())+100,t=Math.floor(150*Math.random())+50;ma.value.resources.gold+=a,ma.value.resources.food+=t,he(`ğŸ§˜ ëª…ìƒ... ê¸ˆ +${a}, ì‹ëŸ‰ +${t}`,"success")}Za.value=!1,Ga.value&&(Ga.value.status="completed",Ga.value.completed=!0,Ga.value.connections.forEach(e=>{const a=Na.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),es(),Na.value.active&&qt())},Qt=()=>{nt.value=!1,Na.value?.active&&Ga.value&&(Ga.value.status="completed",Ga.value.completed=!0,ut.value&&(ut.value=!1),setTimeout(()=>{qt()},300))},Xt=()=>{nt.value=!1,We();aa(je.value.battle).forEach(e=>{Je(e)}),bt(it.value.enemyName,it.value.enemyPower,it.value.battleType)},Zt=e=>{if(Ga.value&&Ga.value.enemy)if(ut.value)if("victory"===e){const e={gold:5e3,food:3e3,soldiers:1e3};ma.value.resources.gold+=e.gold,ma.value.resources.food+=e.food,ma.value.resources.soldiers+=e.soldiers,he(`ğŸ‘‘ ë³´ìŠ¤ ì²˜ì¹˜! ê¸ˆ +${e.gold}, ì‹ëŸ‰ +${e.food}, ë³‘ë ¥ +${e.soldiers}`,"success"),Ha(),setTimeout(()=>{ut.value=!1,mt.value=!0,Pa.value=!0},1e3)}else setTimeout(()=>{ut.value=!1,mt.value=!1,Pa.value=!0},500);else if("victory"===e){za(Ga.value.enemy.rewards),he(`ìŠ¹ë¦¬! ê¸ˆ +${Ga.value.enemy.rewards.gold}, ì‹ëŸ‰ +${Ga.value.enemy.rewards.food}`,"success");const e=Ga.value.enemy.rewards.cards&&Ga.value.enemy.rewards.cards.length>0;e&&(Ae.value=Ga.value.enemy.rewards.cards,Pe.value=!0),Ga.value.status="completed",Ga.value.completed=!0,Ga.value.connections.forEach(e=>{const a=Na.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),es(),Na.value.active&&!e?qt():Na.value.active}else{const e=Math.floor(.3*ma.value.resources.soldiers);ma.value.resources.soldiers=Math.max(0,ma.value.resources.soldiers-e),he(`íŒ¨ë°°... ë³‘ë ¥ ${e}ëª… ì†ì‹¤. ëª¨í—˜ì€ ê³„ì†ë©ë‹ˆë‹¤.`,"error"),Ga.value.status="completed",Ga.value.completed=!0,Ga.value.connections.forEach(e=>{const a=Na.value.nodes.find(a=>a.id===e);a&&"locked"===a.status&&(a.status="available")}),es(),Na.value.active&&qt()}},es=()=>{if(ma.value.day++,Na.value?.active)return void he(`${ma.value.day}ì¼ì°¨`,"info");const e=we(ma.value.day);if(e)return a=e,Re.value=a,void(Se.value=!0);var a;if(ma.value.day%7==0&&ma.value.day>0&&ma.value.day<42){const e=ma.value.day/7;return he(`âš”ï¸ ${e}ì£¼ì°¨! ì œêµ­êµ°ì´ ì „ë©´ ì¹¨ëµí•´ì˜µë‹ˆë‹¤!`,"error"),dt.value=!0,void gt("pve","empire")}if(ma.value.day>=42)return he("ğŸ”„ 42ì¼ì´ ì§€ë‚¬ìŠµë‹ˆë‹¤. ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),void setTimeout(()=>{localStorage.removeItem("reincarnationData"),localStorage.removeItem("gameData"),localStorage.removeItem("passiveCards"),localStorage.removeItem("gameStartTime"),localStorage.removeItem("tutorialState"),localStorage.removeItem("synergyCards"),he("ê²Œì„ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤...","info"),setTimeout(()=>{window.location.reload()},1e3)},2e3);he(`${ma.value.day}ì¼ì°¨ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.`,"info")},as=()=>{wa.value=!1,he("ì¹´ë“œ êµí™˜ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.","info")},ts=(e,a)=>{const t=Ie.value.findIndex(a=>a.id===e.id);-1!==t&&(Ie.value.splice(t,1,a),he(`${e.name}ì„(ë¥¼) ${a.name}(ìœ¼)ë¡œ êµí™˜í–ˆìŠµë‹ˆë‹¤!`,"success"),wa.value=!1)},ss=e=>Ie.value.some(a=>a.id===e.id)?(he("ì´ë¯¸ ë³´ìœ í•œ ì¹´ë“œì…ë‹ˆë‹¤!","error"),!1):Ie.value.length>=f?(he(`ìµœëŒ€ ${f}ì¥ê¹Œì§€ë§Œ ë³´ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!`,"error"),!1):(Ie.value.push(e),!0),os=e=>{ss(e)&&(he(`${e.name} ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success"),wa.value=!1)},ls=y(()=>(Ae.value||[]).filter(e=>"common"===e.rarity||"rare"===e.rarity).slice(0,9)),rs=e=>{let a=0;e.forEach(e=>{ss(e)&&a++}),ke(),he(`${a}ê°œì˜ ì¹´ë“œë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!`,"success")},ns=()=>{Dt(),0===ma.value.day?(ma.value.day=1,he("âš”ï¸ ì „íˆ¬ ì¤€ë¹„ ì™„ë£Œ! 1ì¼ì°¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤!","success")):he("âš”ï¸ ì „íˆ¬ ê°€ì´ë“œë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!","success")},is=e=>{e&&(St(),Rt())};return I(()=>{Ve(),(()=>{{const a=localStorage.getItem("battleHistory");if(a)try{Ea.value=JSON.parse(a)}catch(e){Ea.value=[]}}})(),setTimeout(()=>{Ra.value=!0},500),pe("base",{loop:!0,volume:.3})}),P(()=>{fe()}),(e,a)=>(w(),x("div",ta,[_("video",{ref_key:"bgVideo1",ref:t,autoplay:"",muted:"",playsinline:"",class:E(["absolute inset-0 w-full h-full object-cover z-0 transition-opacity duration-1000 ease-in-out",{"opacity-100":1===S.value,"opacity-0":2===S.value}]),src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/background/base_back_ani.mp4`,onTimeupdate:a[0]||(a[0]=e=>V(1))},null,42,sa),_("video",{ref_key:"bgVideo2",ref:h,muted:"",playsinline:"",class:E(["absolute inset-0 w-full h-full object-cover z-0 transition-opacity duration-1000 ease-in-out",{"opacity-100":2===S.value,"opacity-0":1===S.value}]),src:`${("useRuntimeConfig"in e?e.useRuntimeConfig:R(s))().app.baseURL}images/background/base_back_ani.mp4`,onTimeupdate:a[1]||(a[1]=e=>V(2))},null,42,oa),a[21]||(a[21]=_("div",{class:"absolute inset-0 bg-black/40 z-0"},null,-1)),_("div",la,[R(xe)?.storyCompleted&&!R(xe)?.hasSelectedStartCards?(w(),A(R(G),{key:0,cards:ls.value,onConfirm:rs},null,8,["cards"])):k("",!0),T(R(ie),{show:Ra.value,onComplete:Ia,onSkip:R(Ce)},null,8,["show","onSkip"]),R(Na)?.active?k("",!0):(w(),A(ge,{key:1,resources:R(ma).resources,timer:R(Te),"current-day":R(ma).day,"reincarnation-count":R(Aa).count,"commandment-effects":$e.value,onShowResourceHelp:$a},null,8,["resources","timer","current-day","reincarnation-count","commandment-effects"])),a[20]||(a[20]=_("div",{class:"flex-1"},null,-1)),R(Na)?.active?k("",!0):(w(),A(Ee,{key:2,"unlocked-features":R(xe)?.unlockedFeatures||[],onShowBattleHistory:a[2]||(a[2]=e=>Ca.value=!0),onShowPassiveCards:a[3]||(a[3]=e=>ba.value=!0),onShowCardDeck:a[4]||(a[4]=e=>Ge.value=!0),onShowCardGuide:a[5]||(a[5]=e=>ya.value=!0),onStartNormalBattle:rt,onRecruitSoldiers:ga},null,8,["unlocked-features"])),T(R(q),{event:R(It),"current-resources":R(ma).resources,onClose:Nt,onSelectChoice:Vt},null,8,["event","current-resources"]),T(R(z),{crossroad:R(Pt),onClose:Gt,onSelectChoice:Ut},null,8,["crossroad"]),T(R(U),{battle:R(vt),"is-scrolling":R(pt),"battle-active-cards":R(qe),"used-active-cards":R(wt),"attacker-score":R(_t),"defender-score":R(kt),"is-paused":R(Ct),"card-selection-time":R(Et),"current-day":R(ma).day,onClose:$t,onUseActiveCard:R(xt),onCompleteTutorial:ns,onPauseTutorial:is,onManualPause:R(Rt),onManualResume:R(Dt),onSkipToResult:Tt},null,8,["battle","is-scrolling","battle-active-cards","used-active-cards","attacker-score","defender-score","is-paused","card-selection-time","current-day","onUseActiveCard","onManualPause","onManualResume"]),T(R(H),{show:R(Pe),cards:R(Ae),onSelectCard:Ht},null,8,["show","cards"]),T(R(J),{show:De.value,"owned-active-cards":R(Ue),"battle-active-cards":R(qe),"max-battle-cards":R(ze),onClose:a[6]||(a[6]=e=>De.value=!1),onAddToDeck:R(Je),onRemoveFromDeck:R(Fe)},null,8,["show","owned-active-cards","battle-active-cards","max-battle-cards","onAddToDeck","onRemoveFromDeck"]),T(R(F),{show:R(Pa),"available-cards":Ye.value,"reincarnation-count":R(Aa).count,"highest-day":Math.max(R(Aa).highestDay,R(ma).day),"total-days-played":R(Aa).totalDaysPlayed+R(ma).day,"inherited-cards-count":R(Aa).inheritedCards?.length||0,onSelectCard:Ba,onReincarnateWithoutCard:La},null,8,["show","available-cards","reincarnation-count","highest-day","total-days-played","inherited-cards-count"]),T(R(W),{show:ba.value,"passive-cards":R(Ie),"inherited-card-ids":R(Aa).inheritedCards.map(e=>e.id),onClose:a[7]||(a[7]=e=>ba.value=!1)},null,8,["show","passive-cards","inherited-card-ids"]),T(R(K),{show:ya.value,"player-cards":R(Ie),onClose:a[8]||(a[8]=e=>ya.value=!1)},null,8,["show","player-cards"]),T(R(ce),{modelValue:Ge.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Ge.value=e),"card-deck":R(je),"available-domestic-cards":R(Oe),"available-battle-cards":R(Be),"equipped-cards":R(Me),onEquipCard:a[10]||(a[10]=(e,a,t)=>R(Le)(e,a,t)),onUnequipCard:a[11]||(a[11]=(e,a)=>R(Ne)(e,a))},null,8,["modelValue","card-deck","available-domestic-cards","available-battle-cards","equipped-cards"]),T(R(Y),{show:ka.value,commandments:R(me)?.selectedCommandments||[],onClose:a[12]||(a[12]=e=>ka.value=!1)},null,8,["show","commandments"]),T(R(Q),{show:Ca.value,battles:Ea.value,onClose:a[13]||(a[13]=e=>Ca.value=!1)},null,8,["show","battles"]),T(R(X),{show:Se.value,title:Re.value?.title||"",message:Re.value?.message||"",rewards:Re.value?.rewards,urgent:Re.value?.urgent,important:Re.value?.important,final:Re.value?.final,onClose:zt,onConfirm:zt},null,8,["show","title","message","rewards","urgent","important","final"]),T(R(Z),{show:R(Xe),cards:R(Ze),onClose:a[14]||(a[14]=e=>Xe.value=!1),onSelectCard:R(ua)},null,8,["show","cards","onSelectCard"]),T(R(ee),{show:ha.value,cards:R(Qe),synergies:R(ea),"total-effects":R(ia).totalEffects,onClose:a[15]||(a[15]=e=>ha.value=!1)},null,8,["show","cards","synergies","total-effects"]),T(R(ae),{show:xa.value,onClose:a[16]||(a[16]=e=>xa.value=!1)},null,8,["show"]),T(R(se),{show:Da.value,"resource-type":Ta.value,onClose:a[17]||(a[17]=e=>Da.value=!1)},null,8,["show","resource-type"]),T(R(te),{show:wa.value,"current-cards":R(Ie),"new-cards":_a.value,onClose:a[18]||(a[18]=e=>wa.value=!1),onSkip:as,onExchange:ts,onAdd:os},null,8,["show","current-cards","new-cards"]),R(Na)?.active?(w(),A(R(oe),{key:3,nodes:R(Na)?.nodes||[],"current-node-id":R(Na)?.currentNodeId||null,"accumulated-rewards":R(Na)?.accumulatedRewards||{},"visible-cells":R(Na)?.visibleCells||new Set,"is-selecting-path":R(Na)?.isSelectingPath||!1,"available-paths":R(Na)?.availablePaths||[],onNodeClick:Ft,onRetreat:Qa},null,8,["nodes","current-node-id","accumulated-rewards","visible-cells","is-selecting-path","available-paths"])):k("",!0),T(R(le),{show:Xa.value,"current-gold":R(ma).resources.gold,"current-food":R(ma).resources.food,onClose:Wt,onBuy:Kt},null,8,["show","current-gold","current-food"]),T(R(re),{show:Za.value,onClose:a[19]||(a[19]=e=>Za.value=!1),onSelect:Yt},null,8,["show"]),T(R(ne),{show:nt.value,"enemy-name":it.value.enemyName,"enemy-power":it.value.enemyPower,"player-power":R(ma).resources.soldiers,"deck-battle-cards":R(je).battle,"is-boss-battle":ut.value,onConfirm:Xt,onCancel:Qt},null,8,["show","enemy-name","enemy-power","player-power","deck-battle-cards","is-boss-battle"]),T(R(de),{show:et.value,"dice-results":R(Na)?.diceResults||[],"current-index":R(Na)?.currentDiceIndex||0,"is-rolling":tt.value,onRoll:st,onUseNext:lt,onConfirm:ot},null,8,["show","dice-results","current-index","is-rolling"]),T(R(ue),{show:at.value,"dice-results":R(Na)?.diceResults||[],"current-index":R(Na)?.currentDiceIndex||0},null,8,["show","dice-results","current-index"]),T(O,{name:"notification"},{default:M(()=>[R(ye)?(w(),x("div",{key:0,class:E(["fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[200px]",{"bg-green-600 border-2 border-green-400":"success"===R(ye).type,"bg-red-600 border-2 border-red-400":"error"===R(ye).type,"bg-blue-600 border-2 border-blue-400":"info"===R(ye).type}])},[_("span",ra,C("success"===R(ye).type?"âœ“":"error"===R(ye).type?"âœ—":"â„¹"),1),_("span",na,C(R(ye).message),1)],2)):k("",!0)]),_:1})])]))}});export{ia as default};
